/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/1xxx-MessageFlag.js
var MsgFlag;
(function (MsgFlag) {
    MsgFlag[MsgFlag["Unknown"] = 0] = "Unknown";
    MsgFlag[MsgFlag["GetAllStorageOneWindow"] = 1001] = "GetAllStorageOneWindow";
    MsgFlag[MsgFlag["NewWindowTest"] = 1002] = "NewWindowTest";
    MsgFlag[MsgFlag["Ping"] = 1003] = "Ping";
    MsgFlag[MsgFlag["ReqRemoveFromStorage"] = 1004] = "ReqRemoveFromStorage";
    MsgFlag[MsgFlag["ReqAddCETab"] = 1100] = "ReqAddCETab";
    MsgFlag[MsgFlag["ReqAdminB"] = 1101] = "ReqAdminB";
    MsgFlag[MsgFlag["ReqGoDesktop"] = 1102] = "ReqGoDesktop";
    MsgFlag[MsgFlag["ReqLoginWithAdminB"] = 1103] = "ReqLoginWithAdminB";
    MsgFlag[MsgFlag["ReqMarkFavorite"] = 1104] = "ReqMarkFavorite";
    MsgFlag[MsgFlag["ReqOpenCE"] = 1105] = "ReqOpenCE";
    MsgFlag[MsgFlag["ReqQuickPublish"] = 1106] = "ReqQuickPublish";
    MsgFlag[MsgFlag["ReqRestoreClick"] = 1107] = "ReqRestoreClick";
    MsgFlag[MsgFlag["Unused"] = 1108] = "Unused";
    MsgFlag[MsgFlag["ReqSetScMode"] = 1109] = "ReqSetScMode";
    MsgFlag[MsgFlag["ReqTakeSnapShot"] = 1110] = "ReqTakeSnapShot";
    MsgFlag[MsgFlag["ReqToggleCompactCss"] = 1111] = "ReqToggleCompactCss";
    MsgFlag[MsgFlag["ReqUpdateNickName"] = 1112] = "ReqUpdateNickName";
    MsgFlag[MsgFlag["RespCurState"] = 1200] = "RespCurState";
    MsgFlag[MsgFlag["RespTaskFailed"] = 1201] = "RespTaskFailed";
    MsgFlag[MsgFlag["RespListeningAndReady"] = 1202] = "RespListeningAndReady";
    MsgFlag[MsgFlag["_unused"] = 1203] = "_unused";
    MsgFlag[MsgFlag["RespTaskSuccessful"] = 1204] = "RespTaskSuccessful";
    MsgFlag[MsgFlag["RespTest"] = 1205] = "RespTest";
    MsgFlag[MsgFlag["RespNotReady"] = 1206] = "RespNotReady";
})(MsgFlag || (MsgFlag = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/3xxx-SettingKey.js
var _3xxx_SettingKey_SettingKey;
(function (SettingKey) {
    SettingKey[SettingKey["unknown"] = 0] = "unknown";
    SettingKey[SettingKey["AutoLogin"] = 3100] = "AutoLogin";
    SettingKey[SettingKey["__dead"] = 3101] = "__dead";
    SettingKey[SettingKey["DebugKeepDialogOpen"] = 3102] = "DebugKeepDialogOpen";
    SettingKey[SettingKey["AutoSaveIntervalMin"] = 3103] = "AutoSaveIntervalMin";
    SettingKey[SettingKey["UseCompactCss"] = 3104] = "UseCompactCss";
    SettingKey[SettingKey["AutoSaveRetainDays"] = 3105] = "AutoSaveRetainDays";
    SettingKey[SettingKey["AutoRenameCeButton"] = 3106] = "AutoRenameCeButton";
    SettingKey[SettingKey["MaxAutoSaveCount"] = 3200] = "MaxAutoSaveCount";
    SettingKey[SettingKey["EnableLogging"] = 3201] = "EnableLogging";
    SettingKey[SettingKey["LgndPopUpLog"] = 3300] = "LgndPopUpLog";
    SettingKey[SettingKey["LgndForeSite"] = 3301] = "LgndForeSite";
    SettingKey[SettingKey["LgndHindSite"] = 3302] = "LgndHindSite";
    SettingKey[SettingKey["LgndSettings"] = 3303] = "LgndSettings";
    SettingKey[SettingKey["LgndContentState"] = 3304] = "LgndContentState";
    SettingKey[SettingKey["_unused_"] = 3305] = "_unused_";
    SettingKey[SettingKey["LgndMessages"] = 3306] = "LgndMessages";
    SettingKey[SettingKey["LgndBrowserState"] = 3307] = "LgndBrowserState";
    SettingKey[SettingKey["LgndPopUpState"] = 3308] = "LgndPopUpState";
    SettingKey[SettingKey["LastUsedLogToStorageKey"] = 3400] = "LastUsedLogToStorageKey";
    SettingKey[SettingKey["AutoSnapshotBeforeWindowChange"] = 3401] = "AutoSnapshotBeforeWindowChange";
})(_3xxx_SettingKey_SettingKey || (_3xxx_SettingKey_SettingKey = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/BufferChar.js
var BufferChar;
(function (BufferChar) {
    BufferChar[BufferChar["space"] = 0] = "space";
    BufferChar[BufferChar["Nbsp"] = 1] = "Nbsp";
    BufferChar[BufferChar["Period"] = 2] = "Period";
    BufferChar[BufferChar["Zero"] = 3] = "Zero";
})(BufferChar || (BufferChar = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/BufferDirection.js
var BufferDirection;
(function (BufferDirection) {
    BufferDirection[BufferDirection["left"] = 0] = "left";
    BufferDirection[BufferDirection["right"] = 1] = "right";
})(BufferDirection || (BufferDirection = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/scWindowType.js
var ScWindowType;
(function (ScWindowType) {
    ScWindowType[ScWindowType["Unknown"] = 0] = "Unknown";
    ScWindowType[ScWindowType["LoginPage"] = 1] = "LoginPage";
    ScWindowType[ScWindowType["Desktop"] = 2] = "Desktop";
    ScWindowType[ScWindowType["ContentEditor"] = 3] = "ContentEditor";
    ScWindowType[ScWindowType["Launchpad"] = 4] = "Launchpad";
    ScWindowType[ScWindowType["Edit"] = 5] = "Edit";
    ScWindowType[ScWindowType["Normal"] = 6] = "Normal";
    ScWindowType[ScWindowType["Preview"] = 7] = "Preview";
})(ScWindowType || (ScWindowType = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/SnapShotFlavor.js
var SnapShotFlavor;
(function (SnapShotFlavor) {
    SnapShotFlavor[SnapShotFlavor["Unknown"] = 0] = "Unknown";
    SnapShotFlavor[SnapShotFlavor["Autosave"] = 1] = "Autosave";
    SnapShotFlavor[SnapShotFlavor["Favorite"] = 2] = "Favorite";
    SnapShotFlavor[SnapShotFlavor["Manual"] = 3] = "Manual";
})(SnapShotFlavor || (SnapShotFlavor = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/StaticHelpers.js






class StaticHelpers_StaticHelpers {
    static MinToMs(minutes) {
        return minutes * 60 * 1000;
    }
    static FlavorAsString(flavor) {
        return 'Flavor.' + SnapShotFlavor[flavor] + '(' + flavor + ')';
    }
    static SettingKeyAsString(settingKey) {
        let toReturn = '';
        try {
            toReturn = 'SettingKey.' + _3xxx_SettingKey_SettingKey[settingKey] + '(' + settingKey + ')';
        }
        catch (err) {
            toReturn = err;
        }
        return toReturn;
    }
    static ScWindowTypeFriendly(windowType) {
        return ScWindowType[windowType];
    }
    static MakeFriendlyDate(date) {
        var toReturn = '';
        var workingDate = new Date(date);
        if (workingDate) {
            var month = StaticHelpers_StaticHelpers.BufferString((workingDate.getMonth() + 1).toString(), 2, BufferChar.Zero, BufferDirection.left);
            var day = StaticHelpers_StaticHelpers.BufferString(workingDate.getDate().toString(), 2, BufferChar.Zero, BufferDirection.left);
            var min = StaticHelpers_StaticHelpers.BufferString(workingDate.getMinutes().toString(), 2, BufferChar.Zero, BufferDirection.left);
            var hoursRaw = workingDate.getHours();
            var hourClean = hoursRaw ? hoursRaw : 12;
            var hourCleanStr = StaticHelpers_StaticHelpers.BufferString(hourClean.toString(), 2, BufferChar.Zero, BufferDirection.left);
            toReturn = month + '.' + day + ' ' + hourCleanStr + ':' + min;
        }
        else {
            toReturn = '{error}';
            throw (this.MakeFriendlyDate.name, 'no date provided');
        }
        return toReturn;
    }
    static BufferString(str, desiredLength, buffCharEnum, direction) {
        var toReturn = str;
        var buffChar = ' ';
        if (buffCharEnum === BufferChar.space) {
            buffChar = ' ';
        }
        else if (buffCharEnum === BufferChar.Nbsp) {
            buffChar = '&nbsp;';
        }
        else if (buffCharEnum === BufferChar.Period) {
            buffChar = '.';
        }
        else if (buffCharEnum === BufferChar.Zero) {
            buffChar = '0';
        }
        if (toReturn.length > desiredLength) {
            if (desiredLength > 6) {
                toReturn = toReturn.substring(0, desiredLength - 3) + '...';
            }
            else {
                toReturn = toReturn.substring(0, desiredLength);
            }
        }
        if (toReturn.length < desiredLength) {
            var bufferCharNeeded = desiredLength - toReturn.length;
            for (var idx = 0; idx < bufferCharNeeded; idx++) {
                if (direction === BufferDirection.left) {
                    toReturn = buffChar + toReturn;
                }
                else {
                    toReturn = toReturn + buffChar;
                }
            }
        }
        return toReturn;
    }
    static MsgFlagAsString(msg) {
        var toReturn = "{error}";
        if (msg) {
            try {
                toReturn = 'MsgFlag.' + MsgFlag[msg] + '(' + msg + ')';
            }
            catch (e) {
            }
        }
        return 'flag: ' + toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/SharedConst.js
let SharedConst = (() => {
    class SharedConst {
    }
    SharedConst.Const = {
        Debug: {
            ForceLoggingEnabled: true
        },
        IterHelper: {
            GrowthPerIteration: 0.5,
            MaxCount: {
                Default: 10,
                OverridePublishing: 15,
            },
            Timeouts: {
                Max: 10000,
                Default: 100,
            },
        },
        ObjDiscriminator: {
            DataOneTreeNode: 'IDataOneTreeNode',
        },
        Settings: {
            Defaults: {
                EnableLogging: false,
                LogToStorage: false,
                UseCompactCss: false,
            }
        },
        Regex: {
            ContentEditor: /Content.*?Editor/ig,
            CleanGuid: /{|-|}/ig,
            NbSp: /&nbsp;/ig,
            QueryStrSeparatorQuest: /\?/gi,
            PageType: {
                Desktop: /.*default.aspx/ig,
                Edit: /sc_itemid=.*sc_mode=edit/ig,
                Normal: /sc_itemid=.*sc_mode=normal/ig,
                Preview: /sc_itemid=.*sc_mode=preview/ig,
            },
        },
        UrlSuffix: {
            Desktop: '/sitecore/shell/default.aspx',
            Login: '/sitecore/login',
            LaunchPad: '/client/applications/launchpad',
            CE: '/sitecore/shell/Applications/Content Editor.aspx?sc_bw=1',
            None: '/',
            AboutBlank: 'about:blank',
        },
    };
    return SharedConst;
})();


// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Helpers/GuidData.js

let GuidData_GuidData = (() => {
    class GuidData {
        constructor(raw = null) {
            this.StorageType = 'GuidAsString';
            this.StorageType = 'GuidAsString';
            this.Type = 'Guid';
            if (!raw) {
                this.Raw = GuidData.ConstEmptyGuid;
            }
            else {
                if (GuidData.IsValidGuidStr(raw)) {
                    this.Raw = this.GuidStrWithDashes(raw);
                }
                else {
                    throw ('Invalid GUID string: ' + raw);
                }
            }
        }
        GuidStrWithDashes(val) {
            let toReturn = '';
            let withoutDashes = val.replace(/-/g, '');
            var parts = [];
            if (withoutDashes.length !== 32) {
                throw (this.GuidStrWithDashes.name + ' - Wrong count wanted: ' + 32 + " got: " + withoutDashes.length + ' (without dashes) ' + withoutDashes);
            }
            parts.push(withoutDashes.slice(0, 8));
            parts.push(withoutDashes.slice(8, 12));
            parts.push(withoutDashes.slice(12, 16));
            parts.push(withoutDashes.slice(16, 20));
            parts.push(withoutDashes.slice(20, 32));
            toReturn = parts.join('-');
            return toReturn;
        }
        AsBracedGuid() {
            return '{' + this.Raw + "}";
        }
        static GetEmptyGuid() {
            return new GuidData();
        }
        FormatJustNumbers(str) {
            return str.replace(SharedConst.Const.Regex.CleanGuid, '');
        }
        static IsValidGuidStr(candidateStr) {
            let toReturn = false;
            let regexGuid = '^[\}]?[0-9a-f]{8}[\-]?[0-9a-f]{4}[\-]?[0-9a-f]{4}[\-]?[0-9a-f]{4}[\-]?[0-9a-f]{12}[\}]?$';
            let pattern = new RegExp(regexGuid, 'i');
            toReturn = pattern.test(candidateStr);
            return toReturn;
        }
    }
    GuidData.ConstEmptyGuid = '00000000-0000-0000-0000-000000000000';
    return GuidData;
})();


// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/LoggerAgent/LogWriterBuffer.js
class LogWriterBuffer {
    constructor() {
        this.LogPreInitBuffer = [];
        this.bufferPrefix = '* ';
    }
    WriteText(text) {
        this.LogPreInitBuffer.push(this.bufferPrefix + text);
    }
    GetBuffer() {
        let iterCheckMax = 1000;
        let toReturn = [];
        while (this.LogPreInitBuffer.length > 0 && iterCheckMax > 0) {
            iterCheckMax--;
            toReturn.push(this.LogPreInitBuffer.shift());
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/LoggerAgent/LoggerAgent.js
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class LoggerAgent_LoggerAgent {
    constructor() {
        this.ErrorStack = [];
        this.__debugTextChangedCallbacks = [];
        this.__allLogWriters = [];
        this.BufferWriter = new LogWriterBuffer();
        this.AddWriter(this.BufferWriter);
        this.__callDepth = -1;
        this.LogTimeStamp();
    }
    LogTimeStamp() {
        var dateobj = new Date();
        var result = this.pad(dateobj.getDate()) + "/" + this.pad(dateobj.getMonth() + 1) + "/" + dateobj.getFullYear() + " " + this.pad(dateobj.getHours()) + ":" + this.pad(dateobj.getMinutes());
        this.LogVal('TimeStamp', result);
    }
    pad(n) { return n < 10 ? "0" + n : n; }
    FlushBuffer() {
        this.RemoveWriter(this.BufferWriter);
        this.LogVal('TimeStamp B', Date.now());
        let bufferAr = this.BufferWriter.GetBuffer();
        for (var idx = 0; idx < bufferAr.length; idx++) {
            this.Log(bufferAr[idx]);
        }
    }
    RemoveWriter(BufferWriter) {
        for (var idx = 0; idx < this.__allLogWriters.length; idx++) {
            let candidate = this.__allLogWriters[idx];
            if (candidate == BufferWriter) {
                this.__allLogWriters.splice(idx, 1);
                break;
            }
        }
    }
    AddWriter(writter) {
        this.HasWriters = true;
        this.__allLogWriters.push(writter);
    }
    SectionMarker(sectionTag) {
        this.Log("");
        this.Log("======================= " + sectionTag + " =======================");
        this.Log("");
    }
    ThrowIfNullOrUndefined(title, subject) {
        if (!this.IsNotNullOrUndefinedBool(title, subject)) {
            throw 'Failed';
        }
    }
    IsNotNullOrUndefinedBool(title, subject) {
        var toReturn = false;
        if (subject) {
            if ((typeof subject) === 'undefined') {
                this.LogVal(title + ' Is Not Undefined', '!!! false !!!');
            }
            else {
                this.LogVal(title + ' Is Not Null', 'true');
                toReturn = true;
            }
        }
        else {
            this.LogVal(title + ' Is Not Null', '!!! false !!!');
        }
        return toReturn;
    }
    HndlrClearDebugText(self, verify = false) {
        this.FuncStart(this.HndlrClearDebugText.name);
        var proceed = true;
        if (verify) {
            proceed = confirm('Clear Debug TextArea ?');
        }
        if (proceed) {
            var newText = '--- Debug Text Reset ---';
            self.__triggerAllDebugTextChangedCallbacks({
                NewText: newText,
                Append: false
            });
        }
        this.FuncEnd(this.HndlrClearDebugText.name);
    }
    MarkerA() {
        this.__markerRaw('A');
    }
    MarkerB() {
        this.__markerRaw('B');
    }
    MarkerC() {
        this.__markerRaw('C');
    }
    MarkerD() {
        this.__markerRaw('D');
    }
    MarkerE() { this.__markerRaw('E'); }
    MarkerF() { this.__markerRaw('F'); }
    __markerRaw(marker) {
        this.Log('Marker ' + marker);
    }
    LogAsJsonPretty(texValName, jsonObj) {
        this.LogVal(texValName, JSON.stringify(jsonObj, null, 1));
    }
    LogVal(textValName, textVal) {
        if (typeof textVal === 'undefined') {
            textVal = '{undefined}';
        }
        else if (textVal === null) {
            textVal = '{null}';
        }
        else {
            var asGuid = textVal;
            if (typeof asGuid === typeof GuidData_GuidData) {
                textVal = asGuid.Raw;
            }
        }
        textVal = textVal.toString();
        textValName = StaticHelpers_StaticHelpers.BufferString(textValName.toString(), 50, BufferChar.space, BufferDirection.right);
        const debugPrefix = '  ~~~  ';
        this.Log(debugPrefix + textValName + ' : ' + textVal);
    }
    Log(text, optionalValue = '', hasPrefix = false) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.HasWriters) {
                var indent = '  ';
                for (var idx = 0; idx < this.__callDepth; idx++) {
                    text = indent + text;
                }
                var prefixLength = 3;
                if (!hasPrefix) {
                    for (var idx = 0; idx < prefixLength; idx++) {
                        text = ' ' + text;
                    }
                }
                this.__triggerAllDebugTextChangedCallbacks({
                    NewText: text,
                    Append: true
                });
                this.__WriteToAllWriters(text);
            }
        });
    }
    __WriteToAllWriters(text) {
        for (var idx = 0; idx < this.__allLogWriters.length; idx++) {
            var oneWriter = this.__allLogWriters[idx];
            oneWriter.WriteText(text);
        }
    }
    __triggerAllDebugTextChangedCallbacks(data) {
        for (var idx = 0; idx < this.__debugTextChangedCallbacks.length; idx++) {
            var oneCallback = this.__debugTextChangedCallbacks[idx];
            oneCallback.Func(oneCallback.Caller, data);
        }
    }
    CtorName(ctorName) {
        this.Log('Constructor: ' + ctorName);
    }
    FuncStart(textOrFunc, optionalValue) {
        textOrFunc = 's' + ' ' + this.__callDepth + ') ' + textOrFunc;
        if (!optionalValue) {
            optionalValue = '';
        }
        else {
            optionalValue = optionalValue.toString();
        }
        if (optionalValue.length > 0) {
            textOrFunc = textOrFunc + ' : ' + optionalValue;
        }
        this.Log(textOrFunc, '', true);
        this.__callDepth++;
        if (this.__callDepth > 10) {
            this.__callDepth = 10;
        }
    }
    InstantiateStart(text) {
        this.FuncStart("[Instantiate] " + text);
    }
    InstantiateEnd(text) {
        this.FuncEnd("[Instantiate] " + text);
    }
    FuncEnd(text, optionalValueInput) {
        this.__callDepth--;
        if (this.__callDepth < 0) {
            this.__callDepth = 0;
        }
        text = 'e' + ' ' + this.__callDepth + ') ' + text;
        if (!optionalValueInput) {
            optionalValueInput = '';
        }
        var optionalValue = optionalValueInput.toString();
        if (optionalValue.length > 0) {
            text = text + ' : ' + optionalValue;
        }
        this.Log(text, optionalValue, true);
    }
    ErrorAndThrow(container, text) {
        this.ErrorAndContinue(container, text);
        throw container + " " + text;
    }
    ErrorAndContinue(container, text) {
        if (!container) {
            container = 'unknown';
        }
        if (!text) {
            text = 'unknown';
        }
        this.ErrorStack.push({
            ContainerFunc: container,
            ErrorString: text
        });
        this.Log('');
        this.Log('\t\t** ERROR ** ' + container);
        this.Log('');
        this.Log('\t\t  ' + text);
        this.Log('');
        this.Log('\t\t** ERROR ** ' + container);
        this.Log('');
    }
    NotNullCheck(title, value) {
        if (typeof value === 'undefined') {
            this.LogVal(title, 'Is Undefined');
        }
        else if (!value) {
            this.LogVal(title, 'Is Null');
        }
        else {
            this.LogVal(title, 'Is Not Null');
        }
    }
    IsNullOrUndefined(subject) {
        var toReturn = '{unknown}';
        if (subject) {
            if ((typeof subject) === 'undefined') {
                toReturn = 'Is Undefined';
            }
            else {
                toReturn = 'Not Null';
            }
        }
        else {
            toReturn = 'Is Null';
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/LoggerAgent/LoggerConsoleWriter.js
class LoggerConsoleWriter {
    WriteText(text) {
        console.log(text);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/LoggerAgent/LoggerStorageWriter.js
var LoggerStorageWriter_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
class LoggerStorageWriter {
    constructor() {
        this.CurrentStorageLogKey = '0';
        this.LogToStoragePrefix = 'Hindsite.Log.';
        this.StorageLogCombined = "";
    }
    WriteText(text) {
    }
    SetLogToStorageKey(logToStorageIndex) {
        this.CurrentStorageLogKey = this.LogToStoragePrefix + logToStorageIndex;
    }
    WriteLogToStorage(logMessage) {
        return LoggerStorageWriter_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve) => LoggerStorageWriter_awaiter(this, void 0, void 0, function* () {
                this.StorageLogCombined += "|||" + JSON.stringify(logMessage);
                if (this.CurrentStorageLogKey) {
                    window.localStorage.setItem(this.CurrentStorageLogKey, this.StorageLogCombined);
                }
            }));
        });
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/RepositoryAgent/RepositoryAgent.js
class RepositoryAgent {
    constructor(loggerAgent) {
        this.Logger = loggerAgent;
    }
    InitRepositoryAgent() {
        this.Logger.FuncStart(RepositoryAgent.name, this.InitRepositoryAgent.name);
        this.Logger.FuncEnd(RepositoryAgent.name, this.InitRepositoryAgent.name);
    }
    GetBulkLocalStorageByKeyPrefix(targetPrefix) {
        return new Promise((resolve, reject) => {
            var toReturn = [];
            try {
                var storageLength = window.localStorage.length;
                for (var idx = 0; idx < storageLength; idx++) {
                    var candidate = {
                        data: '',
                        key: '',
                    };
                    candidate.key = window.localStorage.key(idx);
                    if (candidate.key.startsWith(targetPrefix)) {
                        candidate.data = window.localStorage.getItem(candidate.key);
                        if (typeof candidate != 'undefined' && typeof candidate.data != 'undefined' && candidate != null && candidate.data != null) {
                            toReturn.push(candidate);
                        }
                    }
                }
                resolve(toReturn);
            }
            catch (ex) {
                reject(ex);
            }
        });
    }
    ReadDataOfKey(targetKey) {
        this.Logger.FuncStart(this.ReadDataOfKey.name);
        let storageValue = null;
        let toReturn = '';
        this.Logger.LogVal('target key ', targetKey);
        storageValue = window.localStorage.getItem(targetKey);
        if (storageValue != null) {
            toReturn = storageValue.toString();
        }
        else {
            this.Logger.Log(this.ReadDataOfKey.name, "No value returned from storage");
        }
        this.Logger.FuncEnd(this.ReadDataOfKey.name);
        return toReturn;
    }
    WriteByKey(storageKey, jsonString) {
        this.Logger.FuncStart(this.WriteByKey.name);
        window.localStorage.setItem(storageKey, jsonString);
        this.Logger.FuncEnd(this.WriteByKey.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/SettingsAgent/OneGenericSetting.js
class OneGenericSetting {
    constructor(settingKey, dataType, valueAsObj, uiSelector, defaultValue, settingFlavor, friendly, enabled, hasUi = true) {
        this.SettingKey = settingKey;
        this.DataType = dataType;
        this.ValueAsObj = valueAsObj;
        this.UiSelector = uiSelector;
        this.DefaultValue = defaultValue;
        this.SettingFlavor = settingFlavor;
        this.Friendly = friendly;
        this.HasUi = hasUi;
        this.Enabled = enabled;
    }
    ValueAsInt() {
        var toReturn = Number.MIN_SAFE_INTEGER;
        if (this.ValueAsObj !== undefined && this.ValueAsObj !== null) {
            toReturn = parseInt(this.ValueAsObj.toString());
        }
        return toReturn;
    }
    ValueAsBool() {
        let toReturn = this.DefaultValue;
        if (this.ValueAsObj !== undefined && this.ValueAsObj !== null) {
            toReturn = this.ValueAsObj;
        }
        else {
            toReturn = this.DefaultValue;
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/SettingType.js
var SettingType;
(function (SettingType) {
    SettingType[SettingType["Unknown"] = 0] = "Unknown";
    SettingType[SettingType["BoolCheckBox"] = 1] = "BoolCheckBox";
    SettingType[SettingType["Accordion"] = 2] = "Accordion";
    SettingType[SettingType["Number"] = 3] = "Number";
})(SettingType || (SettingType = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/SettingFlavor.js
var SettingFlavor;
(function (SettingFlavor) {
    SettingFlavor[SettingFlavor["unknown"] = 0] = "unknown";
    SettingFlavor[SettingFlavor["PopUp"] = 1] = "PopUp";
    SettingFlavor[SettingFlavor["ContentAndPopUpStoredInPopUp"] = 2] = "ContentAndPopUpStoredInPopUp";
    SettingFlavor[SettingFlavor["ContentAndPopUpStoredInEach"] = 3] = "ContentAndPopUpStoredInEach";
    SettingFlavor[SettingFlavor["ContentOnly"] = 4] = "ContentOnly";
})(SettingFlavor || (SettingFlavor = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/PopConst.js
let PopConst = (() => {
    class PopConst {
    }
    PopConst.Const = {
        ClassNames: {
            HS: {
                Collapsed: 'in',
            },
        },
        ElemId: {
            InputNickname: 'id-input-nickname',
            HindSiteParentInfo: 'spanParentInfo',
            HS: {
                SelectHeaderAuto: 'sel-header-auto',
                SelectHeaderAutoTitle: 'sel-header-auto-title',
                SelectHeaderFavorite: 'sel-header-favorite',
                SelectHeaderFavoriteTitle: 'sel-header-favorite-title',
                SelectHeaderManual: 'sel-header-manual',
                SelectHeaderManualTitle: 'sel-header-manual-title',
                TabId: 'orig-win-id',
            }
        },
        Numbers: {
            MinMenuHeight: 600,
            MinMenuWidth: 600,
            MaxAutoSaveCount: 10,
            AutoSaveIntervalMin: 5,
        },
        Notify: {
            Default: 'Complete',
            PublishComplete: 'Publishing Complete',
        },
        Selector: {
            Btn: {
                WindowClose: '[id=close-window]',
            },
            Legend: {
                LgndBrowserState: '[id=lgnd-browser-state]',
                LgndContentState: '[id=lgnd-content-state]',
                LgndForeSite: '[id=lgnd-fore-site]',
                LgndHindSite: '[id=lgnd-hind-site]',
                LgndMessages: '[id=lgnd-messages]',
                LgndPopUpLog: '[id=lgnd-pop-up-log]',
                LgndPopUpState: '[id=lgnd-pop-up-state]',
                LgndSettings: '[id=lgnd-settings]',
            },
            HS: {
                AdminB: '[id=AdminB]',
                AutoSnapshotBeforeWindowChange: '[id=id-settings-auto-snapshot-on-window-change]',
                BigRed: '[id=BigRed]',
                BuildStamp: '[id=build-stamp]',
                CompactCE: '[id=CompactCE]',
                Desktop: '[id=Desktop]',
                DivOverlayModule: '[id=menu-overlay]',
                DivStateContent: '[id=feedback-div-state-content]',
                FeedbackBrowserState: '[id=feedback-div-browser-state]',
                FeedbackPopUpState: '[id=feedback-div-pop-up-state]',
                FeedbackContentState: '[id=feedback-div-state-content]',
                FeedbackLogElement: '[id=feedback-pop-up-log]',
                FeedbackMessages: '[id=feedback-messages]',
                FeedbackStorage: '[id=feedback-storage]',
                GoCE: '[id=CE]',
                HsCancel: '[id=Cancel]',
                HsRemoveFromStorage: '[id=RemoveOneFromLocalStorage]',
                HsRestoreWindowStateSameTab: '[id=id-restore-state-same-tab]',
                HsRestoreWindowStateNewTab: '[id=id-restore-state-new-tab]',
                iCBoxdSettingsAutoLogin: '[id=id-settings-auto-login]',
                IdFieldSetDebug: '[id=id-fieldset-debug]',
                EnableLogging: '[id=id-settings-show-log-data]',
                ToggleFavorite: '[id=id-toggle-favorite]',
                ModeEdit: '[id=sc-mode-edit]',
                ModeNorm: '[id=Norm]',
                ModePrev: '[id=Prev]',
                PrefAutoLogin: '[id=id-settings-auto-login]',
                PresentationDetails: '[id=PresentationDetails]',
                QuickPublish: '[id=QuickPublish]',
                SelStateSnapShot: '[id=selState]',
                SettingAutoSaveInterval: '[id=id-settings-auto-save-interval]',
                SettingAutoSaveMaxCount: '[id=id-settings-auto-save-max-count]',
                SettingDebugKeepDialogOpen: '[id=id-settings-debug-keep-dialog-open]',
                SettingAutoSaveSnapshotRetainDays: '[id=id-settings-auto-save-snap-shot-retain-days]',
                SettingAutoRenameCeTabButton: '[id=id-settings-auto-rename-ce-tab-button]',
                SettingNotUsed: '[id=id-settings-not-used]',
                SettingUseCompactCss: '[id=id-settings-use-compact]',
                TakeSnapshot: '[id=SaveWindowState]',
                UpdateNicknameB: '[id=id-btn-update-nickname]',
            },
        },
        Settings: {
            Defaults: {
                AutoSaveEnabled: false,
                DebugKeepDialogOpen: false,
                LgndBrowserState: false,
                LgndContentState: false,
                LgndForeSite: true,
                LgndHindSite: true,
                LgndMessages: false,
                LgndPopUpLog: false,
                LgndPopUpState: false,
                LgndSettings: false,
            }
        },
        Storage: {
            SettingsSuffix: 'todo',
            KeyGenericSettings: 'HindSite.' + 'GenericSettings',
            StorageLogKeyPrefix: 'HindSite.' + 'Log.',
            Defaults: {
                bool: {
                    AutoSaveEnabled: false,
                    AutoLogin: false,
                    DefaultDebugKeepDialogOpen: false,
                    AutoSnapshotBeforeWindowChange: true,
                }
            }
        },
        SnapShotFormat: {
            lenTimestamp: 13,
            lenNickname: 16,
            lenPageType: 7,
            lenPrefix: 6,
            lenShortId: 4,
            colSep: ' - ',
            lenCeCount: 3,
            lenActiveNode: 16,
            lenFavorite: 3,
        },
        Timeouts: {
            WaitBeforeRemovingCompleteFlag: 1500,
            AutoLoginCheckInterval: 3000,
        },
    };
    return PopConst;
})();


// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/Enabled.js
var Enabled;
(function (Enabled) {
    Enabled[Enabled["Unknown"] = 0] = "Unknown";
    Enabled[Enabled["Enabled"] = 1] = "Enabled";
    Enabled[Enabled["Disabled"] = 2] = "Disabled";
})(Enabled || (Enabled = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Interfaces/InjectConst.js
let ContentConst = (() => {
    class ContentConst {
    }
    ContentConst.Const = {
        MaxAutoToSaveCount: 10,
        DefaultMaxAutoSaveAgeDays: 7,
        DefaultAutoRenameCeTabButton: false,
        Iterations: {
            MaxSetHrefEffort: 10,
            MaxIterationSwitchBoard: 20,
        },
        Timeouts: {
            PostLoginBtnClick: 1000,
            SetHrefEffortWait: 1000,
            WaitBeforeRemovingCompleteFlagOnContent: 1500,
            AutoSaveIntervalMin: 1,
        },
        ElemId: {
            sc: {
                scLoginUserName: 'UserName',
                scLoginPassword: 'Password',
                SitecoreRootNodeId: 'Tree_Node_11111111111111111111111111111111',
                SitecoreRootGlyphId: 'Tree_Glyph_11111111111111111111111111111111',
                scLoginBtn: {
                    sc920: 'LogInBtn',
                    sc820: null
                },
            }
        },
        ClassNames: {
            ContentTreeNode: 'scContentTreeNode',
            SC: {
                scContentTreeNodeActive: 'scContentTreeNodeActive',
            }
        },
        Selector: {
            SC: {
                ContentTreeNodeGlyph: '.scContentTreeNodeGlyph',
                IdStartsWithTreeNode: '[id^=Tree_Node_]',
                IframeContent: {
                    sc820: null,
                    sc920: 'iframe[src*=Content]'
                },
                JqueryModalDialogsFrame: '[id=jqueryModalDialogsFrame]',
                ContentIframe0: '[id=scContentIframeId0]',
                NextButton: '[id=NextButton]',
                ContentIFrame1: '[id=scContentIframeId1]',
                Ok: '[id=OK]',
                Cancel: '[id=CancelButton]',
                MenuButtonPublish: '[id=B414550BADAF4542C9ADF44BED5FA6CB3E_menu_button]',
                MenuDropDownPublishItem: '[id=B414550BADAF4542C9ADF44BED5FA6CB3E_menu_98719A90225A4802A0625D3967E4DD47]',
                NavPublishStrip: '[id*=_Nav_PublishStrip]',
                StartMenuLeftOption: '.scStartMenuLeftOption',
                Publish: {
                    TheItemHasBeenPublished: '[id=LastPage]:not([style*=\'display:none\'])',
                    SettingsHidden: '[id=Settings][style*=\'display: none\']',
                    PublishingHidden: '[id=Publishing][style*=\'display: none\']',
                },
                LoginBtn: {
                    sc920: null,
                    sc820: 'input.btn',
                },
                scStartButton: {
                    sc920: '[id=StartButton]',
                    sc820: '[id=startButton]'
                },
                Desktop: {
                    DtStartBar: '[id=Startbar]',
                },
            },
        },
        Storage: {
            SettingsSuffix: '.Settings',
            ShowDebugData: false,
            SnapShotPrefix: 'WindowSnapShot.',
            WindowRoot: 'HindSite.',
        },
        MaxIter: 100,
        MaxNullOrUndefinedIter: 100,
        prop: {
            AllTreeData: 'AllTreeData',
        },
        Names: {
            SC: {
                TreeGlyphPrefix: 'Tree_Glyph_',
                TreeNodePrefix: 'Tree_Node_',
                TreeExpandedPng: {
                    sc920: 'treemenu_expanded.png',
                    sc820: 'todo'
                }
            },
            PopUp: 'PopUp',
            PopUpStyles: 'PopUpStyles',
            TreeMenuExpandedPng: 'treemenu_expanded.png',
            TreeMenuCollapsedPng: 'treemenu_collapsed.png',
            scDefaultAdminPassword: 'b',
            scDefaultAdminUserName: 'admin',
        }
    };
    return ContentConst;
})();


// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/SettingsAgent/ConstAllSettings.js








class ConstAllSettings_ConstAllSettings {
    constructor() {
        this.AllSettings = [
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LastUsedLogToStorageKey, SettingType.Number, 0, null, 0, SettingFlavor.ContentAndPopUpStoredInEach, 'Rolling Prefix key for log to storage', Enabled.Enabled, false),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.EnableLogging, SettingType.BoolCheckBox, true, PopConst.Const.Selector.HS.EnableLogging, SharedConst.Const.Settings.Defaults.EnableLogging, SettingFlavor.ContentAndPopUpStoredInPopUp, 'Enable Logging (note: page refresh + open pop up required to fully realize)', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.UseCompactCss, SettingType.BoolCheckBox, false, PopConst.Const.Selector.HS.SettingUseCompactCss, SharedConst.Const.Settings.Defaults.UseCompactCss, SettingFlavor.ContentOnly, 'Use Compact CSS', Enabled.Disabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.AutoSnapshotBeforeWindowChange, SettingType.BoolCheckBox, null, PopConst.Const.Selector.HS.AutoSnapshotBeforeWindowChange, PopConst.Const.Storage.Defaults.bool.AutoSnapshotBeforeWindowChange, SettingFlavor.ContentAndPopUpStoredInPopUp, 'Auto Save Snapshot on HindSite Window Change', Enabled.Disabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.AutoLogin, SettingType.BoolCheckBox, null, PopConst.Const.Selector.HS.iCBoxdSettingsAutoLogin, PopConst.Const.Storage.Defaults.bool.AutoLogin, SettingFlavor.ContentAndPopUpStoredInPopUp, 'Auto Login', Enabled.Disabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndPopUpLog, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndPopUpLog, PopConst.Const.Settings.Defaults.LgndPopUpLog, SettingFlavor.PopUp, 'Pop Up Log', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndForeSite, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndForeSite, PopConst.Const.Settings.Defaults.LgndForeSite, SettingFlavor.PopUp, 'Fore&bull;Site', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndHindSite, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndHindSite, PopConst.Const.Settings.Defaults.LgndHindSite, SettingFlavor.PopUp, 'Hind&bull;Site', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndSettings, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndSettings, PopConst.Const.Settings.Defaults.LgndSettings, SettingFlavor.PopUp, 'Settings', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndMessages, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndMessages, PopConst.Const.Settings.Defaults.LgndMessages, SettingFlavor.PopUp, 'Messages', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndPopUpState, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndPopUpState, PopConst.Const.Settings.Defaults.LgndPopUpState, SettingFlavor.PopUp, 'Pop Up State', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndContentState, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndContentState, PopConst.Const.Settings.Defaults.LgndContentState, SettingFlavor.PopUp, 'Content State', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.LgndBrowserState, SettingType.Accordion, null, PopConst.Const.Selector.Legend.LgndBrowserState, PopConst.Const.Settings.Defaults.LgndBrowserState, SettingFlavor.PopUp, 'Browser State', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.MaxAutoSaveCount, SettingType.Number, null, PopConst.Const.Selector.HS.SettingAutoSaveMaxCount, PopConst.Const.Numbers.MaxAutoSaveCount, SettingFlavor.ContentAndPopUpStoredInPopUp, 'Auto Save Max Count', Enabled.Disabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.AutoSaveIntervalMin, SettingType.Number, null, PopConst.Const.Selector.HS.SettingAutoSaveInterval, PopConst.Const.Numbers.AutoSaveIntervalMin, SettingFlavor.ContentAndPopUpStoredInPopUp, 'Auto Save Interval (Min) - 0 to disable', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.DebugKeepDialogOpen, SettingType.BoolCheckBox, null, PopConst.Const.Selector.HS.SettingDebugKeepDialogOpen, PopConst.Const.Settings.Defaults.DebugKeepDialogOpen, SettingFlavor.PopUp, '(Debug) Keep Dialog Open', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.AutoSaveRetainDays, SettingType.Number, null, PopConst.Const.Selector.HS.SettingAutoSaveSnapshotRetainDays, ContentConst.Const.DefaultMaxAutoSaveAgeDays, SettingFlavor.ContentOnly, 'Days to Retain Auto Snap Shots', Enabled.Enabled),
            new OneGenericSetting(_3xxx_SettingKey_SettingKey.AutoRenameCeButton, SettingType.BoolCheckBox, false, PopConst.Const.Selector.HS.SettingAutoRenameCeTabButton, ContentConst.Const.DefaultAutoRenameCeTabButton, SettingFlavor.ContentAndPopUpStoredInPopUp, 'Auto rename Content Editor tab button to match active node', Enabled.Enabled)
        ];
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/SettingsAgent/SettingsAgent.js


class SettingsAgent_SettingsAgent {
    constructor(logger, repoAgent) {
        this.SettingsAr = [];
        this.Logger = logger;
        this.RepoAgent = repoAgent;
    }
    UpdateSettingsFromPopUpMsg(newSettings) {
        this.Logger.FuncStart(this.UpdateSettingsFromPopUpMsg.name);
        if (newSettings) {
            for (var idx = 0; idx < newSettings.length; idx++) {
                let oneSetting = newSettings[idx];
                this.SetByKey(oneSetting.SettingKey, oneSetting.ValueAsObj);
            }
        }
        this.Logger.FuncEnd(this.UpdateSettingsFromPopUpMsg.name);
    }
    InitSettingsAgent(allDefaultSettings) {
        this.Logger.FuncStart(this.InitSettingsAgent.name, allDefaultSettings.length);
        this.SettingsAr = allDefaultSettings;
        let settingsFromStorage = this.ReadGenericSettingsFromStorage();
        this.UpdateSettingValuesFromStorage(settingsFromStorage);
        this.Logger.FuncEnd(this.InitSettingsAgent.name);
    }
    GetAllSettings() {
        return this.SettingsAr;
    }
    ReadGenericSettingsFromStorage() {
        this.Logger.FuncStart(this.ReadGenericSettingsFromStorage.name);
        let toReturn = [];
        let storedValue = this.RepoAgent.ReadDataOfKey(PopConst.Const.Storage.KeyGenericSettings);
        if (storedValue) {
            toReturn = JSON.parse(storedValue.toString());
        }
        else {
            toReturn = [];
        }
        this.Logger.FuncEnd(this.ReadGenericSettingsFromStorage.name);
        return toReturn;
    }
    LogAllSettings() {
        this.Logger.LogAsJsonPretty('this.SettingsAr', this.SettingsAr);
    }
    UpdateSettingValuesFromStorage(settingsFromStorage) {
        this.Logger.FuncStart(this.UpdateSettingValuesFromStorage.name);
        try {
            for (var idx = 0; idx < settingsFromStorage.length; idx++) {
                let storageSetting = settingsFromStorage[idx];
                let matchingSetting = this.GetByKey(storageSetting.SettingKey);
                if (matchingSetting) {
                    matchingSetting.ValueAsObj = storageSetting.ValueAsObj;
                }
                else {
                    this.Logger.ErrorAndContinue(this.UpdateSettingValuesFromStorage.name, 'matching setting not found ' + StaticHelpers_StaticHelpers.SettingKeyAsString(storageSetting.SettingKey));
                }
            }
        }
        catch (err) {
            this.Logger.ErrorAndThrow(this.UpdateSettingValuesFromStorage.name, err);
        }
        this.Logger.FuncEnd(this.UpdateSettingValuesFromStorage.name);
    }
    GetSettingsByFlavor(targetFlavors) {
        let toReturn = [];
        for (var idx = 0; idx < this.SettingsAr.length; idx++) {
            let candidate = this.SettingsAr[idx];
            if (targetFlavors.indexOf(candidate.SettingFlavor) > -1) {
                toReturn.push(candidate);
            }
        }
        return toReturn;
    }
    CheckBoxSettingChanged(SettingKey, valueAsObj) {
        this.SetByKey(SettingKey, valueAsObj);
    }
    NumberSettingChanged(SettingKey, valueAsNumber) {
        this.Logger.Log(StaticHelpers_StaticHelpers.SettingKeyAsString(SettingKey));
        this.Logger.LogVal('valueAsNumber', valueAsNumber.toString());
        this.SetByKey(SettingKey, valueAsNumber);
    }
    GetByKey(needleSettingKey) {
        this.Logger.FuncStart(this.GetByKey.name, StaticHelpers_StaticHelpers.SettingKeyAsString(needleSettingKey));
        var toReturn = null;
        for (var idx = 0; idx < this.SettingsAr.length; idx++) {
            let candidate = this.SettingsAr[idx];
            if (candidate.SettingKey === needleSettingKey) {
                toReturn = candidate;
                break;
            }
        }
        if (!toReturn) {
            this.Logger.ErrorAndContinue(this.NumberSettingChanged.name, 'Setting not found ' + StaticHelpers_StaticHelpers.SettingKeyAsString(needleSettingKey));
        }
        this.Logger.FuncEnd(this.GetByKey.name, toReturn ? toReturn.ValueAsObj : 'null');
        return toReturn;
    }
    SetByKey(settingKey, value) {
        this.Logger.FuncStart(this.SetByKey.name, StaticHelpers_StaticHelpers.SettingKeyAsString(settingKey));
        this.Logger.LogAsJsonPretty('value', value);
        let foundSetting = this.GetByKey(settingKey);
        if (foundSetting) {
            foundSetting.ValueAsObj = value;
            this.WriteAllSettingValuesToStorage();
        }
        else {
            this.Logger.ErrorAndThrow(this.SetByKey.name, 'setting match not found');
        }
        this.Logger.FuncEnd(this.SetByKey.name, StaticHelpers_StaticHelpers.SettingKeyAsString(settingKey));
    }
    WriteAllSettingValuesToStorage() {
        this.Logger.FuncStart(this.WriteAllSettingValuesToStorage.name);
        let settingValues = [];
        for (var udx = 0; udx < this.SettingsAr.length; udx++) {
            if (this.SettingsAr[udx].ValueAsObj !== null) {
                settingValues.push({
                    SettingKey: this.SettingsAr[udx].SettingKey,
                    ValueAsObj: this.SettingsAr[udx].ValueAsObj,
                    SettingKeyFriendly: StaticHelpers_StaticHelpers.SettingKeyAsString(this.SettingsAr[udx].SettingKey)
                });
            }
        }
        this.RepoAgent.WriteByKey(PopConst.Const.Storage.KeyGenericSettings, JSON.stringify(settingValues));
        this.Logger.FuncEnd(this.WriteAllSettingValuesToStorage.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/QueryStrKey.js
var QueryStrKey;
(function (QueryStrKey) {
    QueryStrKey[QueryStrKey["hsTargetSs"] = 0] = "hsTargetSs";
    QueryStrKey[QueryStrKey["sc_mode"] = 1] = "sc_mode";
    QueryStrKey[QueryStrKey["sc_itemid"] = 2] = "sc_itemid";
    QueryStrKey[QueryStrKey["sc_lang"] = 3] = "sc_lang";
    QueryStrKey[QueryStrKey["sc_site"] = 4] = "sc_site";
})(QueryStrKey || (QueryStrKey = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/scMode.js
var scMode;
(function (scMode) {
    scMode[scMode["Unknown"] = 0] = "Unknown";
    scMode[scMode["Edit"] = 1] = "Edit";
    scMode[scMode["Preview"] = 2] = "Preview";
    scMode[scMode["Normal"] = 3] = "Normal";
})(scMode || (scMode = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/UrlAgent/GenericUrlAgent.js
var GenericUrlAgent_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class GenericUrlAgent_GenericUrlAgent {
    constructor(logger) {
        this.Logger = logger;
    }
    GetUrlParts() {
        return this.UrlParts;
    }
    QueryStringHasKey(key) {
        let toReturn = false;
        if (key !== null) {
            let keyAsStr = QueryStrKey[key];
            if (keyAsStr) {
                toReturn = this.UrlParts && this.UrlParts.Parameters && this.UrlParts.Parameters.has(keyAsStr);
            }
        }
        return toReturn;
    }
    GetQueryStringValueByKey(key) {
        let toReturn = '';
        if (this.QueryStringHasKey(key)) {
            let keyAsStr = QueryStrKey[key];
            toReturn = this.UrlParts.Parameters.get(keyAsStr);
        }
        return toReturn;
    }
    SetParameterValueByKey(key, newValue) {
        if (this.UrlParts) {
            this.UrlParts.Parameters.set(QueryStrKey[key], newValue);
        }
        else {
            this.Logger.ErrorAndThrow(this.SetParameterValueByKey.name, 'No URLParts ' + QueryStrKey[key] + ' ' + newValue);
        }
    }
    SetFilePath(newFilePath) {
        this.UrlParts.FilePath = newFilePath;
    }
    InitGenericUrlAgent() {
        return new Promise((resolve, reject) => GenericUrlAgent_awaiter(this, void 0, void 0, function* () {
            try {
                this.Logger.FuncStart(this.InitGenericUrlAgent.name);
                if (browser.tabs) {
                    yield browser.tabs.query({ currentWindow: true, active: true })
                        .then((result) => {
                        this.Logger.LogAsJsonPretty('result', result);
                        let resultTab = result[0];
                        this.SetFromHref(resultTab.url);
                        resolve();
                    })
                        .catch((err) => reject(err));
                }
                else {
                    this.Logger.Log('Init from window.location.href');
                    let urlToUse = window.location.href;
                    this.SetFromHref(urlToUse);
                }
                resolve();
            }
            catch (ex) {
                reject(ex);
            }
            this.Logger.FuncEnd(this.InitGenericUrlAgent.name);
        }));
    }
    SetFromHref(href) {
        var parser = document.createElement('a');
        parser.href = href;
        this.UrlParts = {
            OriginalRaw: href,
            Protocol: parser.protocol,
            HostAndPort: parser.host,
            Parameters: new URLSearchParams(window.location.search),
            FilePath: parser.pathname,
            Anchor: parser.hash,
            ScWindowType: ScWindowType.Unknown,
            HasError: false,
        };
    }
    BuildFullUrlFromParts() {
        let toReturn = {
            AbsUrl: '',
        };
        if (this.UrlParts) {
            if (this.UrlParts && !this.UrlParts.HasError) {
                toReturn.AbsUrl = this.UrlParts.Protocol + '//' + this.UrlParts.HostAndPort;
                if (this.UrlParts.FilePath.length > 0) {
                    toReturn.AbsUrl += this.UrlParts.FilePath;
                }
                if (this.UrlParts.Parameters) {
                    toReturn.AbsUrl += '?' + this.UrlParts.Parameters.toString();
                }
                if (this.UrlParts.Anchor.length > 0) {
                    toReturn.AbsUrl += '#' + this.UrlParts.Anchor;
                }
            }
        }
        else {
            this.Logger.ErrorAndThrow(this.BuildFullUrlFromParts.name, 'Null UrlParts');
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Agents/UrlAgent/ScUrlAgent.js
var ScUrlAgent_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class ScUrlAgent_ScUrlAgent extends GenericUrlAgent_GenericUrlAgent {
    constructor(logger) {
        super(logger);
    }
    __urlTestAgainstRegex(regexPattern, url) {
        return new RegExp(regexPattern).test(url);
    }
    InitScUrlAgent() {
        const _super = Object.create(null, {
            InitGenericUrlAgent: { get: () => super.InitGenericUrlAgent }
        });
        return ScUrlAgent_awaiter(this, void 0, void 0, function* () {
            yield _super.InitGenericUrlAgent.call(this);
        });
    }
    GetFullUrl() {
        return this.BuildFullUrlFromParts();
    }
    GetScWindowType() {
        this.Logger.FuncStart(this.GetScWindowType.name);
        var toReturn = ScWindowType.Unknown;
        let testPath = this.BuildFullUrlFromParts();
        if (testPath) {
            this.Logger.LogVal('current url', testPath.AbsUrl);
            if (testPath.AbsUrl.indexOf(SharedConst.Const.UrlSuffix.Login) > -1) {
                toReturn = ScWindowType.LoginPage;
            }
            else if (new RegExp(SharedConst.Const.Regex.ContentEditor).test(testPath.AbsUrl)) {
                toReturn = ScWindowType.ContentEditor;
            }
            else if (testPath.AbsUrl.toLowerCase().indexOf(SharedConst.Const.UrlSuffix.LaunchPad.toLowerCase()) > -1) {
                toReturn = ScWindowType.Launchpad;
            }
            else if (this.__urlTestAgainstRegex(SharedConst.Const.Regex.PageType.Desktop, testPath.AbsUrl)) {
                toReturn = ScWindowType.Desktop;
            }
            else if (this.__urlTestAgainstRegex(SharedConst.Const.Regex.PageType.Preview, testPath.AbsUrl)) {
                toReturn = ScWindowType.Preview;
            }
            else if (this.__urlTestAgainstRegex(SharedConst.Const.Regex.PageType.Edit, testPath.AbsUrl)) {
                toReturn = ScWindowType.Edit;
            }
            else if (this.__urlTestAgainstRegex(SharedConst.Const.Regex.PageType.Normal, testPath.AbsUrl)) {
                toReturn = ScWindowType.Normal;
            }
            else {
                toReturn = ScWindowType.Unknown;
            }
        }
        else {
            this.Logger.ErrorAndThrow(this.GetScWindowType.name, 'null url');
        }
        this.Logger.FuncEnd(this.GetScWindowType.name, ScWindowType[toReturn]);
        return toReturn;
    }
    BuildEditPrevNormUrl(newMode, contState) {
        this.UrlParts.Anchor = '';
        this.UrlParts.FilePath = '';
        this.UrlParts.ScWindowType = ScWindowType.Unknown;
        this.SetParameterValueByKey(QueryStrKey.sc_itemid, contState.ActiveCe.ActiveNode.NodeId.AsBracedGuid());
        this.SetParameterValueByKey(QueryStrKey.sc_mode, scMode[newMode]);
        this.SetParameterValueByKey(QueryStrKey.sc_lang, 'en');
        this.SetParameterValueByKey(QueryStrKey.sc_site, 'website');
    }
    SetScMode(newMode) {
        if (this.UrlParts && newMode) {
            if (this.UrlParts && this.UrlParts)
                this.SetParameterValueByKey(QueryStrKey.sc_mode, scMode[newMode]);
        }
    }
    SetFilePathFromWindowType(windowType = null) {
        if (!windowType) {
            windowType = ScWindowType.Unknown;
        }
        switch (windowType) {
            case ScWindowType.ContentEditor:
                this.SetFilePath(SharedConst.Const.UrlSuffix.CE);
                break;
            case ScWindowType.Desktop:
                this.SetFilePath(SharedConst.Const.UrlSuffix.Desktop);
                break;
            case ScWindowType.Edit:
                this.SetFilePath(SharedConst.Const.UrlSuffix.None);
                break;
            case ScWindowType.Preview:
                this.SetFilePath(SharedConst.Const.UrlSuffix.None);
                break;
            case ScWindowType.Normal:
                this.SetFilePath(SharedConst.Const.UrlSuffix.None);
                break;
            default:
                this.SetFilePath('');
                this.Logger.ErrorAndThrow(this.SetFilePathFromWindowType.name, 'unaccounted for window type');
                break;
        }
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Drones/RollingLogIdDrone/RollingLogIdDrone.js

class RollingLogIdDrone_RollingLogIdDrone {
    constructor(settingsAgent, loggerAgent) {
        this.maxKey = 5;
        this.minKey = 1;
        this.Logger = loggerAgent;
        this.Logger.InstantiateStart(RollingLogIdDrone_RollingLogIdDrone.name);
        this.SettingsAgent = settingsAgent;
        this.Logger.FuncEnd(RollingLogIdDrone_RollingLogIdDrone.name);
    }
    GetNextLogId() {
        let nextKeyInt = this.minKey;
        let nextKeyToReturn;
        var result = this.GetLastUsedLogId().ValueAsInt();
        nextKeyInt = result + 1;
        if (nextKeyInt > this.maxKey) {
            nextKeyInt = this.minKey;
        }
        this.SettingsAgent.SetByKey(_3xxx_SettingKey_SettingKey.LastUsedLogToStorageKey, nextKeyInt.toString());
        nextKeyToReturn = nextKeyInt.toString();
        return nextKeyToReturn;
    }
    GetLastUsedLogId() {
        var lastUsedLogIdSetting = this.SettingsAgent.GetByKey(_3xxx_SettingKey_SettingKey.LastUsedLogToStorageKey);
        return lastUsedLogIdSetting;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/2xxx-MenuCommand.js
var MenuCommand;
(function (MenuCommand) {
    MenuCommand[MenuCommand["Unknown"] = 0] = "Unknown";
    MenuCommand[MenuCommand["GoScModeEdit"] = 2001] = "GoScModeEdit";
    MenuCommand[MenuCommand["ToggleFavorite"] = 2002] = "ToggleFavorite";
    MenuCommand[MenuCommand["CloseWindow"] = 2003] = "CloseWindow";
    MenuCommand[MenuCommand["TakeSnapShot"] = 2004] = "TakeSnapShot";
    MenuCommand[MenuCommand["AddCeTab"] = 2005] = "AddCeTab";
    MenuCommand[MenuCommand["ScModeNormal"] = 2006] = "ScModeNormal";
    MenuCommand[MenuCommand["ScModePrev"] = 2007] = "ScModePrev";
    MenuCommand[MenuCommand["Cancel"] = 2008] = "Cancel";
    MenuCommand[MenuCommand["DrawStorage"] = 2009] = "DrawStorage";
    MenuCommand[MenuCommand["DrawStoragePopUpLogStorage"] = 2010] = "DrawStoragePopUpLogStorage";
    MenuCommand[MenuCommand["Remove"] = 2011] = "Remove";
    MenuCommand[MenuCommand["RestoreStateSameTab"] = 2012] = "RestoreStateSameTab";
    MenuCommand[MenuCommand["RestoreStateNewTab"] = 2013] = "RestoreStateNewTab";
    MenuCommand[MenuCommand["RestoreStateTBDTab"] = 2014] = "RestoreStateTBDTab";
    MenuCommand[MenuCommand["GoDesktop"] = 2015] = "GoDesktop";
    MenuCommand[MenuCommand["GoContentEditor"] = 2016] = "GoContentEditor";
    MenuCommand[MenuCommand["PutAdminB"] = 2017] = "PutAdminB";
    MenuCommand[MenuCommand["PresentationDetails"] = 2017] = "PresentationDetails";
    MenuCommand[MenuCommand["CompactCE"] = 2019] = "CompactCE";
    MenuCommand[MenuCommand["Ping"] = 2020] = "Ping";
    MenuCommand[MenuCommand["UpdateNickname"] = 2021] = "UpdateNickname";
    MenuCommand[MenuCommand["QuickPublish"] = 2022] = "QuickPublish";
})(MenuCommand || (MenuCommand = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/VisibilityType.js
var VisibilityType;
(function (VisibilityType) {
    VisibilityType[VisibilityType["Unknown"] = 0] = "Unknown";
    VisibilityType[VisibilityType["LoginPage"] = 1] = "LoginPage";
    VisibilityType[VisibilityType["Desktop"] = 2] = "Desktop";
    VisibilityType[VisibilityType["ContentEditor"] = 3] = "ContentEditor";
    VisibilityType[VisibilityType["Launchpad"] = 4] = "Launchpad";
    VisibilityType[VisibilityType["Edit"] = 5] = "Edit";
    VisibilityType[VisibilityType["Normal"] = 6] = "Normal";
    VisibilityType[VisibilityType["Preview"] = 7] = "Preview";
    VisibilityType[VisibilityType["SnapShotSelected"] = 8] = "SnapShotSelected";
    VisibilityType[VisibilityType["NotLogin"] = 9] = "NotLogin";
    VisibilityType[VisibilityType["CommandIsRunning"] = 10] = "CommandIsRunning";
    VisibilityType[VisibilityType["ActiveCeNode"] = 11] = "ActiveCeNode";
    VisibilityType[VisibilityType["SnapShotable"] = 12] = "SnapShotable";
})(VisibilityType || (VisibilityType = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Interfaces/CommandButtonEvents.js
var CommandButtonEvents;
(function (CommandButtonEvents) {
    CommandButtonEvents[CommandButtonEvents["OnSingleClick"] = 0] = "OnSingleClick";
    CommandButtonEvents[CommandButtonEvents["OnDoubleClick"] = 1] = "OnDoubleClick";
})(CommandButtonEvents || (CommandButtonEvents = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/AllCommands.js





class AllCommands_CommandManager {
    constructor(handlers) {
        this.Handlers = handlers;
        this.AllMenuCommands = AllCommands_CommandManager.BuildAllCommands(this.Handlers);
    }
    GetCommandById(needleCommand) {
        let toReturn = null;
        for (var idx = 0; idx < this.AllMenuCommands.length; idx++) {
            let candidate = this.AllMenuCommands[idx];
            if (candidate.Command === needleCommand) {
                toReturn = candidate;
                break;
            }
        }
        return toReturn;
    }
    static BuildAllCommands(handlers) {
        let toReturn = [
            {
                Command: MenuCommand.CloseWindow,
                ButtonSelector: PopConst.Const.Selector.Btn.WindowClose,
                VisibilityControllers: [],
                EventData: {
                    Handler: handlers.Internal.CloseWindow,
                    Event: CommandButtonEvents.OnSingleClick,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.AddCeTab,
                ButtonSelector: PopConst.Const.Selector.HS.BigRed,
                VisibilityControllers: [VisibilityType.Desktop],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.AddCETab,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.GoScModeEdit,
                ButtonSelector: PopConst.Const.Selector.HS.ModeEdit,
                VisibilityControllers: [VisibilityType.ActiveCeNode],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.Internal.SetScModeInternal,
                    ParameterData: [scMode.Edit],
                }
            },
            {
                Command: MenuCommand.ScModeNormal,
                ButtonSelector: PopConst.Const.Selector.HS.ModeNorm,
                VisibilityControllers: [VisibilityType.ActiveCeNode],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.Internal.SetScModeInternal,
                    ParameterData: [scMode.Normal],
                }
            },
            {
                Command: MenuCommand.ScModePrev,
                ButtonSelector: PopConst.Const.Selector.HS.ModePrev,
                VisibilityControllers: [VisibilityType.ActiveCeNode, VisibilityType.Edit],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.Internal.SetScModeInternal,
                    ParameterData: [scMode.Preview],
                }
            },
            {
                Command: MenuCommand.UpdateNickname,
                ButtonSelector: PopConst.Const.Selector.HS.UpdateNicknameB,
                VisibilityControllers: [VisibilityType.SnapShotSelected],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.HndlrSnapShotUpdateNickName,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.PresentationDetails,
                ButtonSelector: PopConst.Const.Selector.HS.PresentationDetails,
                VisibilityControllers: [VisibilityType.ActiveCeNode],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.HndlrPresentationDetails,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.CompactCE,
                ButtonSelector: PopConst.Const.Selector.HS.CompactCE,
                VisibilityControllers: [VisibilityType.ActiveCeNode],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.HndlrCompactCE,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.PutAdminB,
                ButtonSelector: PopConst.Const.Selector.HS.AdminB,
                VisibilityControllers: [VisibilityType.LoginPage],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.PutAdminB,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.GoContentEditor,
                ButtonSelector: PopConst.Const.Selector.HS.GoCE,
                VisibilityControllers: [VisibilityType.NotLogin],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.Internal.GoCeInternal,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.QuickPublish,
                ButtonSelector: PopConst.Const.Selector.HS.QuickPublish,
                VisibilityControllers: [VisibilityType.ActiveCeNode],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.QuickPublish,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.GoDesktop,
                ButtonSelector: PopConst.Const.Selector.HS.Desktop,
                VisibilityControllers: [VisibilityType.NotLogin],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.Internal.GoDesktopInternal,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.Ping,
                ButtonSelector: null,
                VisibilityControllers: [],
                EventData: {
                    Event: null,
                    Handler: handlers.External.HndlrPing,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.TakeSnapShot,
                ButtonSelector: PopConst.Const.Selector.HS.TakeSnapshot,
                VisibilityControllers: [VisibilityType.SnapShotable],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.HndlrSnapShotCreate,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.ToggleFavorite,
                ButtonSelector: PopConst.Const.Selector.HS.ToggleFavorite,
                VisibilityControllers: [VisibilityType.SnapShotSelected],
                EventData: {
                    Handler: handlers.External.ToggleFavorite,
                    Event: CommandButtonEvents.OnSingleClick,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.Cancel,
                ButtonSelector: PopConst.Const.Selector.HS.HsCancel,
                VisibilityControllers: [VisibilityType.CommandIsRunning],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.__hndlrCancelOperation,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.Remove,
                ButtonSelector: PopConst.Const.Selector.HS.HsRemoveFromStorage,
                VisibilityControllers: [VisibilityType.SnapShotSelected],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.HndlrSnapShotRemove,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.RestoreStateTBDTab,
                ButtonSelector: PopConst.Const.Selector.HS.SelStateSnapShot,
                VisibilityControllers: [VisibilityType.SnapShotSelected],
                EventData: {
                    Event: CommandButtonEvents.OnDoubleClick,
                    Handler: handlers.External.HndlrSnapShotRestoreTBDTab,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.RestoreStateSameTab,
                ButtonSelector: PopConst.Const.Selector.HS.HsRestoreWindowStateSameTab,
                VisibilityControllers: [VisibilityType.SnapShotSelected],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.HndlrSnapShotRestoreSameTab,
                    ParameterData: [],
                }
            },
            {
                Command: MenuCommand.RestoreStateNewTab,
                ButtonSelector: PopConst.Const.Selector.HS.HsRestoreWindowStateNewTab,
                VisibilityControllers: [VisibilityType.SnapShotSelected],
                EventData: {
                    Event: CommandButtonEvents.OnSingleClick,
                    Handler: handlers.External.HndlrSnapShotRestoreNewTab,
                    ParameterData: [],
                }
            },
        ];
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/EventManager.js
var EventManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class EventManager_EventManager {
    constructor(logger, settingsAgent, uiMan, handlers) {
        this.Logger = logger;
        this.SettingsAgent = settingsAgent;
        this.UiMan = uiMan;
        this.Handlers = handlers;
    }
    InitEventManager(allCommands, pingCommand) {
        return EventManager_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(this.InitEventManager.name);
            try {
                this.__wireAllMenuButtons(allCommands);
                this.WireUiToSettings();
                yield this.TriggerPingEvent(pingCommand);
            }
            catch (err) {
                throw (err);
            }
            this.Logger.FuncEnd(this.InitEventManager.name);
        });
    }
    TriggerPingEvent(pingCommand) {
        return new Promise((resolve, reject) => EventManager_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(this.TriggerPingEvent.name);
            let data = this.__buildCommandData(pingCommand);
            this.Logger.LogAsJsonPretty(this.TriggerPingEvent.name, pingCommand);
            yield this.RouteAllCommandEvents(data)
                .then(() => resolve())
                .catch((err) => reject(err));
            this.Logger.FuncEnd(this.TriggerPingEvent.name);
        }));
    }
    SetLabel(uiElem, oneSetting) {
        let uiLabel = window.document.querySelector(oneSetting.UiSelector.replace('id', 'for'));
        if (uiLabel) {
            uiLabel.innerHTML = oneSetting.Friendly;
        }
        else {
            uiElem.innerHTML = oneSetting.Friendly;
        }
    }
    WireUiToSettings() {
        this.Logger.FuncStart(this.WireUiToSettings.name);
        let genericSettings = this.SettingsAgent.GetAllSettings();
        for (var idx = 0; idx < genericSettings.length; idx++) {
            let oneSetting = genericSettings[idx];
            this.Logger.Log(oneSetting.Friendly + ' : ' + oneSetting.ValueAsObj);
            if (oneSetting.HasUi) {
                let uiElem = window.document.querySelector(oneSetting.UiSelector);
                if (uiElem) {
                    this.SetLabel(uiElem, oneSetting);
                    if (oneSetting.DataType === SettingType.BoolCheckBox) {
                        let self = this;
                        uiElem.addEventListener('change', (evt) => {
                            self.SettingsAgent.CheckBoxSettingChanged(oneSetting.SettingKey, evt.target.checked);
                        });
                    }
                    else if (oneSetting.DataType === SettingType.Accordion) {
                        this.UiMan.AccordianManager.AddAccordianDrone(oneSetting, uiElem);
                    }
                    else if (oneSetting.DataType == SettingType.Number) {
                        let self = this;
                        uiElem.addEventListener('change', (evt) => {
                            self.SettingsAgent.NumberSettingChanged(oneSetting.SettingKey, parseInt(evt.target.value));
                        });
                    }
                }
                else {
                    this.Logger.ErrorAndThrow(this.WireUiToSettings.name, 'ui generic element not found');
                }
            }
        }
        this.Logger.FuncEnd(this.WireUiToSettings.name);
    }
    __wireAllMenuButtons(allCommands) {
        this.Logger.FuncStart(this.__wireAllMenuButtons.name);
        for (var idx = 0; idx < allCommands.length; idx++) {
            let oneCommand = allCommands[idx];
            this.__wireOneMenuButtonListener(oneCommand);
        }
        this.Logger.FuncEnd(this.__wireAllMenuButtons.name);
    }
    __wireOneMenuButtonListener(oneCommand) {
        var targetElem = this.UiMan.GetButtonByIdOrSelector(oneCommand.ButtonSelector);
        if (oneCommand.EventData.Event === CommandButtonEvents.OnSingleClick) {
            this.__wireSingleClickEvent(oneCommand, targetElem);
        }
        else if (oneCommand.EventData.Event === CommandButtonEvents.OnDoubleClick) {
            this.__wireDoubleClickEvent(oneCommand, targetElem);
        }
    }
    __wireDoubleClickEvent(oneCommand, targetElem) {
        if (targetElem) {
            targetElem.ondblclick = (evt) => {
                let data = this.__buildCommandData(oneCommand);
                data.Evt = evt,
                    data.Self.RouteAllCommandEvents(data);
            };
        }
    }
    __wireSingleClickEvent(oneCommand, targetElem) {
        if (targetElem) {
            let self = this;
            targetElem.addEventListener('click', (evt) => {
                let data = this.__buildCommandData(oneCommand);
                data.Evt = evt;
                data.Self = self;
                data.Self.RouteAllCommandEvents(data);
            });
        }
        else {
            this.Logger.ErrorAndThrow(this.__wireSingleClickEvent.name, 'No Id: ' + oneCommand.ButtonSelector);
        }
    }
    __buildCommandData(oneCommand) {
        var self = this;
        let data = {
            Self: self,
            Command: oneCommand,
            Event: oneCommand.EventData,
            Evt: null,
            MenuState: {
                SelectSnapshotId: this.UiMan.ModuleSelectSnapShot.GetSelectSnapshotId(),
                CurrentNicknameValue: this.UiMan.GetValueInNickname()
            }
        };
        return data;
    }
    RouteAllCommandEvents(data) {
        return EventManager_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => EventManager_awaiter(this, void 0, void 0, function* () {
                this.Logger.FuncStart(this.RouteAllCommandEvents.name);
                yield data.Event.Handler(data)
                    .then(() => resolve())
                    .catch((err) => this.Logger.ErrorAndThrow(this.RouteAllCommandEvents.name, err));
                this.Logger.FuncEnd(this.RouteAllCommandEvents.name);
            }));
        });
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Interfaces/MsgFromXBase.js

class MsgFromXBase_MsgFromXBase {
    constructor(msgFlag) {
        this.MsgFlag = MsgFlag.Unknown;
        this.MsgFlag = msgFlag;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/PayloadDataReqPopUp.js
class PayloadDataFromPopUp {
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/MsgFromPopUp.js



class MsgFromPopUp_MsgFromPopUp extends MsgFromXBase_MsgFromXBase {
    constructor(msgFlag, scWindowType, selectSnapshotId, contentPrefs) {
        super(msgFlag);
        this.Data = new PayloadDataFromPopUp();
        this.Data.IdOfSelect = selectSnapshotId;
        this.Data.SnapShotSettings = {
            SnapShotNewNickname: '',
            Flavor: SnapShotFlavor.Unknown,
            CurrentPageType: scWindowType
        };
        this.CurrentContentPrefs = contentPrefs;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Helpers/Guid.js

let Guid_Guid = (() => {
    class Guid {
        static NewRandomGuid() {
            let guidData = new GuidData_GuidData();
            let newGuid = new Guid();
            let randomStr = newGuid.GetRandomGuidString();
            let toReturn = new GuidData_GuidData(randomStr);
            return toReturn;
        }
        static AsShort(guidData) {
            var toReturn = '{error}';
            toReturn = guidData.Raw.substr(0, Guid.ShortGuidLength);
            return toReturn;
        }
        static WithoutDashes(guiddata) {
            let withoutDashes = guiddata.Raw.replace(/-/g, '');
            return withoutDashes;
        }
        static ParseGuid(val, throwOnError) {
            let newGuid = new GuidData_GuidData();
            return new GuidData_GuidData(val);
        }
        MakeNewRandomGuid() {
            let randomStr = this.GetRandomGuidString();
            return new GuidData_GuidData(randomStr);
        }
        GetRandomGuidString() {
            var toReturn;
            var temp = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';
            toReturn = temp.replace(/[xy]/g, function (c) {
                var r = Math.random() * 16 | 0;
                var v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
            return toReturn;
        }
        MakeGuidFromString(val, throwOnError) {
            let toReturn = new GuidData_GuidData(val);
            return toReturn;
        }
    }
    Guid.ShortGuidLength = 4;
    return Guid;
})();


// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/HandlersExternal.js
var HandlersExternal_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class HandlersExternal_HandlersExternal {
    constructor(logger, msgManager, settingsAgent, tabMan) {
        this.AllCallbacksCommandComplete = [];
        this.Logger = logger;
        this.MessageManager = msgManager;
        this.SettingsAgent = settingsAgent;
        this.TabMan = tabMan;
    }
    __cleardebugText() {
        this.Logger.HndlrClearDebugText(this.Logger);
    }
    BuildNewMsgFromPopUp(msgFlag, data) {
        this.Logger.FuncStart(this.BuildNewMsgFromPopUp.name);
        let settingsToSend = this.SettingsAgent.GetSettingsByFlavor([SettingFlavor.ContentAndPopUpStoredInPopUp, SettingFlavor.ContentOnly]);
        var msg = new MsgFromPopUp_MsgFromPopUp(msgFlag, this.TabMan.GetWindowType(), data.MenuState.SelectSnapshotId, settingsToSend);
        this.Logger.FuncEnd(this.BuildNewMsgFromPopUp.name);
        return msg;
    }
    AddCallbackCommandComplete(callbackFunc) {
        this.AllCallbacksCommandComplete.push(callbackFunc);
    }
    SendContentCommand(msgPlayload) {
        return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(this.SendContentCommand.name);
            this.__cleardebugText();
            yield this.MessageManager.SendMessageToContent(msgPlayload)
                .then((contentState) => {
                if (this.AllCallbacksCommandComplete) {
                    for (var idx = 0; idx < this.AllCallbacksCommandComplete.length; idx++) {
                        let oneCallbackFunc = this.AllCallbacksCommandComplete[idx];
                        oneCallbackFunc(contentState);
                    }
                }
                resolve();
            })
                .catch((err) => reject(err));
            this.Logger.FuncEnd(this.SendContentCommand.name);
        }));
    }
    AddCETab(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
                let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqAddCETab, data);
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }));
        });
    }
    PutAdminB(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
                let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqAdminB, data);
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }));
        });
    }
    QuickPublish(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
                let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqQuickPublish, data);
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }));
        });
    }
    HndlrSnapShotCreate(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
                let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqTakeSnapShot, data);
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }));
        });
    }
    HndlrSnapShotRestoreTBDTab(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            data.Self.Handlers.External.Logger.FuncStart(data.Self.Handlers.External.HndlrSnapShotRestoreTBDTab.name);
            try {
                if (!data.Evt.ctrlKey) {
                    yield data.Self.Handlers.External.HndlrSnapShotRestoreSameTab(data);
                }
                else {
                    yield data.Self.Handlers.External.HndlrSnapShotRestoreNewTab(data);
                }
            }
            catch (err) {
                throw (err);
            }
            data.Self.Handlers.External.Logger.FuncEnd(data.Self.Handlers.External.HndlrSnapShotRestoreTBDTab.name);
        });
    }
    HndlrPing(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
                let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.Ping, data);
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }));
        });
    }
    HndlrSnapShotRestoreSameTab(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
                data.Self.Handlers.External.Logger.FuncStart(data.Self.Handlers.External.HndlrSnapShotRestoreSameTab.name);
                var msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqRestoreClick, data);
                msg.Data.IdOfSelect = data.MenuState.SelectSnapshotId;
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((ex) => reject(ex));
                data.Self.Handlers.External.Logger.FuncEnd(data.Self.Handlers.External.HndlrSnapShotRestoreSameTab.name);
            }));
        });
    }
    HndlrSnapShotRestoreNewTab(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            data.Self.Handlers.External.Logger.FuncStart(data.Self.Handlers.External.HndlrSnapShotRestoreNewTab.name);
            data.Self.Handlers.External.TabMan.SetQueryStringKeyValue(QueryStrKey.hsTargetSs, data.MenuState.SelectSnapshotId.Raw);
            let newUrl = data.Self.Handlers.External.TabMan.GetFullUrl();
            yield data.Self.Handlers.External.CreateNewWindow(data, newUrl)
                .catch((ex) => {
                data.Self.Handlers.External.Logger.ErrorAndThrow(data.Self.Handlers.External.HndlrSnapShotRestoreSameTab.name, ex.toString());
            });
            data.Self.Handlers.External.Logger.FuncEnd(this.HndlrSnapShotRestoreNewTab.name);
        });
    }
    HndlrSnapShotUpdateNickName(data) {
        return HandlersExternal_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
                let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqUpdateNickName, data);
                msg.Data.SnapShotSettings.SnapShotNewNickname = data.MenuState.CurrentNicknameValue;
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }));
        });
    }
    __hndlrCancelOperation(data) {
    }
    ToggleFavorite(data) {
        return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
            var msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqMarkFavorite, data);
            yield data.Self.Handlers.External.SendContentCommand(msg)
                .then(() => resolve())
                .catch((err) => reject(err));
        }));
    }
    HndlrSnapShotRemove(data) {
        return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
            let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqRemoveFromStorage, data);
            var result = confirm('Remove ?: ' + Guid_Guid.AsShort(msg.Data.IdOfSelect));
            if (result === true) {
                yield data.Self.Handlers.External.SendContentCommand(msg)
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }
            else {
                reject('Canceled');
            }
        }));
    }
    HndlrCompactCE(data) {
        return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
            let msg = data.Self.Handlers.External.BuildNewMsgFromPopUp(MsgFlag.ReqToggleCompactCss, data);
            msg.Data.SnapShotSettings.SnapShotNewNickname = data.MenuState.CurrentNicknameValue;
            yield data.Self.Handlers.External.SendContentCommand(msg)
                .then(() => resolve())
                .catch((err) => reject(err));
        }));
    }
    CreateNewWindow(data, tabUrl) {
        return new Promise((resolve, reject) => HandlersExternal_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(this.CreateNewWindow.name);
            yield this.TabMan.CreateNewTab(tabUrl)
                .then(() => resolve())
                .catch((err) => reject(err));
            this.Logger.FuncEnd(this.CreateNewWindow.name);
        }));
    }
    HndlrPresentationDetails(data) {
        this.Logger.ErrorAndThrow(this.HndlrPresentationDetails.name, 'to do');
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/HandlersInternal.js
var HandlersInternal_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

class HandlersInternal_HandlersInternal {
    constructor(logger, tabMan) {
        this.Logger = logger;
        this.TabMan = tabMan;
    }
    __cleardebugTextWithConfirm(evt) {
        this.Logger.HndlrClearDebugText(this.Logger, true);
    }
    GenericSettingChanged() {
    }
    CloseWindow(evt) {
        window.close();
    }
    GoCeInternal(evt) {
        return HandlersInternal_awaiter(this, void 0, void 0, function* () {
            this.TabMan.ChangeLocationSwitchBoard(ScWindowType.ContentEditor);
        });
    }
    GoDesktopInternal(evt) {
        this.TabMan.ChangeLocationSwitchBoard(ScWindowType.Desktop);
    }
    SetScModeInternal(data) {
        return HandlersInternal_awaiter(this, void 0, void 0, function* () {
            try {
            }
            catch (err) {
                throw (err);
            }
        });
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/Handlers.js


class Handlers_Handlers {
    constructor(logger, msgManager, settingsAgent, tabMan) {
        this.External = new HandlersExternal_HandlersExternal(logger, msgManager, settingsAgent, tabMan);
        this.Internal = new HandlersInternal_HandlersInternal(logger, tabMan);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/MessageManager.js
var MessageManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
class MessageManager {
    constructor(PopUpMessagesBroker, logger) {
        this.Logger = logger;
        this.MessageBroker = PopUpMessagesBroker;
    }
    SendMessageToContent(msgPayload) {
        return new Promise((resolve, reject) => MessageManager_awaiter(this, void 0, void 0, function* () {
            yield this.MessageBroker.SendMessageToContentTab(msgPayload)
                .then((result) => resolve(result))
                .catch((err) => reject(err));
        }));
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/PayloadDataFromContent.js
class PayloadDataFromContent {
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/MsgPayloadResponseFromContent.js



class MsgPayloadResponseFromContent_MsgFromContent extends MsgFromXBase_MsgFromXBase {
    constructor(msgFlag) {
        super(msgFlag);
        this.Data = new PayloadDataFromContent();
        this.ScWindowState = {
            SnapShotsMany: {
                CurrentSnapShots: [],
                FavoriteCount: 0,
                SnapShotsAutoCount: 0,
                PlainCount: 0,
                Birthday: new Date(1970),
            },
            DesktopState: null,
            LastReq: MsgFlag.Unknown,
            ErrorStack: [],
            LastReqSuccessful: false,
            ActiveCe: null
        };
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/DefaultScWindowState.js

class DefaultScWindowState_DefaultScWindowState {
    constructor() {
        this.DesktopState = null;
        this.SnapShotsMany = {
            CurrentSnapShots: [],
            FavoriteCount: 0,
            SnapShotsAutoCount: 0,
            PlainCount: 0,
            Birthday: new Date(1970),
        };
        this.LastReq = MsgFlag.Unknown;
        this.ErrorStack = [];
        this.LastReqSuccessful = false;
        this.ActiveCe = null;
    }
}
;

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/ScWindowStateValidator.js

class ScWindowStateValidator_ScWindowStateValidator {
    constructor(logger) {
        this.Logger = logger;
    }
    ValidateScWindowState(contentState) {
        this.Logger.FuncStart(this.ValidateScWindowState.name);
        var defaultVal = new DefaultScWindowState_DefaultScWindowState();
        if (!contentState) {
            contentState = defaultVal;
            this.Logger.ErrorAndContinue(this.ValidateScWindowState.name, 'Null contentState');
        }
        if (!contentState.SnapShotsMany) {
            contentState.SnapShotsMany = defaultVal.SnapShotsMany;
            this.Logger.ErrorAndContinue(this.ValidateScWindowState.name, 'Null SnapShotsMany');
        }
        if (!contentState.SnapShotsMany.CurrentSnapShots) {
            contentState.SnapShotsMany.CurrentSnapShots = defaultVal.SnapShotsMany.CurrentSnapShots;
            this.Logger.ErrorAndContinue(this.ValidateScWindowState.name, 'Null CurrentSnapShots');
        }
        if (!contentState.ErrorStack) {
            contentState.ErrorStack = defaultVal.ErrorStack;
        }
        if (!contentState.ActiveCe) {
            contentState.ActiveCe = defaultVal.ActiveCe;
        }
        this.Logger.FuncEnd(this.ValidateScWindowState.name);
        return contentState;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/PopUpMessagesBroker/PopUpMessagesBroker.js
var PopUpMessagesBroker_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class PopUpMessagesBroker_PopUpMessagesBroker {
    constructor(loggerAgent, msgFeedback) {
        this.Logger = loggerAgent;
        this.MsgFeedback = msgFeedback;
    }
    InitMessageBroker() {
    }
    ReceiveResponseHndlr(response) {
        return new Promise((resolve, reject) => {
            this.Logger.FuncStart(this.ReceiveResponseHndlr.name);
            if (response) {
                StaticHelpers_StaticHelpers.MsgFlagAsString(response.MsgFlag);
                if (response) {
                    this.MsgFeedback.UpdateMsgStatusStack('Response Received: ' + StaticHelpers_StaticHelpers.MsgFlagAsString(response.MsgFlag));
                    var asMsgFromContent = response;
                    if (asMsgFromContent) {
                        this.Logger.Log(StaticHelpers_StaticHelpers.MsgFlagAsString(asMsgFromContent.MsgFlag));
                        switch (response.MsgFlag) {
                            case MsgFlag.RespCurState:
                                break;
                            case MsgFlag.RespTaskSuccessful:
                                resolve(asMsgFromContent.ScWindowState);
                                break;
                            case MsgFlag.RespTaskFailed:
                                reject(StaticHelpers_StaticHelpers.MsgFlagAsString(asMsgFromContent.MsgFlag));
                                break;
                            default:
                                reject('Unrecognized MsgFlag' + StaticHelpers_StaticHelpers.MsgFlagAsString(response.MsgFlag));
                                break;
                        }
                    }
                    else {
                        reject(this.ReceiveResponseHndlr.name + ' response is not class: ' + MsgPayloadResponseFromContent_MsgFromContent.name);
                    }
                }
            }
            else {
                reject(this.ReceiveResponseHndlr.name + ' null or undefined response');
            }
            this.Logger.FuncEnd(this.ReceiveResponseHndlr.name);
        });
    }
    SendMessageToSingleTab(messageToSend) {
        return new Promise((resolve, reject) => PopUpMessagesBroker_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(this.SendMessageToSingleTab.name, StaticHelpers_StaticHelpers.MsgFlagAsString(messageToSend.MsgFlag));
            this.MsgFeedback.UpdateMsgStatusStack('Sending Msg: ' + StaticHelpers_StaticHelpers.MsgFlagAsString(messageToSend.MsgFlag));
            let targetTab;
            yield browser.tabs.query({ currentWindow: true, active: true })
                .then((result) => { targetTab = result[0]; })
                .catch((err) => reject(err));
            this.Logger.LogAsJsonPretty('targetTab', targetTab);
            this.Logger.LogVal('Tab Id', targetTab.id);
            yield browser.tabs.sendMessage(targetTab.id, messageToSend)
                .then((response) => this.ReceiveResponseHndlr(response))
                .then((scWindowState) => {
                let validator = new ScWindowStateValidator_ScWindowStateValidator(this.Logger);
                let validatedContentState = validator.ValidateScWindowState(scWindowState);
                resolve(validatedContentState);
            })
                .catch((ex) => { reject(ex); });
            this.Logger.FuncEnd(this.SendMessageToSingleTab.name, StaticHelpers_StaticHelpers.MsgFlagAsString(messageToSend.MsgFlag));
        }));
    }
    SendMessageToContentTab(msgPlayload) {
        return PopUpMessagesBroker_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PopUpMessagesBroker_awaiter(this, void 0, void 0, function* () {
                this.Logger.FuncStart(this.SendMessageToContentTab.name, StaticHelpers_StaticHelpers.MsgFlagAsString(msgPlayload.MsgFlag));
                yield this.SendMessageToSingleTab(msgPlayload)
                    .then((result) => {
                    this.Logger.MarkerD();
                    resolve(result);
                })
                    .catch((err) => reject(err));
                this.Logger.FuncEnd(this.SendMessageToContentTab.name, StaticHelpers_StaticHelpers.MsgFlagAsString(msgPlayload.MsgFlag));
            }));
        });
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Drones/IterationDrone/IterationDrone.js

class IterationDrone_IterationDrone {
    constructor(logger, nickname, maxIterations = null) {
        this.IsExhaustedMsg = 'Iteration helper exhausted';
        this.Logger = logger;
        if (!maxIterations) {
            maxIterations = SharedConst.Const.IterHelper.MaxCount.Default;
        }
        this.__maxIterations = maxIterations;
        this.__currentIteration = maxIterations;
        this.__timeout = SharedConst.Const.IterHelper.Timeouts.Default;
        this.__nickName = nickname;
        this.IsExhausted = false;
    }
    DecrementAndKeepGoing() {
        var toReturn = false;
        if (this.__currentIteration > 0) {
            this.__currentIteration -= 1;
            this.__timeout += this.__timeout * SharedConst.Const.IterHelper.GrowthPerIteration;
            if (this.__timeout > SharedConst.Const.IterHelper.Timeouts.Max) {
                this.__timeout = SharedConst.Const.IterHelper.Timeouts.Max;
            }
            this.Logger.Log('DecrementAndKeepGoing: ' + this.__nickName + ' ' + this.__currentIteration + ':' + this.__maxIterations + ' | timeout: ' + this.__timeout);
            toReturn = true;
        }
        else {
            this.IsExhausted = true;
            this.NotifyExhausted();
            toReturn = false;
        }
        return toReturn;
    }
    CurrentTimeout() {
        return this.__timeout;
    }
    NotifyExhausted() {
        this.Logger.Log('Iteration: ' + this.__nickName + ' counter exhausted ' + this.__currentIteration + ':' + this.__maxIterations);
    }
    WaitAndThen(timeoutFunction) {
        this.Logger.FuncStart(this.WaitAndThen.name, this.__nickName + ' ' + timeoutFunction.name);
        var self = this;
        setTimeout(timeoutFunction(), self.__timeout);
        this.Logger.FuncEnd(this.WaitAndThen.name, this.__nickName);
    }
    Wait() {
        if (!this.OperationCancelled) {
            return new Promise((resolve) => {
                setTimeout(resolve, this.__timeout);
            });
        }
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/TabManager.js
var TabManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class TabManager_TabManager {
    constructor(logger, scUrlAgent, recipeBasic) {
        this.Logger = logger;
        this.Logger.InstantiateStart(TabManager_TabManager.name);
        this.ScUrlAgent = scUrlAgent;
        this.RecipeBasics = recipeBasic;
        this.Logger.InstantiateEnd(TabManager_TabManager.name);
    }
    GetFullUrl() {
        return this.ScUrlAgent.BuildFullUrlFromParts();
    }
    SetQueryStringKeyValue(qsKey, qsValue) {
        this.ScUrlAgent.SetParameterValueByKey(qsKey, qsValue);
    }
    GetUrlParts() {
        return this.ScUrlAgent.GetUrlParts();
    }
    GetWindowType() {
        return this.ScUrlAgent.GetScWindowType();
    }
    InitTabManager() {
        return TabManager_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(TabManager_TabManager.name, this.InitTabManager.name);
            this.Logger.FuncEnd(TabManager_TabManager.name, this.InitTabManager.name);
        });
    }
    CreateNewTab(tabUrl) {
        return TabManager_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => TabManager_awaiter(this, void 0, void 0, function* () {
                this.Logger.FuncStart(this.CreateNewTab.name, tabUrl.AbsUrl);
                yield browser.tabs.create({ url: tabUrl.AbsUrl })
                    .then(() => resolve())
                    .catch((err) => reject(err));
            }));
        });
    }
    ChangeLocationSwitchBoard(desiredPageType) {
        this.Logger.FuncStart(this.ChangeLocationSwitchBoard.name, 'desired = ' + ScWindowType[desiredPageType]);
        var iteration = new IterationDrone_IterationDrone(this.Logger, this.ChangeLocationSwitchBoard.name);
        if (iteration.DecrementAndKeepGoing()) {
            var currentScWindowType = this.ScUrlAgent.GetScWindowType();
            if (currentScWindowType === ScWindowType.LoginPage) {
                var self = this;
            }
            else if (currentScWindowType === ScWindowType.Launchpad || currentScWindowType === ScWindowType.ContentEditor || currentScWindowType === ScWindowType.Desktop) {
                var self = this;
                this.ScUrlAgent.SetFilePathFromWindowType(desiredPageType);
                var absUrl = this.ScUrlAgent.BuildFullUrlFromParts();
                var callBackOnSuccessfulHrefChange = function () {
                    self.Logger.Log('Callback triggered');
                    self.ChangeLocationSwitchBoard(desiredPageType);
                };
                this.RecipeBasics.TabChainSetHrefWaitForComplete(absUrl)
                    .then(() => {
                    console.log('todo');
                })
                    .then(() => callBackOnSuccessfulHrefChange);
            }
        }
        this.Logger.FuncEnd(this.ChangeLocationSwitchBoard.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/UiFeedbackModules/UiFeedbackModuleBase/UiFeedbackModuleBase.js
class UiFeedbackModuleBase {
    constructor(selector, logger) {
        this.indentedLineBreak = '<br/>&nbsp;&nbsp;&nbsp;';
        this.lineBreak = '<br/>';
        this.__elementSelector = selector;
        this.Logger = logger;
    }
    __getFeedbackElem() {
        if (!this.__targetElement) {
            this.__targetElement = document.querySelector(this.__elementSelector);
            if (!this.__targetElement) {
                this.Logger.ErrorAndThrow(this.__getFeedbackElem.name, 'target not found: ' + this.__elementSelector);
            }
        }
        return this.__targetElement;
    }
    AddHtmlString(htmlText) {
        if (htmlText) {
            this.__getFeedbackElem().insertAdjacentHTML('beforeend', htmlText);
        }
        else {
            this.Logger.ErrorAndThrow(this.AddHtmlString.name, 'htmlText');
        }
    }
    WriteManyLines(strAr) {
        if (strAr) {
            for (var ldx = 0; ldx < strAr.length; ldx++) {
                this.WriteSingleLine(strAr[ldx]);
            }
        }
        else {
            this.Logger.ErrorAndThrow(this.WriteManyLines.name, 'No strAr');
        }
    }
    ClearFeedbackElem() {
        var elem = this.__getFeedbackElem();
        if (elem) {
            elem.innerHTML = '';
        }
        else {
            this.Logger.ErrorAndThrow(this.ClearFeedbackElem.name, 'No feedback elem found');
        }
    }
    ConvertIndents(input) {
        let toReturn = '';
        for (var idx = 0; idx < input.length; idx++) {
            let oneChar = input[idx];
            if (oneChar === ' ') {
                toReturn += '&nbsp;';
            }
            else {
                toReturn += input.substring(idx);
                break;
            }
        }
        return toReturn;
    }
    ConvertLineBreaks(input) {
        return input.replace(/\r?\n/g, "<br/>");
    }
    ConvertTabs(input) {
        return input.replace(/\t/g, "&nbsp;&nbsp;xxxxxx");
    }
    WriteSingleLine(text) {
        var ta = this.__getFeedbackElem();
        if (ta) {
            ta.innerHTML += this.ConvertIndents(this.ConvertTabs(this.ConvertLineBreaks(text)) + '<br/>');
        }
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/UiFeedbackModules/FeedbackModuleMessages/FeedbackModuleMessages.js

class FeedbackModuleMessages_FeedbackModuleMessages extends UiFeedbackModuleBase {
    constructor(selector, loggerAgent) {
        super(selector, loggerAgent);
    }
    Init() {
    }
    UpdateMsgStatusStack(textToShow) {
        this.AddHtmlString(textToShow + '</br>');
        this.Logger.Log('msg stat: ' + textToShow);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Drones/AccordianDrone/AccordianDrone.js

class AccordianDrone_AccordianDrone {
    constructor(loggerAgent, settingsAgent, uiElem, oneSetting) {
        this.Logger = loggerAgent;
        this.SettingsAgent = settingsAgent;
        this.AssociatedSetting = oneSetting;
        this.AssociatedElement = uiElem;
        this.Init();
    }
    Init() {
        this.AssociatedBodyElem = this.GetaccordionBodyElem(this.AssociatedElement);
        if (this.AssociatedBodyElem) {
            this.AddListener();
        }
        else {
            this.Logger.LogAsJsonPretty('this.AssociatedElement', this.AssociatedElement);
            this.Logger.ErrorAndThrow(this.RestoreAccordionState.name, 'Sibling not found ' + this.AssociatedSetting.Friendly);
        }
    }
    AddListener() {
        if (this.AssociatedElement) {
            let self = this;
            this.AssociatedElement.addEventListener('click', (evt) => {
                self.ToggleAccordion(evt);
            });
        }
    }
    RestoreAccordionState(oneSetting) {
        this.Logger.FuncStart(this.RestoreAccordionState.name, oneSetting.SettingKey);
        if (this.AssociatedBodyElem) {
            this.SetAccordionClass(this.AssociatedBodyElem, oneSetting.ValueAsBool());
        }
        this.Logger.FuncEnd(this.RestoreAccordionState.name);
    }
    ToggleAccordion(evt) {
        this.Logger.FuncStart(this.ToggleAccordion.name);
        if (this.AssociatedBodyElem && this.AssociatedSetting) {
            if (this.AssociatedSetting) {
                var newVal = !(this.AssociatedSetting.ValueAsBool());
                this.SetAccordionClass(this.AssociatedBodyElem, newVal);
                this.SettingsAgent.SetByKey(this.AssociatedSetting.SettingKey, newVal);
            }
        }
        else {
            this.Logger.ErrorAndThrow(this.ToggleAccordion.name, 'did not find sib');
        }
        this.Logger.FuncEnd(this.ToggleAccordion.name);
    }
    GetaccordionBodyElem(sib) {
        var toReturn;
        if (sib) {
            var siblings = sib.parentElement.getElementsByClassName('accordion-content');
            if (siblings) {
                var toReturn = siblings[0];
            }
            else {
                this.Logger.ErrorAndContinue(this.GetaccordionBodyElem.name, 'Sibling not found');
            }
        }
        return toReturn;
    }
    SetAccordionClass(targetElem, isCollapsed) {
        if (!isCollapsed) {
            targetElem.classList.remove(PopConst.Const.ClassNames.HS.Collapsed);
        }
        else {
            targetElem.classList.add(PopConst.Const.ClassNames.HS.Collapsed);
        }
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Agents/Drones/AccordianDrone/AccordianManager.js
var AccordianManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

class AccordianManager_AccordianManager {
    constructor(loggerAgent, settingsAgent) {
        this.AllAccordians = [];
        this.Logger = loggerAgent;
        this.SettingsAgent = settingsAgent;
    }
    RestoreAccordionState(oneSetting) {
        return AccordianManager_awaiter(this, void 0, void 0, function* () {
            if (oneSetting) {
                let foundAccordian = this.GetAccordianByKey(oneSetting);
                if (foundAccordian) {
                    foundAccordian.RestoreAccordionState(oneSetting);
                }
                else {
                    this.Logger.Log('No accordion found for ' + oneSetting.Friendly);
                }
            }
            else {
                this.Logger.Log('No setting provided ');
            }
        });
    }
    AddAccordianDrone(oneSetting, uiElem) {
        let newAccordianDrone = new AccordianDrone_AccordianDrone(this.Logger, this.SettingsAgent, uiElem, oneSetting);
        this.AllAccordians.push(newAccordianDrone);
    }
    GetAccordianByKey(oneSetting) {
        let toReturn = null;
        for (var idx = 0; idx < this.AllAccordians.length; idx++) {
            let candidate = this.AllAccordians[idx];
            if (candidate.AssociatedSetting.SettingKey === oneSetting.SettingKey) {
                toReturn = candidate;
                break;
            }
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/AutoBuild/BuildNum.js
const BuiltDateStamp = 1599544339462;


// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/ButtonVisibilityTests.js

class ButtonVisibilityTests_ButtonVisibilityTester {
    VisibilityTestWindowType(windowType, currentWindowType) {
        let toReturn = false;
        toReturn = windowType === currentWindowType;
        return toReturn;
    }
    VisibilityTestSnapShotSelected(currSelSnapshot) {
        let toReturn = false;
        if (currSelSnapshot && currSelSnapshot.AsBracedGuid() !== GuidData_GuidData.GetEmptyGuid().AsBracedGuid()) {
            toReturn = true;
        }
        return toReturn;
    }
    VisibilityTestSnapShotable(currentContentState) {
        return this.VisibilityTestActiveCeNode(currentContentState);
    }
    VisibilityTestActiveCeNode(currentContentState) {
        let toReturn = false;
        toReturn = currentContentState && currentContentState.ActiveCe && currentContentState.ActiveCe.ActiveNode !== null;
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiButtonStateManager.js



class UiButtonStateManager_UiButtonStateManager {
    constructor(logger) {
        this.Logger = logger;
        this.Logger.FuncStart(UiButtonStateManager_UiButtonStateManager.name);
        this.Logger.FuncEnd(UiButtonStateManager_UiButtonStateManager.name);
    }
    Init(AllMenuCommands) {
        this.Tester = new ButtonVisibilityTests_ButtonVisibilityTester();
    }
    TestAgainstAllSetControllers(command) {
        let toReturn = false;
        if (command.VisibilityControllers.length > 0) {
            for (var jdx = 0; jdx < command.VisibilityControllers.length; jdx++) {
                let oneControl = command.VisibilityControllers[jdx];
                switch (oneControl) {
                    case VisibilityType.Desktop:
                        toReturn = this.Tester.VisibilityTestWindowType(ScWindowType.Desktop, this.currentWindowType);
                        break;
                    case VisibilityType.ActiveCeNode:
                        toReturn = this.Tester.VisibilityTestActiveCeNode(this.currentContentState);
                        break;
                    case VisibilityType.ContentEditor:
                        toReturn = this.Tester.VisibilityTestWindowType(ScWindowType.ContentEditor, this.currentWindowType);
                        break;
                    case VisibilityType.Edit:
                        toReturn = this.Tester.VisibilityTestWindowType(ScWindowType.Edit, this.currentWindowType);
                        break;
                    case VisibilityType.Launchpad:
                        toReturn = this.Tester.VisibilityTestWindowType(ScWindowType.Launchpad, this.currentWindowType);
                        break;
                    case VisibilityType.LoginPage:
                        toReturn = this.Tester.VisibilityTestWindowType(ScWindowType.LoginPage, this.currentWindowType);
                        break;
                    case VisibilityType.Normal:
                        toReturn = this.Tester.VisibilityTestWindowType(ScWindowType.Normal, this.currentWindowType);
                        break;
                    case VisibilityType.Preview:
                        toReturn = this.Tester.VisibilityTestWindowType(ScWindowType.Preview, this.currentWindowType);
                        break;
                    case VisibilityType.SnapShotable:
                        toReturn = this.Tester.VisibilityTestSnapShotable(this.currentContentState);
                        break;
                    case VisibilityType.SnapShotSelected:
                        toReturn = this.Tester.VisibilityTestSnapShotSelected(this.currSelSnapshot);
                        break;
                    case VisibilityType.NotLogin:
                        toReturn = !this.Tester.VisibilityTestWindowType(ScWindowType.LoginPage, this.currentWindowType);
                        break;
                    case VisibilityType.CommandIsRunning:
                        toReturn = false;
                        break;
                    case VisibilityType.Unknown:
                        this.Logger.ErrorAndThrow(this.TestAgainstAllSetControllers.name, 'unknown visibility type');
                        break;
                    default:
                        this.Logger.ErrorAndThrow(this.TestAgainstAllSetControllers.name, 'unknown visibility type');
                        break;
                }
                if (toReturn) {
                    break;
                }
            }
        }
        else {
            toReturn = true;
        }
        return toReturn;
    }
    SetOneButtonVisibility(targetButton, passesOneTest) {
        if (targetButton) {
            if (passesOneTest) {
                targetButton.classList.remove('disabled');
                targetButton.removeAttribute('disabled');
            }
            else {
                targetButton.classList.add('disabled');
                targetButton.setAttribute('disabled', 'disabled');
            }
        }
        else {
            this.Logger.ErrorAndContinue(this.SetOneButtonVisibility.name, 'targetButton is NULL');
        }
    }
    RefreshUi(currentWindowType, currSelSnapshot, contentState, allMenuCommands) {
        this.Logger.FuncStart(this.RefreshUi.name, allMenuCommands.length);
        this.currentWindowType = currentWindowType;
        this.currSelSnapshot = currSelSnapshot;
        this.currentContentState = contentState;
        for (var idx = 0; idx < allMenuCommands.length; idx++) {
            var oneCommand = allMenuCommands[idx];
            if (oneCommand.ButtonSelector !== null) {
                let passesOneTest = false;
                var targetButton = document.querySelector(oneCommand.ButtonSelector);
                if (targetButton) {
                    passesOneTest = this.TestAgainstAllSetControllers(oneCommand);
                }
                else {
                    this.Logger.LogAsJsonPretty('oneCommand', oneCommand);
                    this.Logger.ErrorAndContinue(this.RefreshUi.name, 'target button not found: ' + oneCommand.ButtonSelector);
                }
                this.SetOneButtonVisibility(targetButton, passesOneTest);
            }
        }
        this.Logger.FuncEnd(this.RefreshUi.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/CancelButtonModule.js
class CancelButtonModule {
    constructor(selector, loggerAgent) {
        this.Logger = loggerAgent;
        this.Selector = selector;
    }
    Init() {
    }
    RefreshUi() {
    }
    __GetCancelButton() {
        return document.getElementById(this.Selector);
    }
    SetCancelFlag() {
        var btn = this.__GetCancelButton();
        if (btn) {
            btn.classList.add('red');
        }
    }
    ClearCancelFlag() {
        var btn = this.__GetCancelButton();
        if (btn) {
            btn.classList.remove('red');
        }
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/SelectSnapshotModule/SelectSnapshotModule.js








class SelectSnapshotModule_SelectSnapshotModule {
    constructor(selector, logger) {
        this.AllCallbacks = [];
        this.__selector = selector;
        this.Logger = logger;
    }
    Init() {
        this.AssignOnChangeEvent(PopConst.Const.Selector.HS.SelStateSnapShot);
    }
    AssignOnChangeEvent(selector) {
        this.Logger.FuncStart(this.AssignOnChangeEvent.name, selector);
        var targetElem = document.querySelector(selector);
        if (!targetElem) {
            this.Logger.ErrorAndThrow(this.AssignOnChangeEvent.name, 'No Id: ' + selector);
        }
        else {
            targetElem.onchange = (() => {
                let self = this;
                this.OnChangeEventHandler(self);
            });
        }
        this.Logger.FuncEnd(this.AssignOnChangeEvent.name, selector);
    }
    AddCallbackForSelChanged(callbackFunc) {
        this.AllCallbacks.push(callbackFunc);
    }
    OnChangeEventHandler(self) {
        for (var idx = 0; idx < self.AllCallbacks.length; idx++) {
            let oneCallback = self.AllCallbacks[idx];
            oneCallback();
        }
    }
    SetContentState(contentState) {
        this.ContentState = contentState;
    }
    RefreshUi() {
        this.PopulateStateOfSnapShotSelect();
    }
    __getSelectElem() {
        return window.document.querySelector(this.__selector);
    }
    SelectHeaderStr(prefix) {
        let toReturn = StaticHelpers_StaticHelpers.BufferString('', 4, BufferChar.Period, BufferDirection.right)
            + StaticHelpers_StaticHelpers.BufferString('Time Stamp', PopConst.Const.SnapShotFormat.lenTimestamp, BufferChar.Period, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString('Type', PopConst.Const.SnapShotFormat.lenPageType, BufferChar.Period, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString('Nickname', PopConst.Const.SnapShotFormat.lenNickname, BufferChar.Period, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString('Active Node.', PopConst.Const.SnapShotFormat.lenActiveNode, BufferChar.Period, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString('Fav.', PopConst.Const.SnapShotFormat.lenFavorite, BufferChar.Period, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString('Id', PopConst.Const.SnapShotFormat.lenShortId, BufferChar.Period, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString('#CE', PopConst.Const.SnapShotFormat.lenCeCount, BufferChar.Period, BufferDirection.right);
        return toReturn;
    }
    GetSelectSnapshotId() {
        let currentVal = this.__getSelectElem().value;
        let toReturn;
        if (currentVal) {
            toReturn = Guid_Guid.ParseGuid(currentVal, true);
        }
        else {
            toReturn = GuidData_GuidData.GetEmptyGuid();
        }
        return toReturn;
    }
    WriteHeaders() {
        var toReturn = {
            Auto: null,
            Favorite: null,
            AutoTitle: null,
            FavoriteTitle: null,
            Manual: null,
            ManualTitle: null
        };
        toReturn.Auto = window.document.createElement('optgroup');
        toReturn.Auto.label = this.SelectHeaderStr('');
        toReturn.Auto.id = PopConst.Const.ElemId.HS.SelectHeaderAuto;
        toReturn.AutoTitle = window.document.createElement('optgroup');
        toReturn.AutoTitle.label = 'Auto Snap Shots';
        toReturn.AutoTitle.id = PopConst.Const.ElemId.HS.SelectHeaderAutoTitle;
        toReturn.AutoTitle.classList.add('title');
        toReturn.Manual = window.document.createElement('optgroup');
        toReturn.Manual.label = this.SelectHeaderStr('');
        toReturn.Manual.id = PopConst.Const.ElemId.HS.SelectHeaderManual;
        toReturn.ManualTitle = window.document.createElement('optgroup');
        toReturn.ManualTitle.label = 'Manual Snap Shots';
        toReturn.ManualTitle.id = PopConst.Const.ElemId.HS.SelectHeaderManualTitle;
        toReturn.ManualTitle.classList.add('title');
        toReturn.Favorite = window.document.createElement('optgroup');
        toReturn.Favorite.label = this.SelectHeaderStr('');
        toReturn.Favorite.id = PopConst.Const.ElemId.HS.SelectHeaderFavorite;
        toReturn.FavoriteTitle = window.document.createElement('optgroup');
        toReturn.FavoriteTitle.label = 'Favorite Snap Shots';
        toReturn.FavoriteTitle.id = PopConst.Const.ElemId.HS.SelectHeaderFavoriteTitle;
        toReturn.FavoriteTitle.classList.add('title');
        return toReturn;
    }
    SelectChanged() {
        this.Logger.FuncStart(this.SelectChanged.name);
        this.Logger.FuncEnd(this.SelectChanged.name);
    }
    PopulateStateOfSnapShotSelect() {
        this.Logger.FuncStart(this.PopulateStateOfSnapShotSelect.name);
        let priorValue = this.GetSelectSnapshotId();
        if (this.ContentState.SnapShotsMany.CurrentSnapShots) {
            let snapShots = this.ContentState.SnapShotsMany.CurrentSnapShots;
            if (snapShots) {
                var targetSel = this.__getSelectElem();
                if (targetSel) {
                    this.CleanExistingSelection(targetSel);
                    var headers = this.WriteHeaders();
                    if (snapShots && snapShots.length > 0) {
                        this.Logger.Log('targetSel.options.length : ' + targetSel.options.length);
                        for (var idx = 0; idx < snapShots.length; idx++) {
                            this.Logger.Log('snapShots:' + idx + ":" + snapShots.length);
                            var data = snapShots[idx];
                            let el = this.BuildOne(data, priorValue, idx);
                            this.AppendToCorrectSnapshotGroup(data, el, headers);
                        }
                    }
                    targetSel.appendChild(headers.FavoriteTitle);
                    targetSel.appendChild(headers.Favorite);
                    targetSel.appendChild(headers.ManualTitle);
                    targetSel.appendChild(headers.Manual);
                    targetSel.appendChild(headers.AutoTitle);
                    targetSel.appendChild(headers.Auto);
                }
            }
        }
        this.Logger.FuncEnd(this.PopulateStateOfSnapShotSelect.name);
    }
    TimeNicknameFavStr(data) {
        var typeStr = '';
        if (data.WindowType === ScWindowType.ContentEditor) {
            typeStr = 'Cont Ed';
        }
        else if (data.WindowType === ScWindowType.Desktop) {
            typeStr = 'Desktop';
        }
        var activeCeNode = '';
        for (var idx = 0; idx < data.AllCEAr.length; idx++) {
            var candidateCe = data.AllCEAr[idx];
            for (var jdx = 0; jdx < candidateCe.AllTreeNodeAr.length; jdx++) {
                var candidateNode = candidateCe.AllTreeNodeAr[jdx];
                if (candidateNode.IsActive) {
                    var lvl2Node = '';
                    if (jdx >= 2) {
                        lvl2Node = candidateCe.AllTreeNodeAr[1].NodeFriendly + '/';
                    }
                    activeCeNode = lvl2Node + candidateNode.NodeFriendly;
                    break;
                }
            }
        }
        let toReturn = StaticHelpers_StaticHelpers.BufferString(data.TimeStampFriendly, PopConst.Const.SnapShotFormat.lenTimestamp, BufferChar.space, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString(typeStr, PopConst.Const.SnapShotFormat.lenPageType, BufferChar.Nbsp, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString(data.NickName, PopConst.Const.SnapShotFormat.lenNickname, BufferChar.Nbsp, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString(activeCeNode, PopConst.Const.SnapShotFormat.lenActiveNode, BufferChar.Nbsp, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString((data.Flavor === SnapShotFlavor.Favorite ? '*' : ''), PopConst.Const.SnapShotFormat.lenFavorite, BufferChar.Nbsp, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString(Guid_Guid.AsShort(data.GuidId), PopConst.Const.SnapShotFormat.lenShortId, BufferChar.Nbsp, BufferDirection.right)
            + PopConst.Const.SnapShotFormat.colSep + StaticHelpers_StaticHelpers.BufferString(data.AllCEAr.length.toString(), PopConst.Const.SnapShotFormat.lenCeCount, BufferChar.Nbsp, BufferDirection.right);
        return toReturn;
    }
    BuildOne(data, prior, idx) {
        let el = window.document.createElement('option');
        let timeNicknameFavStr = this.TimeNicknameFavStr(data);
        el.innerHTML = timeNicknameFavStr;
        if (data.Flavor === SnapShotFlavor.Favorite) {
            el.classList.add('favorite');
        }
        el.value = data.GuidId.Raw;
        if ((data.GuidId && prior && data.GuidId.Raw === prior.Raw) ||
            (idx === 0 && !prior)
            ||
                (idx === 0 && prior.Raw === GuidData_GuidData.GetEmptyGuid().Raw)) {
            this.Logger.Log('Setting to selected');
            el.selected = true;
        }
        return el;
    }
    AppendToCorrectSnapshotGroup(data, el, headers) {
        if (data.Flavor === SnapShotFlavor.Autosave) {
            headers.Auto.appendChild(el);
        }
        else if (data.Flavor === SnapShotFlavor.Favorite) {
            headers.Favorite.appendChild(el);
        }
        else {
            headers.Manual.appendChild(el);
        }
    }
    cleanOneGroup(targetSel, targetId) {
        var optGroup = targetSel.querySelector('[id=' + targetId + ']');
        if (optGroup) {
            optGroup.remove();
        }
    }
    CleanExistingSelection(targetSel) {
        this.cleanOneGroup(targetSel, PopConst.Const.ElemId.HS.SelectHeaderAuto);
        this.cleanOneGroup(targetSel, PopConst.Const.ElemId.HS.SelectHeaderAutoTitle);
        this.cleanOneGroup(targetSel, PopConst.Const.ElemId.HS.SelectHeaderFavorite);
        this.cleanOneGroup(targetSel, PopConst.Const.ElemId.HS.SelectHeaderFavoriteTitle);
        this.cleanOneGroup(targetSel, PopConst.Const.ElemId.HS.SelectHeaderManual);
        this.cleanOneGroup(targetSel, PopConst.Const.ElemId.HS.SelectHeaderManualTitle);
        targetSel.options.length = 0;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/SettingsModule/SettingsModule.js


class SettingsModule_SettingsModule {
    constructor(logger, settingsAgent, accordianManager) {
        this.Logger = logger;
        this.SettingsAgent = settingsAgent;
        this.AccordianManager = accordianManager;
    }
    Init() {
    }
    RefreshUi() {
        this.Logger.FuncStart(this.RefreshUi.name);
        this.refreshUiSettings();
        this.Logger.FuncEnd(this.RefreshUi.name);
    }
    refreshUiSettings() {
        this.Logger.FuncStart(this.refreshUiSettings.name);
        let allSettings = this.SettingsAgent.GetAllSettings();
        for (var idx = 0; idx < allSettings.length; idx++) {
            var oneSetting = allSettings[idx];
            this.Logger.LogVal('setting', StaticHelpers_StaticHelpers.SettingKeyAsString(oneSetting.SettingKey));
            if (oneSetting.UiSelector) {
                var foundElem = document.querySelector(oneSetting.UiSelector);
                if (foundElem) {
                    if (oneSetting.DataType === SettingType.BoolCheckBox) {
                        let valueToDisplay = oneSetting.ValueAsBool();
                        foundElem.checked = valueToDisplay;
                        this.Logger.LogVal('Setting to', valueToDisplay);
                    }
                    else if (oneSetting.DataType === SettingType.Accordion) {
                        this.AccordianManager.RestoreAccordionState(oneSetting);
                    }
                    else if (oneSetting.DataType == SettingType.Number) {
                        let valueToDisplay = oneSetting.ValueAsInt();
                        foundElem.value = valueToDisplay.toString();
                    }
                }
                else {
                    this.Logger.LogAsJsonPretty('oneSetting', oneSetting);
                    this.Logger.ErrorAndThrow(this.RefreshUi.name, 'ui element not found: ' + oneSetting.UiSelector);
                }
            }
        }
        this.Logger.FuncEnd(this.refreshUiSettings.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/UiFeedbackModules/FeedbackModuleBrowserState/FeedbackModuleBrowserState.js



class FeedbackModuleBrowserState_FeedbackModuleBrowserState extends UiFeedbackModuleBase {
    constructor(selector, loggerAgent) {
        super(selector, loggerAgent);
    }
    Init() {
    }
    RefreshUi() {
    }
    PopulateFeedackBrowserState(urlParts) {
        var targetCurrStateDiv = window.document.querySelector(PopConst.Const.Selector.HS.FeedbackBrowserState);
        var allStateText = 'Browser State' + this.lineBreak;
        allStateText += this.lineBreak + 'URL Parts';
        allStateText += this.indentedLineBreak + 'Page Type: ' + StaticHelpers_StaticHelpers.ScWindowTypeFriendly(urlParts.ScWindowType);
        allStateText += this.indentedLineBreak + 'Url Full (raw  ): ' + urlParts.OriginalRaw;
        allStateText += this.indentedLineBreak + 'Protocol: ' + urlParts.Protocol;
        allStateText += this.indentedLineBreak + 'Host & Port: ' + urlParts.HostAndPort;
        allStateText += this.indentedLineBreak + 'File Path: ' + urlParts.FilePath;
        targetCurrStateDiv.innerHTML = allStateText;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/UiFeedbackModules/FeedbackModuleContentState/FeedbackModuleContentState.js

class FeedbackModuleContentState_FeedbackModuleContentState extends UiFeedbackModuleBase {
    constructor(selector, loggerAgent) {
        super(selector, loggerAgent);
    }
    Init() {
    }
    RefreshUi() {
    }
    PopulateContentStateFeedack(dataScWindowState) {
        var allStateText = '';
        allStateText += JSON.stringify(dataScWindowState, null, 1);
        this.WriteSingleLine(allStateText);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/UiFeedbackModules/FeedbackModulePopUpState/FeedbackModulePopUpState.js


class FeedbackModulePopUpState_FeedbackModulePopUpState extends UiFeedbackModuleBase {
    constructor(selector, loggerAgent) {
        super(selector, loggerAgent);
    }
    Init() {
    }
    RefreshUi() {
    }
    PopulatePopUpStateUI(selectSnapShot) {
        var allStateText = 'Pop Up State:' + this.lineBreak;
        allStateText += 'Select Snapshot: ' + Guid_Guid.AsShort(selectSnapShot);
        this.AddHtmlString(allStateText);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/Modules/UiFeedbackModules/UiFeedbackModuleLog/UiFeedbackModuleLog.js

class UiFeedbackModuleLog_UiFeedbackModuleLog extends UiFeedbackModuleBase {
    WriteText(text) {
        this.WriteSingleLine(text);
    }
    constructor(selector, logger) {
        super(selector, logger);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager/UiManager.js
var UiManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};















class UiManager_UiManager {
    constructor(logger, settingsAgent, tabMan, commandMan) {
        this.MenuEnabled = true;
        this.MenuFocused = true;
        this.OtherFocused = false;
        this.ParentFocused = false;
        this.Logger = logger;
        this.SettingsAgent = settingsAgent;
        this.TabMan = tabMan;
        this.CommandMan = commandMan;
        this.Logger.InstantiateStart(UiManager_UiManager.name);
        this.ButtonStateManager = new UiButtonStateManager_UiButtonStateManager(this.Logger);
        this.AccordianManager = new AccordianManager_AccordianManager(this.Logger, this.SettingsAgent);
        this.FeedbackModuleMessages = new FeedbackModuleMessages_FeedbackModuleMessages(PopConst.Const.Selector.HS.DivOverlayModule, this.Logger);
        this.FeedbackModuleLog = new UiFeedbackModuleLog_UiFeedbackModuleLog(PopConst.Const.Selector.HS.FeedbackLogElement, this.Logger);
        this.Logger.AddWriter(this.FeedbackModuleLog);
        this.FeedbackModuleContentState = new FeedbackModuleContentState_FeedbackModuleContentState(PopConst.Const.Selector.HS.FeedbackContentState, this.Logger);
        this.FeedbackModuleBrowserState = new FeedbackModuleBrowserState_FeedbackModuleBrowserState(PopConst.Const.Selector.HS.FeedbackBrowserState, this.Logger);
        this.FeedbackModulePopUpState = new FeedbackModulePopUpState_FeedbackModulePopUpState(PopConst.Const.Selector.HS.FeedbackPopUpState, this.Logger);
        this.ModuleSelectSnapShot = new SelectSnapshotModule_SelectSnapshotModule(PopConst.Const.Selector.HS.SelStateSnapShot, this.Logger);
        this.SettingsModule = new SettingsModule_SettingsModule(this.Logger, this.SettingsAgent, this.AccordianManager);
        this.CancelButtonModule = new CancelButtonModule(PopConst.Const.Selector.HS.HsCancel, this.Logger);
        this.Logger.InstantiateEnd(UiManager_UiManager.name);
    }
    InitUiManager() {
        this.Logger.FuncStart(this.InitUiManager.name);
        var self = this;
        this.WriteBuildNumToUi();
        this.ModuleSelectSnapShot.Init();
        this.FeedbackModuleBrowserState.Init();
        this.FeedbackModuleContentState.Init();
        this.ScheduleAutoSaveSnapShot();
        this.ScheduleAutoLogin();
        this.ModuleSelectSnapShot.AddCallbackForSelChanged(() => {
            self.RefreshUi();
        });
        this.ButtonStateManager.Init(this.CommandMan.AllMenuCommands);
        this.Logger.FuncEnd(this.InitUiManager.name);
    }
    SetContentState(contentState) {
        this.LastKnownContentState = contentState;
    }
    SelectChanged() {
        this.ModuleSelectSnapShot.SelectChanged();
    }
    OnFailedCommand(err) {
        this.Logger.Log(err);
    }
    CallBackCommandComplete(contentState) {
        this.Logger.LogAsJsonPretty('contentState', contentState);
        this.SetContentState(contentState);
        this.RefreshUi();
    }
    ClosePopUp() {
        return new Promise((resolve, reject) => {
            this.Logger.FuncStart(this.ClosePopUp.name);
            try {
                this.FeedbackModuleMessages.UpdateMsgStatusStack('Command Completed Successfully');
                let setting = this.SettingsAgent.GetByKey(_3xxx_SettingKey_SettingKey.DebugKeepDialogOpen);
                if (!setting.ValueAsBool()) {
                    window.close();
                }
                else {
                    this.Logger.Log('Window not closed because of setting: ' + setting.Friendly);
                }
                resolve();
            }
            catch (ex) {
                console.log(ex.toString());
                reject(ex);
            }
            this.Logger.FuncEnd(this.ClosePopUp.name);
        });
    }
    AutoLogin() {
    }
    ScheduleAutoSaveSnapShot() {
    }
    ScheduleAutoLogin() {
    }
    WriteBuildNumToUi() {
        this.Logger.LogVal('BuiltDateStamp', BuiltDateStamp);
        var targetTag = document.querySelector(PopConst.Const.Selector.HS.BuildStamp);
        if (targetTag) {
            targetTag.innerText = 'build stamp: ' + StaticHelpers_StaticHelpers.MakeFriendlyDate(new Date(BuiltDateStamp));
        }
        else {
            this.Logger.ErrorAndThrow(this.WriteBuildNumToUi.name, 'No Build Stamp Element Found');
        }
    }
    SetUIStates(urlParts) {
        return UiManager_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(this.SetUIStates.name);
            if (this.Logger.IsNotNullOrUndefinedBool('state', this.LastKnownContentState)) {
                this.FeedbackModulePopUpState.PopulatePopUpStateUI(this.ModuleSelectSnapShot.GetSelectSnapshotId());
                this.FeedbackModuleContentState.PopulateContentStateFeedack(this.LastKnownContentState);
                this.FeedbackModuleBrowserState.PopulateFeedackBrowserState(urlParts);
            }
            this.Logger.FuncEnd(this.SetUIStates.name);
        });
    }
    RefreshUi() {
        return UiManager_awaiter(this, void 0, void 0, function* () {
            this.Logger.FuncStart(this.RefreshUi.name);
            yield this.SetUIStates(this.TabMan.GetUrlParts());
            this.FeedbackModuleBrowserState.RefreshUi();
            this.ModuleSelectSnapShot.SetContentState(this.LastKnownContentState);
            this.ModuleSelectSnapShot.RefreshUi();
            this.SettingsModule.RefreshUi();
            let currentWindowType = this.TabMan.GetWindowType();
            let currSelSnapshot = this.ModuleSelectSnapShot.GetSelectSnapshotId();
            this.ButtonStateManager.RefreshUi(currentWindowType, currSelSnapshot, this.LastKnownContentState, this.CommandMan.AllMenuCommands);
            this.__drawCorrectNicknameInUI(this.LastKnownContentState.SnapShotsMany.CurrentSnapShots);
            this.Logger.FuncEnd(this.RefreshUi.name);
        });
    }
    ShowDebugDataOneWindow() {
        this.Logger.FuncStart('ShowDebugDataOneWindow');
        var toReturn = [];
        for (var kdx = 0; kdx < toReturn.length; kdx++) {
            this.Logger.Log(toReturn[kdx]);
        }
        this.Logger.FuncEnd('ShowDebugDataOneWindow');
        return toReturn;
    }
    __drawCorrectNicknameInUI(snapShots) {
        this.Logger.FuncStart(this.__drawCorrectNicknameInUI.name);
        var targetId = this.ModuleSelectSnapShot.GetSelectSnapshotId();
        if (targetId) {
            this.Logger.Log('targetId : ' + targetId.Raw);
            var storageValues = snapShots;
            var storageMatch;
            for (var idx = 0; idx < storageValues.length; idx++) {
                var candidate = storageValues[idx];
                if (candidate.GuidId.Raw === this.ModuleSelectSnapShot.GetSelectSnapshotId().Raw) {
                    storageMatch = candidate;
                    break;
                }
            }
            if (storageMatch) {
                var inputElem = window.document.getElementById(PopConst.Const.ElemId.InputNickname);
                if (inputElem) {
                    inputElem.value = storageMatch.NickName;
                }
            }
        }
        this.Logger.FuncEnd(this.__drawCorrectNicknameInUI.name);
    }
    GetValueInNickname() {
        var toReturn = '';
        toReturn = window.document.getElementById(PopConst.Const.ElemId.InputNickname).value;
        return toReturn;
    }
    GetButtonByIdOrSelector(targetId) {
        var toReturn = document.querySelector(targetId);
        if (!toReturn) {
            toReturn = document.querySelector('[id=' + targetId + ']');
        }
        return toReturn;
    }
    AssignOnCheckedEvent(targetId, handler) {
        var targetElem = document.getElementById(targetId);
        if (!targetElem) {
            this.Logger.ErrorAndThrow(this.AssignOnClickEvent.name, 'No Id: ' + targetId);
        }
        else {
            targetElem.addEventListener('checked', (evt) => { handler(evt); });
        }
    }
    AssignOnClickEvent(targetId, handler) {
        var targetElem = this.GetButtonByIdOrSelector(targetId);
        if (!targetElem) {
            this.Logger.ErrorAndThrow(this.AssignOnClickEvent.name, 'No Id: ' + targetId);
        }
        else {
            targetElem.addEventListener('click', (evt) => { handler(evt); });
        }
    }
    AssignOnClickEventFromCmd(command, handler) {
        if (command && command.Command !== MenuCommand.Unknown) {
            this.AssignOnClickEvent(command.ButtonSelector, handler);
        }
    }
    AssignDblClickEvent(selector, handler) {
        var targetElem = document.querySelector(selector);
        if (!targetElem) {
            this.Logger.ErrorAndThrow(this.AssignOnClickEvent.name, 'No Id: ' + selector);
        }
        else {
            targetElem.ondblclick = (evt) => { handler(evt); };
        }
    }
    PopulateSnapShotsAuto() {
    }
    PopulateSnapShotsNotAuto() {
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/zPopUpEntryPoint.js
var zPopUpEntryPoint_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




















class zPopUpEntryPoint_PopUpEntry {
    main() {
        return zPopUpEntryPoint_awaiter(this, void 0, void 0, function* () {
            try {
                this.InstantiateAndInitSettingsAndLogger();
                this.InstantiateMembers();
                yield this.InitMembers()
                    .then(() => { })
                    .catch((err) => console.log(err));
                this.Logger.SectionMarker('Begin Standby');
            }
            catch (e) {
                console.log(e);
            }
        });
    }
    InstantiateAndInitSettingsAndLogger() {
        this.Logger = new LoggerAgent_LoggerAgent();
        this.RepoAgent = new RepositoryAgent(this.Logger);
        this.SettingsAgent = new SettingsAgent_SettingsAgent(this.Logger, this.RepoAgent);
        var allSettings = new ConstAllSettings_ConstAllSettings().AllSettings;
        this.SettingsAgent.InitSettingsAgent(allSettings);
        this.InitLogger();
    }
    InstantiateMembers() {
        return zPopUpEntryPoint_awaiter(this, void 0, void 0, function* () {
        });
    }
    InitLogger() {
        this.Logger.FuncStart(this.InitLogger.name);
        let enableLoggingSetting = this.SettingsAgent.GetByKey(_3xxx_SettingKey_SettingKey.EnableLogging);
        this.Logger.MarkerB();
        this.Logger.LogAsJsonPretty('enableLoggingSetting', enableLoggingSetting);
        this.Logger.MarkerC();
        if (SharedConst.Const.Debug.ForceLoggingEnabled || enableLoggingSetting.ValueAsBool()) {
            var RollingLogId = new RollingLogIdDrone_RollingLogIdDrone(this.SettingsAgent, this.Logger);
            var nextLogId = RollingLogId.GetNextLogId();
            let storageLogWriter = new LoggerStorageWriter();
            storageLogWriter.SetLogToStorageKey(nextLogId);
            let consoleLogger = new LoggerConsoleWriter();
            this.Logger.AddWriter(consoleLogger);
        }
        this.Logger.FlushBuffer();
        this.Logger.FuncEnd(this.InitLogger.name);
    }
    InitHub() {
        return zPopUpEntryPoint_awaiter(this, void 0, void 0, function* () {
            let scUrlAgent = new ScUrlAgent_ScUrlAgent(this.Logger);
            let tabMan = new TabManager_TabManager(this.Logger, scUrlAgent, null);
            let FeedbackModuleMsg = new FeedbackModuleMessages_FeedbackModuleMessages(PopConst.Const.Selector.HS.FeedbackMessages, this.Logger);
            let PopUpMessageBroker = new PopUpMessagesBroker_PopUpMessagesBroker(this.Logger, FeedbackModuleMsg);
            let messageMan = new MessageManager(PopUpMessageBroker, this.Logger);
            let handlers = new Handlers_Handlers(this.Logger, messageMan, this.SettingsAgent, tabMan);
            let commandMan = new AllCommands_CommandManager(handlers);
            let uiMan = new UiManager_UiManager(this.Logger, this.SettingsAgent, tabMan, commandMan);
            let eventMan = new EventManager_EventManager(this.Logger, this.SettingsAgent, uiMan, handlers);
            let self = uiMan;
            handlers.External.AddCallbackCommandComplete((contentState) => { uiMan.CallBackCommandComplete(contentState); });
            yield tabMan.InitTabManager()
                .then(() => PopUpMessageBroker.InitMessageBroker())
                .then(() => uiMan.InitUiManager())
                .then(() => scUrlAgent.InitScUrlAgent())
                .then(() => eventMan.InitEventManager(commandMan.AllMenuCommands, commandMan.GetCommandById(MenuCommand.Ping)))
                .catch((err) => {
                this.Logger.ErrorAndContinue('Pop Up Entry Point Main', JSON.stringify(err));
                throw (err);
            });
        });
    }
    InitMembers() {
        return zPopUpEntryPoint_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => zPopUpEntryPoint_awaiter(this, void 0, void 0, function* () {
                this.Logger.SectionMarker('Begin Init');
                this.InitHub();
                this.Logger.SectionMarker('End Init');
            }));
        });
    }
}
let popUpEntry = new zPopUpEntryPoint_PopUpEntry();
popUpEntry.main();


/***/ })
/******/ ]);