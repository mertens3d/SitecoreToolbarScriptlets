/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/PopUpManagerBase.js
class PopUpManagerBase {
    constructor(popHub) {
        this.PopHub = popHub;
    }
    UiMan() { return this.PopHub.UiMan; }
    debug() { return this.PopHub.debug; }
    Const() { return this.PopHub.PopUpConst; }
    MsgMan() { return this.PopHub.PopMsgMan; }
    PopAtticMan() { return this.PopHub.PopUpAtticMan; }
    Helpers() { return this.PopHub.Helpers; }
    SettingsMan() { return this.PopHub.SettingsMan; }
    EventMan() { return this.PopHub.EventMan; }
    locMan() { return this.PopHub.LocMan; }
    PageMan() { return this.PopHub.PageMan; }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/scWindowType.js
var scWindowType;
(function (scWindowType) {
    scWindowType[scWindowType["Unknown"] = 0] = "Unknown";
    scWindowType[scWindowType["LoginPage"] = 1] = "LoginPage";
    scWindowType[scWindowType["Desktop"] = 2] = "Desktop";
    scWindowType[scWindowType["ContentEditor"] = 3] = "ContentEditor";
    scWindowType[scWindowType["Launchpad"] = 4] = "Launchpad";
    scWindowType[scWindowType["Edit"] = 5] = "Edit";
    scWindowType[scWindowType["Normal"] = 6] = "Normal";
    scWindowType[scWindowType["Preview"] = 7] = "Preview";
})(scWindowType || (scWindowType = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/PayloadDataReqPopUp.js
class PayloadDataFromPopUp {
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/MessageFlag.js
var MsgFlag;
(function (MsgFlag) {
    MsgFlag[MsgFlag["Unknown"] = 0] = "Unknown";
    MsgFlag[MsgFlag["GetAllStorageOneWindow"] = 1] = "GetAllStorageOneWindow";
    MsgFlag[MsgFlag["NewWindowTest"] = 2] = "NewWindowTest";
    MsgFlag[MsgFlag["RemoveFromStorage"] = 3] = "RemoveFromStorage";
    MsgFlag[MsgFlag["ReqAddCETab"] = 4] = "ReqAddCETab";
    MsgFlag[MsgFlag["ReqAdminB"] = 5] = "ReqAdminB";
    MsgFlag[MsgFlag["ReqCurState"] = 6] = "ReqCurState";
    MsgFlag[MsgFlag["ReqGoDesktop"] = 7] = "ReqGoDesktop";
    MsgFlag[MsgFlag["ReqLoginWithAdminB"] = 8] = "ReqLoginWithAdminB";
    MsgFlag[MsgFlag["ReqOpenCE"] = 9] = "ReqOpenCE";
    MsgFlag[MsgFlag["ReqQuickPublish"] = 10] = "ReqQuickPublish";
    MsgFlag[MsgFlag["ReqRestoreClick"] = 11] = "ReqRestoreClick";
    MsgFlag[MsgFlag["ReqRestoreToNewTab"] = 12] = "ReqRestoreToNewTab";
    MsgFlag[MsgFlag["ReqSetScMode"] = 13] = "ReqSetScMode";
    MsgFlag[MsgFlag["ReqTakeSnapShot"] = 14] = "ReqTakeSnapShot";
    MsgFlag[MsgFlag["ReqUpdateNickName"] = 15] = "ReqUpdateNickName";
    MsgFlag[MsgFlag["RespCurState"] = 16] = "RespCurState";
    MsgFlag[MsgFlag["RespError"] = 17] = "RespError";
    MsgFlag[MsgFlag["RespTaskFailed"] = 18] = "RespTaskFailed";
    MsgFlag[MsgFlag["RespTaskSuccessful"] = 19] = "RespTaskSuccessful";
    MsgFlag[MsgFlag["RespTest"] = 20] = "RespTest";
    MsgFlag[MsgFlag["ReqMarkFavorite"] = 21] = "ReqMarkFavorite";
    MsgFlag[MsgFlag["Ping"] = 22] = "Ping";
    MsgFlag[MsgFlag["RespListeningAndReady"] = 23] = "RespListeningAndReady";
})(MsgFlag || (MsgFlag = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Interfaces/MsgFromXBase.js

class MsgFromXBase_MsgFromXBase {
    constructor(msgFlag) {
        this.MsgFlag = MsgFlag.Unknown;
        this.MsgFlag = msgFlag;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/SnapShotFlavor.js
var SnapShotFlavor;
(function (SnapShotFlavor) {
    SnapShotFlavor[SnapShotFlavor["Unknown"] = 0] = "Unknown";
    SnapShotFlavor[SnapShotFlavor["Autosave"] = 1] = "Autosave";
    SnapShotFlavor[SnapShotFlavor["Favorite"] = 2] = "Favorite";
    SnapShotFlavor[SnapShotFlavor["Manual"] = 3] = "Manual";
})(SnapShotFlavor || (SnapShotFlavor = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/MsgPayloadRequestFromPopUp.js



class MsgPayloadRequestFromPopUp_MsgFromPopUp extends MsgFromXBase_MsgFromXBase {
    constructor(msgFlag, popHub) {
        super(msgFlag);
        this.Data = new PayloadDataFromPopUp();
        this.Data.IdOfSelect = popHub.UiMan.GetIdOfSelectWindowSnapshot();
        this.Data.SnapShotSettings = {
            SnapShotNewNickname: '',
            Flavor: SnapShotFlavor.Unknown,
            CurrentPageType: popHub.PageMan.GetCurrentPageType()
        };
        popHub.debug.Log('constructor done msgfrompopup');
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/AutoBuild/BuildNum.js
const BuildDateStamp = 1581449341998;


// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/MenuCommand.js
var MenuCommand;
(function (MenuCommand) {
    MenuCommand[MenuCommand["Edit"] = 0] = "Edit";
    MenuCommand[MenuCommand["Unknown"] = 1] = "Unknown";
    MenuCommand[MenuCommand["MarkFavorite"] = 2] = "MarkFavorite";
    MenuCommand[MenuCommand["CloseWindow"] = 3] = "CloseWindow";
    MenuCommand[MenuCommand["TakeSnapShot"] = 4] = "TakeSnapShot";
})(MenuCommand || (MenuCommand = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/CacheMode.js
var CacheMode;
(function (CacheMode) {
    CacheMode[CacheMode["DoNotUseCach"] = 0] = "DoNotUseCach";
    CacheMode[CacheMode["OkToUseCache"] = 1] = "OkToUseCache";
})(CacheMode || (CacheMode = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/BufferDirection.js
var BufferDirection;
(function (BufferDirection) {
    BufferDirection[BufferDirection["left"] = 0] = "left";
    BufferDirection[BufferDirection["right"] = 1] = "right";
})(BufferDirection || (BufferDirection = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/BufferChar.js
var BufferChar;
(function (BufferChar) {
    BufferChar[BufferChar["space"] = 0] = "space";
    BufferChar[BufferChar["Nbsp"] = 1] = "Nbsp";
    BufferChar[BufferChar["Period"] = 2] = "Period";
    BufferChar[BufferChar["Zero"] = 3] = "Zero";
})(BufferChar || (BufferChar = {}));
var BufferUseNbsp;
(function (BufferUseNbsp) {
    BufferUseNbsp[BufferUseNbsp["space"] = 0] = "space";
    BufferUseNbsp[BufferUseNbsp["nbsp"] = 1] = "nbsp";
})(BufferUseNbsp || (BufferUseNbsp = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/StaticHelpers.js






class StaticHelpers_StaticHelpers {
    static FlavorAsString(flavor) {
        return 'Flavor.' + SnapShotFlavor[flavor] + '(' + flavor + ')';
    }
    static CacheModeAsString(cacheMode) {
        return 'CacheMode.' + CacheMode[cacheMode] + ' (' + cacheMode + ')';
    }
    static WindowTypeAsString(windowType) {
        return scWindowType[windowType];
    }
    static BufferString(str, desiredLength, buffCharEnum, direction) {
        var toReturn = str;
        var buffChar = ' ';
        if (buffCharEnum === BufferChar.space) {
            buffChar = ' ';
        }
        else if (buffCharEnum == BufferChar.Nbsp) {
            buffChar = '&nbsp;';
        }
        else if (buffCharEnum == BufferChar.Period) {
            buffChar = '.';
        }
        else if (buffCharEnum == BufferChar.Zero) {
            buffChar = '0';
        }
        if (toReturn.length > desiredLength) {
            if (desiredLength > 6) {
                toReturn = toReturn.substring(0, desiredLength - 3) + '...';
            }
            else {
                toReturn = toReturn.substring(0, desiredLength);
            }
        }
        if (toReturn.length < desiredLength) {
            var bufferCharNeeded = desiredLength - toReturn.length;
            for (var idx = 0; idx < bufferCharNeeded; idx++) {
                if (direction == BufferDirection.left) {
                    toReturn = buffChar + toReturn;
                }
                else {
                    toReturn = toReturn + buffChar;
                }
            }
        }
        return toReturn;
    }
    static MsgFlagAsString(msg) {
        var toReturn = "{error}";
        if (msg) {
            try {
                toReturn = MsgFlag[msg];
            }
            catch (e) {
            }
        }
        return 'flag: ' + toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/UiManager.js
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};








class UiManager_UiManager extends PopUpManagerBase {
    constructor(popHub) {
        super(popHub);
        this.ParentFocused = false;
        this.MenuFocused = true;
        this.OtherFocused = false;
        this.MenuEnabled = true;
        popHub.debug.FuncStart(UiManager_UiManager.name);
        popHub.debug.FuncEnd(UiManager_UiManager.name);
    }
    Init() {
        this.debug().FuncStart(this.Init.name, UiManager_UiManager.name);
        var self = this;
        this.debug().AddDebugTextChangedCallback(self, this.HndlrDebugTextChanged);
        this.WriteBuildNumToUi();
        this.MsgMan().SendMessageToContent(new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqCurState, this.PopHub));
        this.debug().FuncEnd(this.Init.name);
    }
    WriteBuildNumToUi() {
        this.debug().LogVal('BuildDateStamp', BuildDateStamp);
        var targetTag = document.querySelector(this.Const().Selector.HS.BuildStamp);
        if (targetTag) {
            targetTag.innerText = 'build: ' + this.Helpers().UtilityHelp.MakeFriendlyDate(new Date(BuildDateStamp));
        }
        else {
            this.debug().Error(this.WriteBuildNumToUi.name, 'No Build Stamp Element Found');
        }
    }
    __drawStoragePretty(ourData) {
        this.debug().FuncStart(this.__drawStoragePretty.name);
        this.ClearTextArea();
        for (var idx = 0; idx < ourData.length; idx++) {
            this.debug().Log('key: \t' + ourData[idx].key);
            var parsed = JSON.parse(ourData[idx].data);
            if (parsed) {
                this.DrawDebugDataPretty(parsed);
                this.debug().Log('------------');
            }
        }
        this.debug().FuncEnd(this.__drawStoragePretty.name);
    }
    DebugDataOneNode(dataOneTreeNode) {
        this.debug().FuncStart(this.DebugDataOneNode.name);
        var activeOrNot = dataOneTreeNode.IsActive ? '* ' : '  ';
        var expandedOrNot = dataOneTreeNode.IsExpanded ? '+ ' : '  ';
        var toReturn = activeOrNot + expandedOrNot + dataOneTreeNode.NodeId.AsString + ' ' + dataOneTreeNode.NodeFriendly;
        this.debug().FuncEnd(this.DebugDataOneNode.name);
        return toReturn;
    }
    GetDebugDataOneCE(dataOneCe) {
        this.debug().FuncStart('GetDebugDataOneCE');
        var toReturn = [];
        toReturn.push('------ All Tree Nodes -----');
        for (var idx = 0; idx < dataOneCe.AllTreeNodeAr.length; idx++) {
            this.debug().Log('idx: ' + idx);
            var oneVal = this.DebugDataOneNode(dataOneCe.AllTreeNodeAr[idx]);
            this.debug().Log('oneVal : ' + oneVal);
            toReturn.push(oneVal);
        }
        this.debug().FuncEnd(this.GetDebugDataOneCE.name);
        return toReturn;
    }
    __buildDebugDataPretty(dataOneWindow) {
        this.debug().FuncStart(this.__buildDebugDataPretty.name, 'data not null? ' + this.debug().IsNullOrUndefined(dataOneWindow));
        var toReturn = [];
        if (dataOneWindow) {
            toReturn.push('------ One Window Snap Shot Start -----');
            toReturn.push('Id: ' + dataOneWindow.Id);
            toReturn.push('TimeStamp: ' + dataOneWindow.TimeStamp);
            toReturn.push('CE Count: ' + dataOneWindow.AllCEAr.length);
            toReturn.push('Type: ' + scWindowType[dataOneWindow.WindowType]);
            toReturn.push('Nickname: ' + dataOneWindow.NickName);
            for (var jdx = 0; jdx < dataOneWindow.AllCEAr.length; jdx++) {
                toReturn.push('\t------ One CE Start -----');
                var dataOneCE = dataOneWindow.AllCEAr[jdx];
                toReturn.push('\tId: ' + dataOneCE.Id.AsString);
                var allCeDebugDataAr = this.GetDebugDataOneCE(dataOneCE);
                for (var kdx = 0; kdx < allCeDebugDataAr.length; kdx++) {
                    toReturn.push('\t\t' + allCeDebugDataAr[kdx]);
                }
                toReturn.push('\t------ One CE End -----');
            }
            toReturn.push('------ One Window Snap Shot End -----');
            this.debug().FuncEnd(this.__buildDebugDataPretty.name);
        }
        else {
            this.debug().Error(this.__buildDebugDataPretty.name, 'missing data');
        }
        return toReturn;
    }
    DrawDebugDataPretty(source) {
        this.debug().FuncStart(this.DrawDebugDataPretty.name, 'source not null: ' + this.debug().IsNullOrUndefined(source));
        var allDebugData = this.__buildDebugDataPretty(source);
        for (var ldx = 0; ldx < allDebugData.length; ldx++) {
            this.PopHub.FeedbackMan.WriteLine(allDebugData[ldx]);
        }
        this.debug().FuncEnd(this.DrawDebugDataPretty.name);
    }
    ClearTextArea() {
        var ta = this.__getTextArea();
        if (ta) {
            ta.value = '';
        }
        else {
            this.debug().Error(this.ClearTextArea.name, 'No text area found');
        }
    }
    __getTextArea() {
        return document.querySelector(this.Const().Selector.HS.TaDebug);
    }
    HndlrDebugTextChanged(caller, data) {
        var self = caller;
        var ta = self.__getTextArea();
        if (ta) {
            if (data.Append) {
                ta.value += data.NewText + '\n';
            }
            else {
                ta.value = data.NewText + '\n';
            }
            ta.scrollTop = ta.scrollHeight;
        }
    }
    SetParentInfo(winDataParent) {
        var targetSpan = document.getElementById(this.Const().ElemId.HindSiteParentInfo);
        if (targetSpan) {
            targetSpan.innerHTML = ' | Parent Id: ' + winDataParent.DataDocSelf.DocId.AsShort + ' | ' + winDataParent.Window.location.href;
        }
    }
    SetAccordianClass(targetElem, isCollapsed) {
        if (!isCollapsed) {
            targetElem.classList.remove(this.Const().ClassNames.HS.Collapsed);
        }
        else {
            targetElem.classList.add(this.Const().ClassNames.HS.Collapsed);
        }
    }
    GetAccordianContentElem(sib) {
        var toReturn;
        if (sib) {
            var siblings = sib.parentElement.getElementsByClassName('accordian-content');
            if (siblings) {
                var toReturn = siblings[0];
            }
        }
        return toReturn;
    }
    DrawStorageResponse(data) {
        this.debug().FuncStart('DrawStorage');
        try {
            if (data.State.SnapShotsMany.CurrentSnapShots) {
            }
        }
        catch (e) {
            this.debug().Error(this.DrawStorageResponse.name, e.message);
        }
        this.debug().FuncEnd('DrawStorage');
    }
    __drawStorageRaw(ourData) {
        this.debug().FuncStart('DrawStorageRaw');
        for (var idx = 0; idx < ourData.length; idx++) {
            this.debug().Log('key: \t' + ourData[idx].key);
            this.debug().Log('data: \t' + ourData[idx].data);
            this.debug().Log('------------');
        }
        this.debug().FuncEnd('DrawStorageRaw');
    }
    RestoreAccordianStates() {
        return __awaiter(this, void 0, void 0, function* () {
            var accordianSettings = (yield this.PopAtticMan().CurrentSettings()).Accordian;
            for (var idx = 0; idx < accordianSettings.length; idx++) {
                var candidate = accordianSettings[idx];
                var target = document.getElementById(candidate.ElemId);
                if (target) {
                    var contentSib = this.GetAccordianContentElem(target);
                    if (contentSib) {
                        this.SetAccordianClass(contentSib, candidate.isCollapsed);
                    }
                }
            }
        });
    }
    UpdateAtticFromUi() {
        return __awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.UpdateAtticFromUi.name);
            let currentSettings = yield this.PopAtticMan().CurrentSettings();
            let currentVal = document.querySelector(this.Const().Selector.HS.iCBoxdSettingsShowDebugData).checked;
            currentVal = true;
            this.debug().LogVal('currentVal', currentVal.toString());
            currentSettings.DebugSettings.ShowDebugData = currentVal;
            this.PopAtticMan().StoreSettings(currentSettings);
            this.RefreshUiFromCache();
            this.debug().FuncEnd(this.UpdateAtticFromUi.name);
        });
    }
    SelectChanged() {
        this.debug().FuncStart(this.SelectChanged.name);
        this.__selectSnapshotId = this.Helpers().GuidHelp.ParseGuid(this.__getSelectElem().value);
        this.RefreshUiFromCache();
        this.debug().FuncEnd(this.SelectChanged.name);
    }
    __GetCancelButton() {
        return document.getElementById(this.Const().ElemId.HS.Btn.HsCancel);
    }
    SetCancelFlag() {
        var btn = this.__GetCancelButton();
        if (btn) {
            btn.classList.add('red');
        }
    }
    ClearCancelFlag() {
        var btn = this.__GetCancelButton();
        if (btn) {
            btn.classList.remove('red');
        }
    }
    __refreshSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.__refreshSettings.name);
            let debugFieldSet = window.document.querySelector(this.Const().Selector.HS.IdFieldSetDebug);
            let currentSettings = yield this.PopAtticMan().CurrentSettings();
            if (currentSettings) {
                if (debugFieldSet) {
                    let newDisplay = currentSettings.DebugSettings.ShowDebugData ? '' : 'none';
                    debugFieldSet.style.display = newDisplay;
                }
                let checkBoxShowDebug = window.document.querySelector(this.Const().Selector.HS.iCBoxdSettingsShowDebugData);
                if (checkBoxShowDebug) {
                    this.debug().LogVal('before', checkBoxShowDebug.checked.toString());
                    checkBoxShowDebug.checked = currentSettings.DebugSettings.ShowDebugData;
                    this.debug().LogVal('after', checkBoxShowDebug.checked.toString());
                }
                else {
                    this.debug().Error(this.__refreshSettings.name, 'no checkbox found');
                }
            }
            else {
                this.debug().Error(this.__refreshSettings.name, 'no settings found');
            }
            this.debug().FuncEnd(this.__refreshSettings.name);
        });
    }
    RefreshUiFromCache() {
        return __awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.RefreshUiFromCache.name);
            this.__refreshSettings();
            this.RestoreAccordianStates();
            this.UiMan().PopulateContentState(this.MsgMan().CachedState);
            this.PopulateStateOfSnapShotSelect(this.MsgMan().CachedState.SnapShotsMany.CurrentSnapShots);
            this.RefreshButtonStates();
            this.__drawCorrectNicknameInUI(this.MsgMan().CachedState.SnapShotsMany.CurrentSnapShots);
            this.debug().FuncEnd(this.RefreshUiFromCache.name);
        });
    }
    RefreshButtonStates() {
        this.debug().FuncStart(this.RefreshButtonStates.name, this.EventMan().AllMenuCommands.length);
        for (var idx = 0; idx < this.EventMan().AllMenuCommands.length; idx++) {
            var command = this.EventMan().AllMenuCommands[idx];
            this.debug().LogVal('working on', MenuCommand[command.Command]);
            if (command.RequiredPageTypes.length > 0) {
                this.debug().LogVal('required pages', command.RequiredPageTypes.toString());
                var currentWindowType = this.PageMan().GetCurrentPageType();
                this.debug().LogVal('current', currentWindowType);
                this.debug().LogVal('current', StaticHelpers_StaticHelpers.WindowTypeAsString(currentWindowType));
                var targetButton = this.GetButtonByIdOrSelector(command.ButtonSelector);
                if (targetButton) {
                    var isMatch = command.RequiredPageTypes.indexOf(currentWindowType) >= 0;
                    this.debug().LogVal('isMatch', isMatch);
                    if (isMatch) {
                        targetButton.classList.remove('disabled');
                        targetButton.removeAttribute('disabled');
                    }
                    else {
                        targetButton.classList.add('disabled');
                        targetButton.setAttribute('disabled', 'disabled');
                    }
                }
                else {
                    this.debug().Error(this.RefreshButtonStates.name, 'target button not found');
                }
            }
            else {
                this.debug().Log('no required pages');
            }
        }
        this.debug().FuncEnd(this.RefreshButtonStates.name);
    }
    ShowDebugDataOneWindow() {
        this.debug().FuncStart('ShowDebugDataOneWindow');
        var toReturn = [];
        for (var kdx = 0; kdx < toReturn.length; kdx++) {
            this.debug().Log(toReturn[kdx]);
        }
        this.debug().FuncEnd('ShowDebugDataOneWindow');
        return toReturn;
    }
    __drawCorrectNicknameInUI(snapShots) {
        this.debug().FuncStart(this.__drawCorrectNicknameInUI.name);
        var targetId = this.UiMan().GetIdOfSelectWindowSnapshot();
        if (targetId) {
            this.debug().Log('targetId : ' + targetId.AsString);
            var storageValues = snapShots;
            var currentSelectId = this.GetIdOfSelectWindowSnapshot();
            var storageMatch;
            for (var idx = 0; idx < storageValues.length; idx++) {
                var candidate = storageValues[idx];
                if (candidate.Id.AsString === currentSelectId.AsString) {
                    storageMatch = candidate;
                    break;
                }
            }
            if (storageMatch) {
                var inputElem = window.document.getElementById(this.Const().ElemId.InputNickname);
                if (inputElem) {
                    inputElem.value = storageMatch.NickName;
                }
            }
        }
        this.debug().FuncEnd(this.__drawCorrectNicknameInUI.name);
    }
    GetValueInNickname() {
        var toReturn = '';
        toReturn = window.document.getElementById(this.Const().ElemId.InputNickname).value;
        return toReturn;
    }
    __getSelectElem() {
        return window.document.querySelector(this.Const().Selector.HS.SelStateSnapShot);
    }
    GetIdOfSelectWindowSnapshot() {
        this.debug().FuncStart(this.GetIdOfSelectWindowSnapshot.name);
        var targetSel = this.__getSelectElem();
        var toReturn = null;
        if (targetSel) {
            var selectedValue = targetSel.value;
            if (selectedValue) {
                toReturn = this.Helpers().GuidHelp.ParseGuid(selectedValue);
            }
        }
        if (!toReturn) {
            this.debug().Log('using empty guid');
            toReturn = this.Helpers().GuidHelp.EmptyGuid();
        }
        this.debug().DebugIGuid(toReturn);
        this.debug().FuncEnd(this.GetIdOfSelectWindowSnapshot.name, toReturn.AsString);
        return toReturn;
    }
    GetButtonByIdOrSelector(targetId) {
        var toReturn = document.querySelector(targetId);
        if (!toReturn) {
            toReturn = document.querySelector('[id=' + targetId + ']');
        }
        return toReturn;
    }
    AssignOnCheckedEvent(targetId, handler) {
        var targetElem = document.getElementById(targetId);
        if (!targetElem) {
            this.debug().Error(this.AssignOnClickEvent.name, 'No Id: ' + targetId);
        }
        else {
            targetElem.addEventListener('checked', (evt) => { handler(evt); });
        }
    }
    AssignOnClickEvent(targetId, handler) {
        var targetElem = this.GetButtonByIdOrSelector(targetId);
        if (!targetElem) {
            this.debug().Error(this.AssignOnClickEvent.name, 'No Id: ' + targetId);
        }
        else {
            targetElem.addEventListener('click', (evt) => { handler(evt); });
        }
    }
    AssignOnClickEventFromCmd(command, handler) {
        if (command && command.Command !== MenuCommand.Unknown) {
            this.AssignOnClickEvent(command.ButtonSelector, handler);
        }
    }
    AssignOnChangeEvent(selector, handler) {
        this.debug().FuncStart(this.AssignOnChangeEvent.name, selector);
        var targetElem = document.querySelector(selector);
        if (!targetElem) {
            this.debug().Error(this.AssignOnClickEvent.name, 'No Id: ' + selector);
        }
        else {
            targetElem.onchange = () => { handler; };
        }
        this.debug().FuncEnd(this.AssignOnChangeEvent.name, selector);
    }
    AssignDblClickEvent(selector, handler) {
        var targetElem = document.querySelector(selector);
        if (!targetElem) {
            this.debug().Error(this.AssignOnClickEvent.name, 'No Id: ' + selector);
        }
        else {
            targetElem.ondblclick = (evt) => { handler(evt); };
        }
    }
    PopulateContentState(state) {
        this.debug().FuncStart(this.PopulateContentState.name);
        this.currentState = state;
        if (this.debug().IsNotNullOrUndefinedBool('state', state)) {
            this.UiMan().PopulateStateOfSnapShotSelect(state.SnapShotsMany.CurrentSnapShots);
            var targetCurrStateTa = window.document.querySelector(this.Const().Selector.HS.TaState);
            if (targetCurrStateTa) {
                var allTaText = 'State as of: ' + this.Helpers().UtilityHelp.MakeFriendlyDate(new Date());
                allTaText += '\n';
                allTaText += 'Last Request: ' + MsgFlag[state.LastReq];
                allTaText += '\n';
                allTaText += '\nSnap Shots: ';
                allTaText += '\nBirthday: ' + state.SnapShotsMany.Birthday.toString();
                allTaText += '\nTotal Snapshots: ' + state.SnapShotsMany.CurrentSnapShots.length;
                allTaText += '\nFavorite Snapshots: ' + state.SnapShotsMany.FavoriteCount;
                allTaText += '\nPlain Snapshots: ' + state.SnapShotsMany.PlainCount;
                allTaText += '\nAuto Snapshots: ' + state.SnapShotsMany.SnapShotsAutoCount;
                allTaText += '\n';
                allTaText += 'Error Stack (' + state.ErrorStack.length + '):';
                for (var idx = 0; idx < state.ErrorStack.length; idx++) {
                    allTaText += '\n';
                    allTaText += '\t' + idx + ' : ' + state.ErrorStack[idx].ContainerFunc + ' ' + state.ErrorStack[idx].ErrorString;
                }
                targetCurrStateTa.value = allTaText;
            }
        }
        this.debug().FuncEnd(this.PopulateContentState.name);
    }
    PopulateSnapShotsAuto() {
    }
    PopulateSnapShotsNotAuto() {
    }
    CleanExistingSelection(targetSel) {
        var optGroup = targetSel.querySelector('[id=' + this.Const().ElemId.HS.SelectHeaderAutoTitle + ']');
        if (optGroup) {
            optGroup.remove();
        }
        optGroup = targetSel.querySelector('[id=' + this.Const().ElemId.HS.SelectHeaderAuto + ']');
        if (optGroup) {
            optGroup.remove();
        }
        optGroup = targetSel.querySelector('[id=' + this.Const().ElemId.HS.SelectHeaderFavorite + ']');
        if (optGroup) {
            optGroup.remove();
        }
        optGroup = targetSel.querySelector('[id=' + this.Const().ElemId.HS.SelectHeaderFavoriteTitle + ']');
        if (optGroup) {
            optGroup.remove();
        }
        targetSel.options.length = 0;
    }
    WriteHeaders(targetSel) {
        var toReturn = {
            Auto: null,
            Favorite: null,
            AutoTitle: null,
            FavoriteTitle: null,
        };
        toReturn.Auto = window.document.createElement('optgroup');
        toReturn.Auto.label = this.Helpers().UtilityHelp.SelectHeaderStr('');
        toReturn.Auto.id = this.Const().ElemId.HS.SelectHeaderAuto;
        toReturn.AutoTitle = window.document.createElement('optgroup');
        toReturn.AutoTitle.label = 'Auto Snap Shots';
        toReturn.AutoTitle.id = this.Const().ElemId.HS.SelectHeaderAutoTitle;
        toReturn.AutoTitle.classList.add('title');
        toReturn.Favorite = window.document.createElement('optgroup');
        toReturn.Favorite.label = this.Helpers().UtilityHelp.SelectHeaderStr('');
        toReturn.Favorite.id = this.Const().ElemId.HS.SelectHeaderFavorite;
        toReturn.FavoriteTitle = window.document.createElement('optgroup');
        toReturn.FavoriteTitle.label = 'Tyical Snap Shots';
        toReturn.FavoriteTitle.id = this.Const().ElemId.HS.SelectHeaderFavoriteTitle;
        toReturn.FavoriteTitle.classList.add('title');
        return toReturn;
    }
    PopulateStateOfSnapShotSelect(snapShots) {
        this.debug().FuncStart(this.PopulateStateOfSnapShotSelect.name);
        if (snapShots) {
            var targetSel = this.__getSelectElem();
            if (targetSel) {
                this.CleanExistingSelection(targetSel);
                var headers = this.WriteHeaders(targetSel);
                if (snapShots && snapShots.length > 0) {
                    this.debug().Log('targetSel.options.length : ' + targetSel.options.length);
                    for (var idx = 0; idx < snapShots.length; idx++) {
                        var data = snapShots[idx];
                        var el = window.document.createElement('option');
                        el.innerHTML = this.PopHub.Helpers.UtilityHelp.TimeNicknameFavStr(data);
                        if (data.Flavor === SnapShotFlavor.Favorite) {
                            el.classList.add('favorite');
                        }
                        el.value = data.Id.AsString;
                        if (data.Id === this.__selectSnapshotId) {
                            el.selected = true;
                        }
                        if (data.Flavor == SnapShotFlavor.Autosave) {
                            headers.Auto.appendChild(el);
                        }
                        else {
                            headers.Favorite.appendChild(el);
                        }
                    }
                }
                targetSel.appendChild(headers.FavoriteTitle);
                targetSel.appendChild(headers.Favorite);
                targetSel.appendChild(headers.AutoTitle);
                targetSel.appendChild(headers.Auto);
                if (!this.__selectSnapshotId || this.__selectSnapshotId === this.Helpers().GuidHelp.EmptyGuid()) {
                    targetSel.selectedIndex = 0;
                }
            }
        }
        this.debug().FuncEnd(this.PopulateStateOfSnapShotSelect.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/debug.js




class debug_BaseDebug {
    constructor(parentWindow) {
        this.Enabled = false;
        this.ErrorStack = [];
        this.__debugTextChangedCallbacks = [];
        this.debugPrefix = '\t\t';
        this.__indentCount = 0;
        this.ParentWindow = parentWindow;
    }
    DebugDataOneIframe(dataOneIframe) {
        this.FuncStart(this.DebugDataOneIframe.name);
        this.Log('dataOneIframe : ' + this.IsNullOrUndefined(dataOneIframe));
        if (dataOneIframe) {
            this.Log('dataOneIframe.Nickname : ' + dataOneIframe.Nickname);
            this.Log('dataOneIframe.IframeElem: \t' + this.IsNullOrUndefined(dataOneIframe.IframeElem));
            if (dataOneIframe.IframeElem) {
                this.Log('dataOneIframe.id: \t' + this.IsNullOrUndefined(dataOneIframe.IframeElem.id));
            }
            this.Log('dataOneIframe.ContentDoc: \t' + this.IsNullOrUndefined(dataOneIframe.ContentDoc));
            this.DebugIDataOneDoc(dataOneIframe.ContentDoc);
        }
        this.FuncEnd(this.DebugDataOneIframe.name);
    }
    DebugIDataBrowserWindow(browserWindow) {
        if (this.IsNotNullOrUndefinedBool('IDataBrowserWindow', browserWindow)) {
            this.LogVal('Friendly', browserWindow.Friendly);
            this.LogVal('WindowType', scWindowType[browserWindow.WindowType]);
            this.DebugIDataOneDoc(browserWindow.DataDocSelf);
            this.DebugWindow(browserWindow.Window);
        }
    }
    DebugWindow(window) {
        if (this.IsNotNullOrUndefinedBool('window', window)) {
        }
    }
    IsNotNullOrUndefinedBool(title, subject) {
        var toReturn = false;
        if (subject) {
            if ((typeof subject) == 'undefined') {
                this.LogVal(title + ' Is Not Undefined', '!!! false !!!');
            }
            else {
                this.LogVal(title + ' Is Not Null', 'true');
                toReturn = true;
            }
        }
        else {
            this.LogVal(title + ' Is Not Null', '!!! false !!!');
        }
        return toReturn;
    }
    DebugIGuid(id) {
        if (this.IsNotNullOrUndefinedBool('IGuid', id)) {
            this.LogVal('asShort', id.AsShort);
            this.LogVal('asString', id.AsString);
        }
    }
    DebugIDataOneDoc(dataOneDoc) {
        this.FuncStart(this.DebugIDataOneDoc.name);
        this.Log('');
        this.Log(this.debugPrefix + this.DebugIDataOneDoc.name);
        if (dataOneDoc) {
            this.Log(this.debugPrefix + 'dataOneDoc: \t' + this.IsNullOrUndefined(dataOneDoc));
            this.Log(this.debugPrefix + 'dataOneDoc.XyyzId.asShort: \t' + this.IsNullOrUndefined(dataOneDoc.DocId.AsShort));
            this.Log(this.debugPrefix + 'dataOneDoc.Document: \t' + this.IsNullOrUndefined(dataOneDoc.Document));
            if (dataOneDoc.Document) {
                this.LogVal(this.debugPrefix + 'dataOneDoc.Document.readyState:', dataOneDoc.Document.readyState);
                if (dataOneDoc.Document.location) {
                    this.LogVal(this.debugPrefix + 'targetDoc.location.href', dataOneDoc.Document.location.href);
                }
                else {
                    this.Log(this.debugPrefix + 'dataOneDoc.Document.location - does not exist');
                }
            }
            else {
                this.Log(this.debugPrefix + 'dataOneDoc.Document - does not exist');
            }
        }
        else {
            this.Error(this.DebugIDataOneDoc.name, 'no targetDoc');
        }
        this.Log('');
    }
    AddDebugTextChangedCallback(caller, callback) {
        this.__debugTextChangedCallbacks.push({
            Caller: caller,
            Func: callback
        });
    }
    HndlrClearDebugText(self, verify = false) {
        this.FuncStart(this.HndlrClearDebugText.name);
        var proceed = true;
        if (verify) {
            proceed = confirm('Clear Debug TextArea ?');
        }
        if (proceed) {
            var newText = '--- Debug Text Reset ---';
            self.__triggerAllDebugTextChangedCallbacks({
                NewText: newText,
                Append: false
            });
        }
        this.FuncEnd(this.HndlrClearDebugText.name);
    }
    MarkerA() {
        this.__markerRaw('A');
    }
    MarkerB() {
        this.__markerRaw('B');
    }
    MarkerC() {
        this.__markerRaw('C');
    }
    MarkerD() {
        this.__markerRaw('D');
    }
    MarkerE() { this.__markerRaw('E'); }
    MarkerF() { this.__markerRaw('F'); }
    __markerRaw(marker) {
        this.Log('Marker ' + marker);
    }
    LogVal(textValName, textVal) {
        if (!textVal) {
            textVal = '{notVal}';
        }
        else {
            var asGuid = textVal;
            if (asGuid.Type === 'IGuid') {
                textVal = asGuid.AsString;
            }
        }
        textVal = textVal.toString();
        textValName = StaticHelpers_StaticHelpers.BufferString(textValName.toString(), 32, BufferChar.space, BufferDirection.right);
        const debugPrefix = '  ~~~  ';
        this.Log(debugPrefix + textValName + ' : ' + textVal);
    }
    Log(text, optionalValue = '', hasPrefix = false) {
        if (this.Enabled) {
            var indent = '  ';
            for (var idx = 0; idx < this.__indentCount; idx++) {
                text = indent + text;
            }
            var prefixLength = 3;
            if (!hasPrefix) {
                for (var idx = 0; idx < prefixLength; idx++) {
                    text = ' ' + text;
                }
            }
            this.__triggerAllDebugTextChangedCallbacks({
                NewText: text,
                Append: true
            });
            console.log(text);
        }
    }
    __triggerAllDebugTextChangedCallbacks(data) {
        for (var idx = 0; idx < this.__debugTextChangedCallbacks.length; idx++) {
            var oneCallback = this.__debugTextChangedCallbacks[idx];
            oneCallback.Func(oneCallback.Caller, data);
        }
    }
    CtorName(ctorName) {
        this.Log('Constructor: ' + ctorName);
    }
    FuncStart(textOrFunc, optionalValue) {
        textOrFunc = 's) ' + textOrFunc;
        if (!optionalValue) {
            optionalValue = '';
        }
        else {
            optionalValue = optionalValue.toString();
        }
        if (optionalValue.length > 0) {
            textOrFunc = textOrFunc + ' : ' + optionalValue;
        }
        this.Log(textOrFunc, '', true);
        this.__indentCount++;
        if (this.__indentCount > 10) {
            this.__indentCount = 10;
        }
    }
    FuncEnd(text, optionalValueInput) {
        text = 'e) ' + text;
        if (!optionalValueInput) {
            optionalValueInput = '';
        }
        var optionalValue = optionalValueInput.toString();
        if (optionalValue.length > 0) {
            text = text + ' : ' + optionalValue;
        }
        this.__indentCount--;
        if (this.__indentCount < 0) {
            this.__indentCount = 0;
        }
        this.Log(text, optionalValue, true);
    }
    Error(container, text) {
        if (!container) {
            container = 'unknown';
        }
        if (!text) {
            text = 'unknown';
        }
        this.ErrorStack.push({
            ContainerFunc: container,
            ErrorString: text
        });
        this.Log('');
        this.Log('\t\t** ERROR ** ' + container);
        this.Log('');
        this.Log('\t\t  ' + text);
        this.Log('');
        this.Log('\t\t** ERROR ** ' + container);
        this.Log('');
    }
    NotNullCheck(title, value) {
        if (typeof value === 'undefined') {
            this.LogVal(title, 'Is Undefined');
        }
        else if (!value) {
            this.LogVal(title, 'Is Null');
        }
        else {
            this.LogVal(title, 'Is Not Null');
        }
    }
    IsNullOrUndefined(subject) {
        var toReturn = '{unknown}';
        if (subject) {
            if ((typeof subject) == 'undefined') {
                toReturn = 'Is Undefined';
            }
            else {
                toReturn = 'Not Null';
            }
        }
        else {
            toReturn = 'Is Null';
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/PopUpDebug.js

class PopUpDebug_PopUpDebug extends debug_BaseDebug {
    DebugPageMan(PageMan) {
        if (this.IsNotNullOrUndefinedBool('PageMan', PageMan)) {
            this.DebugIDataBrowserWindow(PageMan.TopLevelWindow());
        }
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/CommonEvents.js

class CommonEvents_CommonEvents extends PopUpManagerBase {
    constructor(hub) {
        super(hub);
    }
    __cleardebugText() {
        this.debug().HndlrClearDebugText(this.debug());
    }
    __initNewOperation() {
        this.__cleardebugText();
        this.UiMan().ClearCancelFlag();
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/ResultSuccessFail.js
class ResultSuccessFail {
    constructor() {
        this.Succeeded = false;
        this.FailMessage = '';
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/ExternalEvents.js
var ExternalEvents_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







class ExternalEvents_ExternalEvents extends CommonEvents_CommonEvents {
    __hndlrAddCETab() {
        return ExternalEvents_awaiter(this, void 0, void 0, function* () {
            this.__initNewOperation();
            this.MsgMan().SendMessageToContent(new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqAddCETab, this.PopHub));
        });
    }
    __hndlrCancelOperation(evt) {
        this.UiMan().SetCancelFlag();
    }
    MarkFavorite(evt) {
        this.MsgMan().SendMessageToContent(new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqMarkFavorite, this.PopHub));
    }
    __DrawStorage(evt) {
        this.MsgMan().FromAtticDrawStorage();
    }
    __hndlrDesktop(evt) {
        this.__initNewOperation();
        this.locMan().ChangeLocationSwitchBoard(scWindowType.Desktop, this.PageMan().TopLevelWindow());
    }
    HndlrAdminB() {
        this.__initNewOperation();
        this.MsgMan().SendMessageToContent(new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqAdminB, this.PopHub));
    }
    __hndlrSetScMode(newMode, evt) {
        return ExternalEvents_awaiter(this, void 0, void 0, function* () {
            this.__initNewOperation();
            var payload = new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqSetScMode, this.PopHub);
            payload.Data = new PayloadDataFromPopUp();
            payload.Data.ReqScMode = newMode;
            payload.Data.UseOriginalWindowLocation = evt.ctrlKey;
            this.locMan().SetScMode(payload.Data.ReqScMode, payload.Data.UseOriginalWindowLocation);
        });
    }
    __hndlrOpenCE() {
        return ExternalEvents_awaiter(this, void 0, void 0, function* () {
            this.__initNewOperation();
            this.locMan().ChangeLocationSwitchBoard(scWindowType.ContentEditor, this.PageMan().TopLevelWindow());
        });
    }
    __hndlrQuickPublish(evt) {
        return ExternalEvents_awaiter(this, void 0, void 0, function* () {
            this.__initNewOperation();
            this.MsgMan().SendMessageToContent(new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqQuickPublish, this.PopHub));
        });
    }
    HndlrSnapShotRemove(evt) {
        this.__initNewOperation();
        var msg = new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.RemoveFromStorage, this.PopHub);
        this.MsgMan().SendMessageToContent(msg);
    }
    CreateNewWindowIfRequired(evt) {
        return new Promise((resolve, reject) => ExternalEvents_awaiter(this, void 0, void 0, function* () {
            let success = new ResultSuccessFail();
            this.debug().FuncStart(this.CreateNewWindowIfRequired.name, 'ctrl key? ' + evt.ctrlKey.toString());
            if (!evt.ctrlKey) {
                yield browser.tabs.create({})
                    .then((tab) => {
                    console.log(tab.status);
                    while (tab.status !== 'complete') {
                        console.log(tab.status);
                    }
                    console.log(tab.status);
                    success.Succeeded = true;
                    console.log('+++++++++++++++++++++++++ tab');
                    console.log(tab.url);
                })
                    .then(() => ExternalEvents_awaiter(this, void 0, void 0, function* () {
                    yield this.MsgMan().WaitForListeningTab();
                }))
                    .catch((ex) => {
                    console.log('fails here');
                    success.Succeeded = false;
                    success.FailMessage = this.CreateNewWindowIfRequired.name + ' ' + ex.toString();
                });
            }
            else {
                success.Succeeded = true;
            }
            this.debug().FuncEnd(this.CreateNewWindowIfRequired.name);
            console.log('Success' + success.Succeeded);
            this.debug().LogVal('Success', success.Succeeded);
            if (success.Succeeded) {
                resolve();
            }
            else {
                reject(success.FailMessage);
            }
        }));
    }
    HndlrSnapShotRestore(evt) {
        return ExternalEvents_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.HndlrSnapShotRestore.name);
            this.__initNewOperation();
            yield this.CreateNewWindowIfRequired(evt)
                .then(() => {
                this.debug().Log('completed successfully hdnlr');
                var payload = new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqRestoreClick, this.PopHub);
                payload.Data.IdOfSelect = this.UiMan().GetIdOfSelectWindowSnapshot();
                this.MsgMan().SendMessageToContent(payload);
            })
                .catch((ex) => {
                this.debug().Error(this.HndlrSnapShotRestore.name, ex.toString());
            });
            this.debug().FuncEnd(this.HndlrSnapShotRestore.name);
        });
    }
    HndlrSnapShotUpdateNickName() {
        this.__initNewOperation();
        var self = this.PopAtticMan;
        var payload = new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqUpdateNickName, this.PopHub);
        payload.Data.IdOfSelect = this.UiMan().GetIdOfSelectWindowSnapshot();
        payload.Data.SnapShotSettings.SnapShotNewNickname = this.UiMan().GetValueInNickname();
        ;
        this.MsgMan().SendMessageToContent(payload);
    }
    __hndlrSnapShotCreate(evt) {
        return ExternalEvents_awaiter(this, void 0, void 0, function* () {
            this.__initNewOperation();
            var msg = new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.ReqTakeSnapShot, this.PopHub);
            msg.Data.SnapShotSettings.Flavor = SnapShotFlavor.Manual;
            yield this.MsgMan().SendMessageToContent(msg);
        });
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/InternalEvents.js

class InternalEvents_InternalEvents extends CommonEvents_CommonEvents {
    HndlrSelectChange(evt) {
        this.PopHub.UiMan.SelectChanged();
    }
    __showDebugButtonClicked(evt) {
        this.__initNewOperation();
        this.debug().FuncStart(this.__showDebugButtonClicked.name);
        this.debug().FuncEnd(this.__showDebugButtonClicked.name);
    }
    __cleardebugTextWithConfirm() {
        this.debug().HndlrClearDebugText(this.debug(), true);
    }
    CloseWindow(evt) {
        window.close();
    }
    __toggleAccordian(evt) {
        this.debug().FuncStart(this.__toggleAccordian.name);
        var srcElem = (evt.target || evt.srcElement);
        var foundContentSib = this.UiMan().GetAccordianContentElem(srcElem);
        if (foundContentSib) {
            var isCollapsed = foundContentSib.classList.contains(this.Const().ClassNames.HS.Collapsed);
            var newVal = !isCollapsed;
            this.UiMan().SetAccordianClass(foundContentSib, newVal);
            this.PopAtticMan().UpdateAccodianState(srcElem.getAttribute('id'), newVal);
        }
        else {
            this.debug().Error(this.__toggleAccordian.name, 'did not find sib');
        }
        this.debug().FuncEnd(this.__toggleAccordian.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/EventManager.js





class EventManager_EventManager extends PopUpManagerBase {
    constructor(popHub) {
        super(popHub);
        this.ExternalCall = new ExternalEvents_ExternalEvents(popHub);
        this.InternalCall = new InternalEvents_InternalEvents(popHub);
    }
    Init() {
        this.BuildAllCommands();
        this.__wireMenuButtons();
    }
    BuildAllCommands() {
        this.debug().FuncStart(this.BuildAllCommands.name);
        this.AllMenuCommands = [
            {
                Command: MenuCommand.CloseWindow,
                ButtonSelector: this.Const().Selector.Btn.WindowClose,
                RequiredPageTypes: []
            },
            {
                Command: MenuCommand.Edit,
                ButtonSelector: this.Const().ElemId.HS.Btn.ModeEdit,
                RequiredPageTypes: [scWindowType.ContentEditor, scWindowType.Desktop, scWindowType.Normal, scWindowType.Preview]
            },
            {
                Command: MenuCommand.MarkFavorite,
                ButtonSelector: this.Const().ElemId.HS.Btn.MarkFavorite,
                RequiredPageTypes: []
            },
            {
                Command: MenuCommand.TakeSnapShot,
                ButtonSelector: this.Const().ElemId.HS.Btn.HsSaveWindowState,
                RequiredPageTypes: [scWindowType.ContentEditor, scWindowType.Desktop]
            },
        ];
        this.debug().FuncEnd(this.BuildAllCommands.name);
    }
    __wireMenuButtons() {
        this.debug().FuncStart(this.__wireMenuButtons.name);
        this.UiMan().AssignDblClickEvent(this.Const().Selector.HS.SelStateSnapShot, (evt) => { this.ExternalCall.HndlrSnapShotRestore(evt); });
        this.UiMan().AssignDblClickEvent(this.Const().Selector.HS.TaDebug, () => { this.InternalCall.__cleardebugTextWithConfirm(); });
        this.UiMan().AssignOnChangeEvent(this.Const().Selector.HS.SelStateSnapShot, (evt) => { this.InternalCall.HndlrSelectChange(evt); });
        this.UiMan().AssignOnClickEventFromCmd(this.GetCommandByKey(MenuCommand.CloseWindow), (evt) => this.InternalCall.CloseWindow(evt));
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.AdminB, () => { this.ExternalCall.HndlrAdminB(); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.CE, () => { this.ExternalCall.__hndlrOpenCE(); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.Desktop, (evt) => { this.ExternalCall.__hndlrDesktop(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.ModeNorm, (evt) => this.ExternalCall.__hndlrSetScMode(this.Const().ScMode.normal, evt));
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.ModePrev, (evt) => this.ExternalCall.__hndlrSetScMode(this.Const().ScMode.preview, evt));
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.QuickPublish, (evt) => { this.ExternalCall.__hndlrQuickPublish(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.UpdateNicknameB, () => this.ExternalCall.HndlrSnapShotUpdateNickName());
        this.UiMan().AssignOnClickEventFromCmd(this.GetCommandByKey(MenuCommand.Edit), (evt) => this.ExternalCall.__hndlrSetScMode(this.Const().ScMode.edit, evt));
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.HsCancel, (evt) => { this.ExternalCall.__hndlrCancelOperation(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.HsDrawStorage, (evt) => this.ExternalCall.__DrawStorage(evt));
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.HsRemoveFromStorage, (evt) => this.ExternalCall.HndlrSnapShotRemove(evt));
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.HsRestoreWindowState, (evt) => { this.ExternalCall.HndlrSnapShotRestore(evt); });
        this.UiMan().AssignOnClickEventFromCmd(this.GetCommandByKey(MenuCommand.MarkFavorite), (evt) => this.ExternalCall.MarkFavorite(evt));
        this.UiMan().AssignOnClickEventFromCmd(this.GetCommandByKey(MenuCommand.TakeSnapShot), (evt) => { this.ExternalCall.__hndlrSnapShotCreate(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Btn.BigRed, () => this.ExternalCall.__hndlrAddCETab);
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Legend.LgndDebug, (evt) => { this.InternalCall.__toggleAccordian(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Legend.LgndForeSite, (evt) => { this.InternalCall.__toggleAccordian(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Legend.LgndHindSite, (evt) => { this.InternalCall.__toggleAccordian(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Legend.LgndInSite, (evt) => { this.InternalCall.__toggleAccordian(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Legend.LgndSettings, (evt) => { this.InternalCall.__toggleAccordian(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().ElemId.HS.Legend.LgndState, (evt) => { this.InternalCall.__toggleAccordian(evt); });
        this.UiMan().AssignOnClickEvent(this.Const().Selector.HS.iCBoxdSettingsShowDebugData, (evt) => { this.InternalCall.__showDebugButtonClicked(evt); });
        this.debug().FuncEnd(this.__wireMenuButtons.name);
    }
    GetCommandByKey(menuCommand) {
        var toReturn;
        for (var idx = 0; idx < this.AllMenuCommands.length; idx++) {
            var candidate = this.AllMenuCommands[idx];
            if (candidate.Command === menuCommand) {
                toReturn = candidate;
                this.debug().LogVal('Command', MenuCommand[toReturn.Command]);
                break;
            }
        }
        if (!toReturn) {
            this.debug().Error(this.GetCommandByKey.name, 'matching command not found ' + MenuCommand[menuCommand]);
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/SharedConst.js
class SharedConst {
}
SharedConst.SharedConst = {
    IterHelper: {
        GrowthPerIteration: 0.5,
        MaxCount: {
            Default: 10,
            OverridePublishing: 15,
        },
        Timeouts: {
            Max: 10000,
            Default: 100,
        },
    },
};

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/HelperBase.js
class HelperBase {
    constructor(helperHub) {
        this.HelperHub = helperHub;
        this.Debug = helperHub.Debug;
    }
    GuidHelp() { return this.HelperHub.GuidHelp; }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/IterationHelper.js


class IterationHelper_IterationHelper extends HelperBase {
    constructor(helperHub, nickname, maxIterations = null) {
        super(helperHub);
        this.IsExhaustedMsg = 'Iteration helper exhausted';
        if (!maxIterations) {
            maxIterations = SharedConst.SharedConst.IterHelper.MaxCount.Default;
        }
        this.__maxIterations = maxIterations;
        this.__currentIteration = maxIterations;
        this.__timeout = SharedConst.SharedConst.IterHelper.Timeouts.Default;
        this.__nickName = nickname;
        this.IsExhausted = false;
    }
    DecrementAndKeepGoing() {
        var toReturn = false;
        if (this.__currentIteration > 0) {
            this.__currentIteration -= 1;
            this.__timeout += this.__timeout * SharedConst.SharedConst.IterHelper.GrowthPerIteration;
            if (this.__timeout > SharedConst.SharedConst.IterHelper.Timeouts.Max) {
                this.__timeout = SharedConst.SharedConst.IterHelper.Timeouts.Max;
            }
            this.Debug.Log('DecrementAndKeepGoing: ' + this.__nickName + ' ' + this.__currentIteration + ':' + this.__maxIterations + ' | timeout: ' + this.__timeout);
            toReturn = true;
        }
        else {
            this.IsExhausted = true;
            this.NotifyExhausted();
            toReturn = false;
        }
        return toReturn;
    }
    NotifyExhausted() {
        this.Debug.Log('Iteration: ' + this.__nickName + ' counter exhausted ' + this.__currentIteration + ':' + this.__maxIterations);
    }
    WaitAndThen(timeoutFunction) {
        this.Debug.FuncStart(this.WaitAndThen.name, this.__nickName + ' ' + timeoutFunction.name);
        var self = this;
        setTimeout(timeoutFunction(), self.__timeout);
        this.Debug.FuncEnd(this.WaitAndThen.name, this.__nickName);
    }
    Wait() {
        this.Debug.FuncStart(this.Wait.name, this.__nickName);
        if (!this.OperationCancelled) {
            return new Promise((resolve) => {
                setTimeout(resolve, this.__timeout);
            });
        }
        this.Debug.FuncEnd(this.WaitAndThen.name, this.__nickName);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/PopUpMessagesManager.js
var PopUpMessagesManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






class PopUpMessagesManager_PopUpMessagesManager extends PopUpManagerBase {
    Init() {
        this.ScheduleAutoSaveSnapShot();
        this.ScheduleAutoLogin();
    }
    ReceiveResponseHndlr(response) {
        this.debug().FuncStart(this.ReceiveResponseHndlr.name, StaticHelpers_StaticHelpers.MsgFlagAsString(response.MsgFlag));
        if (response) {
            this.CachedState = response.ContentState;
            this.UiMan().RefreshUiFromCache();
            switch (response.MsgFlag) {
                case MsgFlag.RespCurState:
                    break;
                default:
                    this.debug().LogVal('Unrecognized MsgFlag', StaticHelpers_StaticHelpers.MsgFlagAsString(response.MsgFlag));
                    break;
            }
            this.debug().LogVal('response', JSON.stringify(response));
            this.debug().FuncEnd(this.ReceiveResponseHndlr.name, StaticHelpers_StaticHelpers.MsgFlagAsString(response.MsgFlag));
        }
    }
    ScheduleAutoSaveSnapShot() {
    }
    ScheduleAutoLogin() {
    }
    AutoLogin() {
    }
    OnePing(targetTab, msg) {
        return new Promise((resolve, reject) => PopUpMessagesManager_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.OnePing.name);
            var result = new ResultSuccessFail();
            yield browser.tabs.sendMessage(targetTab.id, msg)
                .then((response) => {
                this.debug().LogVal('response', JSON.stringify(response));
                var asMsgFromContent = response;
                if (asMsgFromContent) {
                    this.debug().Log(StaticHelpers_StaticHelpers.MsgFlagAsString(asMsgFromContent.MsgFlag));
                    if (asMsgFromContent.MsgFlag = MsgFlag.RespListeningAndReady) {
                        result.Succeeded = true;
                    }
                }
                else {
                    result.Succeeded = false;
                    result.FailMessage = 'response is not imsg';
                }
            })
                .catch((err) => {
                this.debug().LogVal('catch err', err.toString());
                result.Succeeded = false;
                result.FailMessage = 'error on ping';
            });
            if (result.Succeeded) {
                this.debug().FuncEnd(this.OnePing.name, 'succeeded');
                resolve();
            }
            else {
                this.debug().FuncEnd(this.OnePing.name, 'failed');
                reject(result.FailMessage);
            }
        }));
    }
    GetTargetTab() {
        return PopUpMessagesManager_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PopUpMessagesManager_awaiter(this, void 0, void 0, function* () {
                yield browser.tabs.query({ currentWindow: true, active: true })
                    .then((tabs) => resolve(tabs[0]))
                    .catch((err) => reject(err));
            }));
        });
    }
    WaitForListeningTab() {
        return PopUpMessagesManager_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PopUpMessagesManager_awaiter(this, void 0, void 0, function* () {
                this.debug().FuncStart(this.WaitForListeningTab.name);
                var result = new ResultSuccessFail();
                result.Succeeded = false;
                var iterationJr = new IterationHelper_IterationHelper(this.Helpers(), this.WaitForListeningTab.name);
                var targetTab;
                yield this.GetTargetTab()
                    .then((tab) => { targetTab = tab; });
                var msg = new MsgPayloadRequestFromPopUp_MsgFromPopUp(MsgFlag.Ping, this.PopHub);
                msg.CurrentContentPrefs = yield (yield this.PopAtticMan().CurrentSettings()).ContentPrefs;
                while (iterationJr.DecrementAndKeepGoing() && !result.Succeeded) {
                    yield this.OnePing(targetTab, msg)
                        .then(() => {
                        this.debug().Log('succeeded a');
                        result.Succeeded = true;
                    })
                        .catch((ex) => {
                        this.debug().Log('failed a ' + ex.toString());
                        result.Succeeded = false;
                    });
                    if (!result.Succeeded) {
                        this.debug().Log('Ping did not succeed, trying again');
                        yield iterationJr.Wait();
                        this.debug().Log('Done waiting');
                    }
                    else {
                        this.debug().Log('Ping succeeded');
                    }
                }
                this.debug().Log('Done while');
                if (result.Succeeded) {
                    this.debug().FuncEnd(this.WaitForListeningTab.name);
                    resolve(targetTab);
                }
                else {
                    this.debug().FuncEnd(this.WaitForListeningTab.name);
                    if (iterationJr.IsExhausted) {
                        result.FailMessage += '  ' + iterationJr.IsExhaustedMsg;
                    }
                    reject(result.FailMessage);
                }
            }));
        });
    }
    SendMessageToSingleTab(tab, messageToSend) {
        this.debug().FuncStart(this.SendMessageToSingleTab.name, StaticHelpers_StaticHelpers.MsgFlagAsString(messageToSend.MsgFlag));
        browser.tabs.sendMessage(tab.id, messageToSend).then((response) => {
            this.debug().LogVal('response', JSON.stringify(response));
            var asMsgFromContent = response;
            if (asMsgFromContent) {
                this.debug().Log(StaticHelpers_StaticHelpers.MsgFlagAsString(asMsgFromContent.MsgFlag));
                this.ReceiveResponseHndlr(asMsgFromContent);
            }
            else {
                this.debug().Error(this.SendMessageToTabs.name, 'response is not imsg');
            }
        })
            .catch(this.onError);
        this.debug().FuncEnd(this.SendMessageToSingleTab.name, StaticHelpers_StaticHelpers.MsgFlagAsString(messageToSend.MsgFlag));
    }
    SendMessageToTabs(tabs, messageToSend) {
        this.debug().FuncStart(this.SendMessageToTabs.name, StaticHelpers_StaticHelpers.MsgFlagAsString(messageToSend.MsgFlag));
        for (let tab of tabs) {
            this.SendMessageToSingleTab(tab, messageToSend);
        }
        this.debug().FuncEnd(this.SendMessageToTabs.name);
    }
    onError(error) {
        console.error(`Error: ${error}`);
    }
    SendMessageToContent(msgPlayload) {
        return PopUpMessagesManager_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.SendMessageToContent.name, StaticHelpers_StaticHelpers.MsgFlagAsString(msgPlayload.MsgFlag));
            msgPlayload.CurrentContentPrefs = yield (yield this.PopAtticMan().CurrentSettings()).ContentPrefs;
            this.WaitForListeningTab()
                .then((tab) => this.SendMessageToSingleTab(tab, msgPlayload))
                .catch((err) => this.onError(err));
            this.debug().FuncEnd(this.SendMessageToContent.name, StaticHelpers_StaticHelpers.MsgFlagAsString(msgPlayload.MsgFlag));
        });
    }
    FromAtticDrawStorage() {
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/PopUpAtticManager.js
var PopUpAtticManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

class PopUpAtticManager_PopUpAtticManager extends PopUpManagerBase {
    Init() {
        this.DefaultSettings = this.GetDefaultSettings();
    }
    __drawSettings() {
        return PopUpAtticManager_awaiter(this, void 0, void 0, function* () {
            var toReturn = [];
            var settings = yield this.CurrentSettings();
            toReturn.push('----- Settings - Accordian ------');
            for (var idx = 0; idx < settings.Accordian.length; idx++) {
                toReturn.push(settings.Accordian[idx].ElemId + ':' + settings.Accordian[idx].isCollapsed.toString());
            }
            return toReturn;
        });
    }
    GetDefaultSettings() {
        this.debug().FuncStart(this.GetDefaultSettings.name);
        let defaultDebugSettings = {
            KeepDialogOpen: this.Const().Storage.Defaults.bool.DefaultDebugKeepDialogOpen,
            ShowDebugData: this.Const().Storage.Defaults.bool.DefaultShowDebugData,
        };
        let defaultContentPrefs = {
            MaxAutoSaveCount: this.Const().Numbers.MaxAutoSaveCount,
            AutoSave: true
        };
        let toReturn = {
            DebugSettings: defaultDebugSettings,
            Accordian: [],
            ContentPrefs: defaultContentPrefs,
        };
        this.DebugSettings(toReturn);
        this.debug().FuncEnd(this.GetDefaultSettings.name);
        return toReturn;
    }
    DebugSettings(toReturn) {
        this.debug().FuncStart(this.DebugSettings.name);
        this.debug().LogVal('Settings', JSON.stringify(toReturn));
        this.debug().FuncEnd(this.DebugSettings.name);
    }
    ValidateSettings(popSettings) {
        if (typeof popSettings === 'undefined' || !popSettings) {
            popSettings = this.DefaultSettings;
        }
        if (!popSettings.DebugSettings) {
            popSettings.DebugSettings = this.DefaultSettings.DebugSettings;
        }
        if (!popSettings.DebugSettings.KeepDialogOpen) {
            popSettings.DebugSettings.KeepDialogOpen = this.DefaultSettings.DebugSettings.KeepDialogOpen;
        }
        if (!popSettings.DebugSettings.ShowDebugData) {
            popSettings.DebugSettings.ShowDebugData = this.DefaultSettings.DebugSettings.ShowDebugData;
        }
        if (!popSettings.Accordian) {
            popSettings.Accordian = [];
        }
        if (!popSettings.ContentPrefs) {
            popSettings.ContentPrefs = this.DefaultSettings.ContentPrefs;
        }
        return popSettings;
    }
    CurrentSettings() {
        return PopUpAtticManager_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.CurrentSettings.name);
            var toReturn;
            yield browser.storage.local.get().then((storageResults) => {
                var noteKeys = Object.keys(storageResults);
                for (let noteKey of noteKeys) {
                    var curValue = storageResults[noteKey];
                    if (noteKey === 'settings') {
                        toReturn = JSON.parse(curValue.toString());
                    }
                }
            });
            this.debug().LogVal('toReturn', JSON.stringify(toReturn));
            toReturn = this.ValidateSettings(toReturn);
            this.debug().NotNullCheck('toReturn', toReturn);
            this.debug().FuncEnd(this.CurrentSettings.name);
            return toReturn;
        });
    }
    StoreSettings(currentSettings) {
        return PopUpAtticManager_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.StoreSettings.name);
            yield browser.storage.local.set({ settings: JSON.stringify(currentSettings) });
            this.debug().FuncEnd(this.StoreSettings.name);
        });
    }
    UpdateAccodianState(needleKey, isCollapsed) {
        return PopUpAtticManager_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.UpdateAccodianState.name, needleKey + ' ' + isCollapsed);
            var settings = yield this.CurrentSettings();
            var accordianPairs = settings.Accordian;
            var found = null;
            for (var idx = 0; idx < accordianPairs.length; idx++) {
                var candidate = accordianPairs[idx];
                if (candidate.ElemId === needleKey) {
                    found = true;
                    candidate.isCollapsed = isCollapsed;
                    break;
                }
            }
            if (!found) {
                var newSetting = {
                    ElemId: needleKey,
                    isCollapsed: isCollapsed
                };
                accordianPairs.push(newSetting);
            }
            yield this.StoreSettings(settings);
            this.debug().FuncEnd(this.UpdateAccodianState.name);
        });
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/FeedbackManager.js

class FeedbackManager_FeedbackManager extends PopUpManagerBase {
    constructor(popHub) {
        super(popHub);
    }
    __getTextArea() {
        return document.getElementById(this.Const().ElemId.textAreaFeedback);
    }
    WriteLine(text) {
        var ta = this.__getTextArea();
        if (ta) {
            ta.value += text + '\n';
        }
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Enums/scMode.js
var scMode;
(function (scMode) {
    scMode[scMode["Unknown"] = 0] = "Unknown";
    scMode[scMode["Edit"] = 1] = "Edit";
    scMode[scMode["Preview"] = 2] = "Preview";
    scMode[scMode["Normal"] = 3] = "Normal";
})(scMode || (scMode = {}));

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Classes/PopConst.js

class PopConst {
}
PopConst.PopConst = {
    ClassNames: {
        HS: {
            Collapsed: 'in',
        },
    },
    ElemId: {
        textAreaFeedback: 'ta-feedback',
        InputNickname: 'inputNickname',
        HindSiteParentInfo: 'spanParentInfo',
        HS: {
            SelectHeaderAuto: 'sel-header-auto',
            SelectHeaderAutoTitle: 'sel-header-auto-title',
            SelectHeaderFavorite: 'sel-header-favorite',
            SelectHeaderFavoriteTitle: 'sel-header-favorite-title',
            TabId: 'orig-win-id',
            Btn: {
                AdminB: 'AdminB',
                MarkFavorite: 'MarkFavorite',
                HsCancel: 'Cancel',
                CE: 'CE',
                Desktop: 'Desktop',
                HsDrawStorage: 'DrawLocalStorage',
                BigRed: 'BigRed',
                ModeEdit: 'Edit',
                ModeNorm: 'Norm',
                ModePrev: 'Prev',
                QuickPublish: 'QuickPublish',
                HsRemoveFromStorage: 'RemoveOneFromLocalStorage',
                HsRestoreWindowState: 'RestoreWindowState',
                HsSaveWindowState: 'SaveWindowState',
                UpdateNicknameB: 'UpdateNickname',
            },
            Legend: {
                LgndSettings: 'lgnd-settings',
                LgndInSite: 'lgnd-in-site',
                LgndHindSite: 'lgnd-hind-site',
                LgndDebug: 'lgnd-debug',
                LgndForeSite: 'lgnd-fore-site',
                LgndState: 'lgnd-state',
            }
        }
    },
    Numbers: {
        MinMenuHeight: 600,
        MinMenuWidth: 600,
        MaxAutoSaveCount: 10,
    },
    Notify: {
        Default: 'Complete',
        PublishComplete: 'Publishing Complete',
    },
    Regex: {
        ContentEditor: /Content.*?Editor/ig,
        NbSp: /&nbsp;/ig,
        PageType: {
            Desktop: /.*default.aspx/ig,
            Edit: /sc_itemid=.*sc_mode=edit/ig,
            Normal: /sc_itemid=.*sc_mode=normal/ig,
            Preview: /sc_itemid=.*sc_mode=preview/ig,
        },
    },
    ScMode: {
        edit: { AsEnum: scMode.Edit, AsString: 'edit' },
        normal: { AsEnum: scMode.Normal, AsString: 'normal' },
        preview: { AsEnum: scMode.Preview, AsString: 'preview' },
    },
    Selector: {
        Btn: {
            WindowClose: '[id=close-window]',
        },
        HS: {
            iCBoxdSettingsShowDebugData: '[id=id-settings-show-debug-data]',
            iCBoxdSettingsAutoLogin: '[id=id-settings-auto-login]',
            PrefAutoLogin: '[id=id-settings-auto-login]',
            SettingAutoSaveEnabled: '[id=id-settings-auto-save]',
            SettingAutoSaveInterval: '[id=id-settings-auto-save-interval]',
            IdFieldSetDebug: '[id=id-fieldset-debug]',
            SelStateSnapShot: '[id=selState]',
            TaDebug: '[id=ta-debug]',
            TaState: '[id=ta-state]',
            BuildStamp: '[id=build-stamp]',
        },
    },
    Storage: {
        WindowRoot: 'todo',
        SettingsSuffix: 'todo',
        Defaults: {
            bool: {
                AutoSave: false,
                AutoLogin: false,
                DefaultDebugKeepDialogOpen: false,
                DefaultShowDebugData: false
            }
        }
    },
    Timeouts: {
        WaitBeforeRemovingCompleteFlag: 1500,
        AutoSaveInterval: 1000,
        AutoLoginCheckInterval: 3000,
    },
    UrlSuffix: {
        Desktop: '/sitecore/shell/default.aspx',
        Login: '/sitecore/login',
        LaunchPad: '/client/applications/launchpad',
        CE: '/sitecore/shell/Applications/Content Editor.aspx?sc_bw=1',
        None: '/',
    },
};

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/SettingsManager.js

class SettingsManager_SettingsManager extends PopUpManagerBase {
    CreateAllSettings() {
        this.AllSettings = [
            {
                SettingKey: SettingKey.ShowDebugData,
                DataType: SettingType.Bool,
                SettingAsString: '',
                UiSelector: this.Const().Selector.HS.iCBoxdSettingsShowDebugData,
                ValueAsBool: this.Const().Storage.Defaults.bool.DefaultShowDebugData,
            },
            {
                SettingKey: SettingKey.AutoSave,
                DataType: SettingType.Bool,
                SettingAsString: '',
                UiSelector: this.Const().Selector.HS.iCBoxdSettingsShowDebugData,
                ValueAsBool: this.Const().Storage.Defaults.bool.AutoSave,
            },
            {
                SettingKey: SettingKey.AutoLogin,
                DataType: SettingType.Bool,
                SettingAsString: '',
                UiSelector: this.Const().Selector.HS.iCBoxdSettingsAutoLogin,
                ValueAsBool: this.Const().Storage.Defaults.bool.AutoLogin,
            }
        ];
    }
    GetByKey(settingKey) {
        var toReturn;
        return toReturn;
    }
    SetByKey(settingKey, value) {
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/LocationManager.js
var LocationManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class LocationManager_LocationManager extends PopUpManagerBase {
    constructor(hub) {
        super(hub);
        hub.debug.FuncStart(LocationManager_LocationManager.name);
        hub.debug.FuncEnd(LocationManager_LocationManager.name);
    }
    ChangeLocationSwitchBoard(desiredPageType, targetWindow) {
        this.debug().FuncStart(this.ChangeLocationSwitchBoard.name, 'desired = ' + scWindowType[desiredPageType]);
        var iteration = new IterationHelper_IterationHelper(this.Helpers(), this.ChangeLocationSwitchBoard.name);
        if (iteration.DecrementAndKeepGoing()) {
            var currentState = this.PageMan().GetCurrentPageType();
            if (currentState === scWindowType.LoginPage) {
                var self = this;
                var callbackOnComplete = () => {
                    this.debug().Log('callback triggered');
                    self.ChangeLocationSwitchBoard(desiredPageType, targetWindow);
                };
                var self = this;
            }
            else if (currentState === scWindowType.Launchpad || currentState === scWindowType.ContentEditor || currentState === scWindowType.Desktop) {
                var self = this;
                var callBackOnSuccessfulHrefChange = function () {
                    self.debug().Log('Callback triggered');
                    targetWindow = self.PageMan().SetWindowDataToCurrent(targetWindow.Window, targetWindow.DataDocSelf.Nickname);
                    self.ChangeLocationSwitchBoard(desiredPageType, targetWindow);
                };
                if (desiredPageType === scWindowType.Desktop && currentState !== scWindowType.Desktop) {
                    this.Helpers().PromiseHelp.SetHrefAndWaitForReadyStateComplete(this.Const().UrlSuffix.Desktop, targetWindow, desiredPageType)
                        .then(() => callBackOnSuccessfulHrefChange);
                }
                else if (desiredPageType === scWindowType.ContentEditor && currentState !== scWindowType.ContentEditor) {
                    this.Helpers().PromiseHelp.SetHrefAndWaitForReadyStateComplete(this.Const().UrlSuffix.CE, targetWindow, desiredPageType)
                        .then(() => callbackOnComplete);
                }
                else if (currentState === scWindowType.Desktop && desiredPageType === scWindowType.Desktop) {
                    this.debug().Log('On Desktop');
                }
            }
        }
        this.debug().FuncEnd(this.ChangeLocationSwitchBoard.name);
    }
    SetScMode(newValue, useOrigWindow) {
        return new Promise(() => LocationManager_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.SetScMode.name, newValue.AsString);
            var itemGuid;
            var targetWindow;
            var currentPageType = this.PageMan().GetCurrentPageType();
            if (currentPageType === scWindowType.ContentEditor
                ||
                    currentPageType === scWindowType.Desktop) {
                var dataOneDoc = null;
                if (currentPageType == scWindowType.Desktop) {
                }
                else {
                    dataOneDoc = this.PageMan().TopLevelWindow().DataDocSelf;
                }
                if (dataOneDoc) {
                    yield alert(itemGuid.AsString);
                    if (itemGuid) {
                        targetWindow = yield this.PageMan().GetTargetWindowAsync(useOrigWindow, scWindowType.Edit);
                    }
                }
            }
            else if (currentPageType == scWindowType.Edit
                || currentPageType == scWindowType.Normal
                || currentPageType == scWindowType.Preview) {
                if (targetWindow) {
                    window.opener.location.href = window.opener.location.href.replace('=normal', newValue.AsString).replace('=preview', newValue.AsString).replace('=edit', newValue.AsString);
                }
            }
            this.debug().FuncEnd(this.SetScMode.name);
        }));
    }
    GetCurrentUrl(targ) {
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/PageManagerPopUp.js
var PageManagerPopUp_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class PageManagerPopUp_PageManagerPopUp extends PopUpManagerBase {
    constructor(hub) {
        super(hub);
        hub.debug.FuncStart(LocationManager_LocationManager.name);
        hub.debug.FuncEnd(LocationManager_LocationManager.name);
    }
    __urlVsRegex(regexPattern, url) {
        return new RegExp(regexPattern).test(url);
    }
    SetWindowDataToCurrent(window, nickname) {
        var toReturn = {
            Friendly: 'New Tab',
            Window: window,
            WindowType: scWindowType.Unknown,
            DataDocSelf: {
                ParentDoc: null,
                Document: window.document,
                HasParentDesktop: false,
                DocId: this.Helpers().GuidHelp.NewGuid(),
                IsCEDoc: false,
                ParentDesktop: null,
                Nickname: nickname
            },
        };
        toReturn.DataDocSelf.ParentDoc = toReturn.DataDocSelf;
        return toReturn;
    }
    __getNewTargetWindowAsync(newWindowUrl) {
        return PageManagerPopUp_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve) => {
                this.debug().FuncStart(this.__getNewTargetWindowAsync.name);
                this.debug().LogVal('newWindowUrl', newWindowUrl);
                var newWindow = this.__winDataParent.Window.open(newWindowUrl);
                var self = this;
                newWindow.addEventListener('load', () => {
                    var toReturn = self.SetWindowDataToCurrent(newWindow, 'newly spawned window');
                    resolve(toReturn);
                });
                this.debug().FuncEnd(this.__getNewTargetWindowAsync.name);
            });
        });
    }
    __getUrlForWindowType(windowType) {
        var toReturn;
        this.debug().NotNullCheck('this.__winDataParent.DataDocSelf.Document', this.__winDataParent.DataDocSelf.Document);
        var hostName = this.__winDataParent.DataDocSelf.Document.location.origin;
        switch (windowType) {
            case scWindowType.ContentEditor:
                toReturn = hostName + this.Const().UrlSuffix.CE;
                break;
            case scWindowType.Desktop:
                toReturn = hostName + this.Const().UrlSuffix.Desktop;
                break;
            case scWindowType.Edit:
                toReturn = hostName + this.Const().UrlSuffix.None;
                break;
            case scWindowType.Preview:
                toReturn = hostName + this.Const().UrlSuffix.None;
                break;
            case scWindowType.Normal:
                toReturn = hostName + this.Const().UrlSuffix.None;
                break;
            default:
                toReturn = hostName;
                this.debug().Error(this.__getUrlForWindowType.name, 'unaccounted for window type');
                break;
        }
        return toReturn;
    }
    TopLevelWindow() {
        return this.__winDataParent;
    }
    GetTargetWindowAsync(useOrigWindow, windowType) {
        return PageManagerPopUp_awaiter(this, void 0, void 0, function* () {
            this.debug().FuncStart(this.GetTargetWindowAsync.name);
            useOrigWindow = true;
            var targetWindow;
            if (useOrigWindow) {
                this.debug().Log('target window is self');
                targetWindow = this.TopLevelWindow();
            }
            else {
                this.debug().Log('target window is new');
                let newWindowUrl = this.__getUrlForWindowType(windowType);
                yield this.__getNewTargetWindowAsync(newWindowUrl)
                    .then((data) => targetWindow = data);
            }
            this.debug().FuncEnd(this.GetTargetWindowAsync.name, 'child window id: ' + targetWindow.DataDocSelf.DocId.AsShort);
            return targetWindow;
        });
    }
    GetPageTypeOfTargetWindow(targetWindow) {
        this.debug().FuncStart(this.GetPageTypeOfTargetWindow.name, targetWindow.location.href);
        var toReturn;
        var currentLoc = targetWindow.location.href;
        if (currentLoc.indexOf(this.Const().UrlSuffix.Login) > -1) {
            toReturn = scWindowType.LoginPage;
        }
        else if (new RegExp(this.Const().Regex.ContentEditor).test(currentLoc)) {
            toReturn = scWindowType.ContentEditor;
        }
        else if (currentLoc.toLowerCase().indexOf(this.Const().UrlSuffix.LaunchPad.toLowerCase()) > -1) {
            toReturn = scWindowType.Launchpad;
        }
        else if (this.__urlVsRegex(this.Const().Regex.PageType.Desktop, currentLoc)) {
            toReturn = scWindowType.Desktop;
        }
        else if (this.__urlVsRegex(this.Const().Regex.PageType.Preview, currentLoc)) {
            toReturn = scWindowType.Preview;
        }
        else if (this.__urlVsRegex(this.Const().Regex.PageType.Edit, currentLoc)) {
            toReturn = scWindowType.Edit;
        }
        else if (this.__urlVsRegex(this.Const().Regex.PageType.Normal, currentLoc)) {
            toReturn = scWindowType.Normal;
        }
        else {
            toReturn = scWindowType.Unknown;
        }
        this.debug().FuncEnd(this.GetPageTypeOfTargetWindow.name, scWindowType[toReturn]);
        return toReturn;
    }
    GetCurrentPageType() {
        this.debug().FuncStart(this.GetCurrentPageType.name);
        var toReturn = scWindowType.Unknown;
        if (this.__winDataParent && this.__winDataParent && this.__winDataParent.Window && this.__winDataParent.DataDocSelf) {
            toReturn = this.GetPageTypeOfTargetWindow(this.__winDataParent.Window);
        }
        this.debug().FuncEnd(this.GetCurrentPageType.name + ' (' + toReturn + ') ' + scWindowType[toReturn]);
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Helpers/GuidHelper.js

class GuidHelper_GuidHelper extends HelperBase {
    constructor() {
        super(...arguments);
        this.ShortGuidLength = 4;
    }
    EmptyGuid() {
        return this.ParseGuid('00000000-0000-0000-0000-000000000000');
    }
    newGuidString() {
        var toReturn;
        var temp = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';
        toReturn = temp.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0;
            var v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
        return toReturn;
    }
    NewGuid() {
        var toReturn = this.ParseGuid(this.newGuidString());
        return toReturn;
    }
    ShortGuid(Id) {
        var toReturn = '{error}';
        if (Id && Id.AsString.length > this.ShortGuidLength) {
            toReturn = Id.AsString.substr(0, this.ShortGuidLength);
        }
        else {
            this.Debug.DebugIGuid(Id);
            this.Debug.LogVal('Length', Id.AsString.length);
            this.Debug.LogVal('ShortLength', this.ShortGuidLength);
        }
        return toReturn;
    }
    ParseGuid(val) {
        let toReturn = {
            AsString: val,
            AsShort: '',
            Type: 'IGuid'
        };
        toReturn.AsShort = this.ShortGuid(toReturn);
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/Utilities.js






class Utilities_UtilityHelper extends HelperBase {
    constructor() {
        super(...arguments);
        this.lenTimestamp = 13;
        this.lenNickname = 16;
        this.lenPageType = 7;
        this.lenPrefix = 6;
        this.lenShortId = 4;
        this.colSep = ' - ';
        this.lenCeCount = 3;
        this.lenActiveNode = 16;
        this.lenFavorite = 3;
    }
    SelectHeaderStr(prefix) {
        let toReturn = StaticHelpers_StaticHelpers.BufferString('Time Stamp', this.lenTimestamp, BufferChar.Period, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString('Type', this.lenPageType, BufferChar.Period, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString('Nickname', this.lenNickname, BufferChar.Period, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString('Active Node.', this.lenActiveNode, BufferChar.Period, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString('Fav.', this.lenFavorite, BufferChar.Period, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString('Id', this.lenShortId, BufferChar.Period, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString('#CE', this.lenCeCount, BufferChar.Period, BufferDirection.right);
        return toReturn;
    }
    MakeSelectorFromId(TabId) {
        return '[id=' + TabId + ']';
    }
    TimeNicknameFavStr(data) {
        var typeStr = '';
        if (data.WindowType === scWindowType.ContentEditor) {
            typeStr = 'Cont Ed';
        }
        else if (data.WindowType === scWindowType.Desktop) {
            typeStr = 'Desktop';
        }
        var activeCeNode = '';
        for (var idx = 0; idx < data.AllCEAr.length; idx++) {
            var candidateCe = data.AllCEAr[idx];
            for (var jdx = 0; jdx < candidateCe.AllTreeNodeAr.length; jdx++) {
                var candidateNode = candidateCe.AllTreeNodeAr[jdx];
                if (candidateNode.IsActive) {
                    var lvl2Node = '';
                    if (jdx >= 2) {
                        lvl2Node = candidateCe.AllTreeNodeAr[1].NodeFriendly + '/';
                    }
                    activeCeNode = lvl2Node + candidateNode.NodeFriendly;
                    break;
                }
            }
        }
        let toReturn = StaticHelpers_StaticHelpers.BufferString(this.MakeFriendlyDate(data.TimeStamp), this.lenTimestamp, BufferChar.space, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString(typeStr, this.lenPageType, BufferChar.Nbsp, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString(data.NickName, this.lenNickname, BufferChar.Nbsp, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString(activeCeNode, this.lenActiveNode, BufferChar.Nbsp, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString((data.Flavor == SnapShotFlavor.Favorite ? '*' : ''), this.lenFavorite, BufferChar.Nbsp, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString(data.Id.AsShort, this.lenShortId, BufferChar.Nbsp, BufferDirection.right)
            + this.colSep + StaticHelpers_StaticHelpers.BufferString(data.AllCEAr.length.toString(), this.lenCeCount, BufferChar.Nbsp, BufferDirection.right);
        return toReturn;
    }
    TimeNicknameFavStrForConfirmation(data) {
        var result = this.TimeNicknameFavStr(data);
        result = result.replace(new RegExp(/&nbsp;/ig), '');
        return result;
    }
    MakeFriendlyDate(date) {
        var toReturn = '';
        if (date) {
            var year = date.getFullYear();
            var month = StaticHelpers_StaticHelpers.BufferString(date.getMonth().toString(), 2, BufferChar.Zero, BufferDirection.left);
            var day = StaticHelpers_StaticHelpers.BufferString(date.getDay().toString(), 2, BufferChar.Zero, BufferDirection.left);
            var min = StaticHelpers_StaticHelpers.BufferString(date.getMinutes().toString(), 2, BufferChar.Zero, BufferDirection.left);
            var hoursRaw = date.getHours();
            var ampm = hoursRaw >= 12 ? 'p' : 'a';
            hoursRaw = hoursRaw % 12;
            var hourClean = hoursRaw ? hoursRaw : 12;
            var hourCleanStr = StaticHelpers_StaticHelpers.BufferString(hourClean.toString(), 2, BufferChar.Zero, BufferDirection.left);
            toReturn = month + '.' + day + ' ' + hourCleanStr + ':' + min + ' ' + ampm;
        }
        else {
            toReturn = '{error}';
            this.Debug.Error(this.MakeFriendlyDate.name, 'no date provided');
        }
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Classes/PromiseGeneric.js
var PromiseGeneric_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class PromiseGeneric_PromiseHelper extends HelperBase {
    WaitForReadyIframe(dataOneIframe) {
        return PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                this.Debug.FuncStart(this.WaitForReadyIframe.name, dataOneIframe.Nickname + ' ' + dataOneIframe.Id.AsShort);
                this.Debug.DebugDataOneIframe(dataOneIframe);
                var iterationJr = new IterationHelper_IterationHelper(this.HelperHub, this.WaitForReadyIframe.name);
                var isReady = false;
                this.Debug.MarkerA();
                while (iterationJr.DecrementAndKeepGoing() && !isReady) {
                    this.Debug.MarkerB();
                    var currentReadyState = dataOneIframe.IframeElem.contentDocument.readyState.toString();
                    var isReadyStateComplete = currentReadyState === 'complete';
                    this.Debug.Log('currentReadyState : ' + currentReadyState);
                    ;
                    this.Debug.MarkerC();
                    this.Debug.Log('isReadyStateComplete: ' + isReadyStateComplete);
                    if (isReadyStateComplete) {
                        this.Debug.Log('toReturn A is true');
                        isReady = true;
                        dataOneIframe.ContentDoc = this.HelperHub.FactoryHelp.DataOneContentDocFactoryFromIframe(dataOneIframe.IframeElem, dataOneIframe.ContentDoc.ParentDoc, dataOneIframe.Nickname);
                    }
                    else {
                        yield iterationJr.Wait();
                    }
                }
                this.Debug.DebugDataOneIframe(dataOneIframe);
                this.Debug.FuncEnd(this.WaitForReadyIframe.name, dataOneIframe.Nickname + ' : ' + currentReadyState + ' is ready: ' + isReady.toString());
                ;
                resolve(dataOneIframe);
            }));
        });
    }
    WaitForPageReadyNative(targetDoc) {
        return PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                this.Debug.FuncStart(this.WaitForPageReadyNative.name);
                var result = new ResultSuccessFail();
                this.Debug.DebugIDataOneDoc(targetDoc);
                var iterationJr = new IterationHelper_IterationHelper(this.HelperHub, this.WaitForPageReadyNative.name);
                var isReady = false;
                this.Debug.MarkerA();
                while (iterationJr.DecrementAndKeepGoing() && !isReady) {
                    this.Debug.MarkerB();
                    var currentReadyState = targetDoc.Document.readyState.toString();
                    var isReadyStateComplete = currentReadyState === 'complete';
                    this.Debug.LogVal('readyState', currentReadyState);
                    ;
                    this.Debug.LogVal('isReadyStateComplete', isReadyStateComplete);
                    if (isReadyStateComplete) {
                        isReady = true;
                        result.Succeeded = true;
                    }
                    else {
                        yield iterationJr.Wait();
                    }
                }
                if (iterationJr.IsExhausted) {
                    result.Succeeded = false;
                    result.FailMessage = iterationJr.IsExhaustedMsg;
                }
                this.Debug.FuncEnd(this.WaitForPageReadyNative.name, 'ready state: ' + currentReadyState + ' is ready: ' + isReady.toString());
                ;
                if (result.Succeeded) {
                    resolve();
                }
                else {
                    reject(result.FailMessage);
                }
            }));
        });
    }
    WaitForAndReturnReadyIframe(targetDoc, selector, iframeObj) {
        return PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                var iframeData;
                yield this.WaitForAndReturnFoundElem(targetDoc, selector)
                    .then((foundElem) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                    if (foundElem) {
                        iframeObj.IframeElem = foundElem;
                        this.Debug.DebugDataOneIframe(iframeData);
                        return iframeData;
                    }
                }))
                    .then((iframeData) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                    iframeData = yield this.WaitForReadyIframe(iframeData);
                    resolve(iframeData);
                }));
            }));
        });
    }
    WaitForAndReturnFoundElem(targetDoc, selector, overrideIterCount = 8) {
        return PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                this.Debug.FuncStart(this.WaitForAndReturnFoundElem.name, 'selector: ' + selector + ' nickname: ' + targetDoc.Nickname);
                var found = null;
                var iterationJr = new IterationHelper_IterationHelper(this.HelperHub, this.WaitForAndReturnFoundElem.name, overrideIterCount);
                while (!found && iterationJr.DecrementAndKeepGoing()) {
                    this.Debug.LogVal('targetDoc.Document', targetDoc.Document.toString());
                    this.Debug.LogVal('targetDoc.Document.location', targetDoc.Document.location.toString());
                    this.Debug.LogVal('targetDoc.Document.location.href', targetDoc.Document.location.href);
                    found = targetDoc.Document.querySelector(selector);
                    if (found) {
                        this.Debug.Log('found');
                        this.Debug.LogVal('found.style.display', found.style.display);
                        this.Debug.FuncEnd(this.WaitForAndReturnFoundElem.name, selector + targetDoc.Document.location.href);
                        resolve(found);
                    }
                    else {
                        yield iterationJr.Wait();
                    }
                }
                if (!found && iterationJr.IsExhausted) {
                    this.Debug.FuncEnd(this.WaitForAndReturnFoundElem.name, selector + targetDoc.Document.location.href);
                    reject('exhausted');
                }
            }));
        });
    }
    WaitForAndClickWithPayload(selector, targetDoc, payload) {
        return new Promise((resolve, reject) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            this.Debug.FuncStart(this.WaitForAndClickWithPayload.name, selector);
            yield this.WaitForThenClick([selector], targetDoc)
                .then(() => resolve(payload))
                .catch(ex => {
                this.Debug.Error(this.WaitForAndClickWithPayload.name, ex);
                reject(ex);
            });
        }));
    }
    SetHrefAndWaitForReadyStateComplete(href, targetWindow, targetWindowType) {
        return PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                this.Debug.FuncStart(this.SetHrefAndWaitForReadyStateComplete.name, href);
                var isCorrectHref = targetWindow.Window.location.href = href;
                if (targetWindow.WindowType !== targetWindowType) {
                    targetWindow.Window.location.href = href;
                }
                yield this.WaitForPageReadyNative(targetWindow.DataDocSelf)
                    .then(() => resolve())
                    .catch(() => reject());
                this.Debug.FuncEnd(this.SetHrefAndWaitForReadyStateComplete.name);
            }));
        });
    }
    WaitForPageReady(targetWindow) {
        return PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                this.Debug.FuncStart(this.WaitForPageReady.name);
                this.Debug.DebugIDataBrowserWindow(targetWindow);
                if (targetWindow) {
                    yield this.WaitForPageReadyNative(targetWindow.DataDocSelf)
                        .then(() => resolve())
                        .catch((ex) => {
                        reject(ex);
                    });
                }
                this.Debug.FuncEnd(this.WaitForPageReady.name);
            }));
        });
    }
    RaceWaitAndClick(selector, targetDoc) {
        return PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
                this.Debug.FuncStart(this.RaceWaitAndClick.name);
                var raceFlag = false;
                var prom1 = this.WaitForThenClick([selector.sc920, selector.sc820], targetDoc);
                this.Debug.FuncEnd(this.RaceWaitAndClick.name);
                yield prom1
                    .then(() => {
                    resolve();
                })
                    .catch((ex) => {
                    reject(ex);
                });
            }));
        });
    }
    WaitForThenClick(selector, targetDoc) {
        return new Promise((resolve, reject) => PromiseGeneric_awaiter(this, void 0, void 0, function* () {
            if (targetDoc) {
                this.Debug.FuncStart(this.WaitForThenClick.name, selector.length);
                var found = null;
                var iterationJr = new IterationHelper_IterationHelper(this.HelperHub, this.WaitForThenClick.name);
                while (!found && iterationJr.DecrementAndKeepGoing()) {
                    for (var idx = 0; idx < selector.length; idx++) {
                        found = targetDoc.Document.querySelector(selector[idx]);
                        if (found) {
                            break;
                        }
                    }
                    if (found) {
                        this.Debug.Log('found and clicking');
                        found.click();
                        this.Debug.FuncEnd(this.WaitForThenClick.name, selector.length);
                        resolve();
                    }
                    else {
                        yield iterationJr.Wait();
                    }
                }
            }
            else {
                reject();
            }
            this.Debug.FuncEnd(this.WaitForThenClick.name, selector.length);
            if (!found && iterationJr.IsExhausted) {
                reject('exhausted');
            }
        }));
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Helpers/FactoryHelper.js

class FactoryHelper_FactoryHelper extends HelperBase {
    DataOneContentDocFactoryFromIframe(IframeElem, parentDocument, nickname) {
        var toReturn = {
            ParentDoc: parentDocument,
            Document: IframeElem.contentDocument,
            HasParentDesktop: false,
            DocId: this.HelperHub.GuidHelp.NewGuid(),
            IsCEDoc: false,
            ParentDesktop: null,
            Nickname: nickname + ' - content doc'
        };
        return toReturn;
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/Shared/scripts/Helpers/Helpers.js




class Helpers_HelperHub {
    constructor(debug) {
        debug.FuncStart(Helpers_HelperHub.name);
        this.Debug = debug;
        this.Init();
        debug.FuncEnd(Helpers_HelperHub.name);
    }
    Init() {
        this.GuidHelp = new GuidHelper_GuidHelper(this);
        this.UtilityHelp = new Utilities_UtilityHelper(this);
        this.PromiseHelp = new PromiseGeneric_PromiseHelper(this);
        this.FactoryHelp = new FactoryHelper_FactoryHelper(this);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/Managers/PopUpHub.js











class PopUpHub_PopUpHub {
    constructor() {
        this.debug = new PopUpDebug_PopUpDebug(window);
        this.debug.Enabled = true;
        console.log('enabled? ' + this.debug.Enabled);
        this.PopUpAtticMan = new PopUpAtticManager_PopUpAtticManager(this);
        this.PopMsgMan = new PopUpMessagesManager_PopUpMessagesManager(this);
        this.UiMan = new UiManager_UiManager(this);
        this.EventMan = new EventManager_EventManager(this);
        this.Helpers = new Helpers_HelperHub(this.debug);
        this.LocMan = new LocationManager_LocationManager(this);
        this.PopUpConst = PopConst.PopConst;
        this.FeedbackMan = new FeedbackManager_FeedbackManager(this);
        this.SettingsMan = new SettingsManager_SettingsManager(this);
        this.PageMan = new PageManagerPopUp_PageManagerPopUp(this);
        this.init();
    }
    init() {
        this.debug.FuncStart(this.init.name, PopUpHub_PopUpHub.name);
        this.EventMan.Init();
        this.PopUpAtticMan.Init();
        this.PopMsgMan.Init();
        this.UiMan.Init();
        this.debug.FuncEnd(this.init.name, PopUpHub_PopUpHub.name);
    }
}

// CONCATENATED MODULE: ./AutoBuild/TsTranspiled/PopUp/scripts/EntryPoint.js

console.log('did it');
new PopUpHub_PopUpHub();


/***/ })
/******/ ]);