!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class i{constructor(e){this.PopHub=e}Utilites(){return this.PopHub.Utilities}UiMan(){return this.PopHub.UiMan}debug(){return this.PopHub.debug}PopConst(){return this.PopHub.PopUpConst}MsgMan(){return this.PopHub.PopMsgMan}PopAtticMan(){return this.PopHub.PopUpAtticMan}GuidMan(){return this.PopHub.GuidMan}}var s,a;!function(e){e[e.Unknown=0]="Unknown",e[e.LoginPage=1]="LoginPage",e[e.Desktop=2]="Desktop",e[e.ContentEditor=3]="ContentEditor",e[e.Launchpad=4]="Launchpad",e[e.Edit=5]="Edit",e[e.Normal=6]="Normal",e[e.Preview=7]="Preview"}(s||(s={}));class o{}class r{constructor(e){this.MsgFlag=e,this.Data=new o}}!function(e){e[e.AddCETab=0]="AddCETab",e[e.AdminB=1]="AdminB",e[e.GoDesktop=2]="GoDesktop",e[e.OpenCE=3]="OpenCE",e[e.QuickPublish=4]="QuickPublish",e[e.RemoveFromStorage=5]="RemoveFromStorage",e[e.TakeSnapShot=6]="TakeSnapShot",e[e.UpdateNickName=7]="UpdateNickName",e[e.RestoreClick=8]="RestoreClick",e[e.Unknown=9]="Unknown",e[e.GetAllStorageOneWindow=10]="GetAllStorageOneWindow",e[e.TaskSuccessful=11]="TaskSuccessful",e[e.SetScMode=12]="SetScMode",e[e.TaskFailed=13]="TaskFailed",e[e.GiveCurrentData=14]="GiveCurrentData"}(a||(a={}));class d extends i{constructor(e){super(e),this.__selectSnapshotIndex=0,this.ParentFocused=!1,this.MenuFocused=!0,this.OtherFocused=!1,this.MenuEnabled=!0,e.debug.FuncStart(d.name),e.debug.FuncEnd(d.name)}Init(){this.debug().AddDebugTextChangedCallback(this,this.HndlrDebugTextChanged),this.__wireParentFocusCheck(),this.RefreshUiRequest()}__drawStoragePretty(e){this.debug().FuncStart(this.__drawStoragePretty.name),this.ClearTextArea();for(var t=0;t<e.length;t++){this.debug().Log("key: \t"+e[t].key);var n=JSON.parse(e[t].data);n&&(this.DrawDebugDataPretty(n),this.debug().Log("------------"))}this.debug().FuncEnd(this.__drawStoragePretty.name)}DebugDataOneNode(e){this.debug().FuncStart(this.DebugDataOneNode.name);var t=(e.IsActive?"* ":"  ")+(e.IsExpanded?"+ ":"  ")+e.NodeId.asString+" "+e.NodeFriendly;return this.debug().FuncEnd(this.DebugDataOneNode.name),t}GetDebugDataOneCE(e){this.debug().FuncStart("GetDebugDataOneCE");var t=[];t.push("------ All Tree Nodes -----");for(var n=0;n<e.AllTreeNodeAr.length;n++){this.debug().Log("idx: "+n);var i=this.DebugDataOneNode(e.AllTreeNodeAr[n]);this.debug().Log("oneVal : "+i),t.push(i)}return this.debug().FuncEnd(this.GetDebugDataOneCE.name),t}__buildDebugDataPretty(e){this.debug().FuncStart(this.__buildDebugDataPretty.name,"data not null? "+this.debug().IsNullOrUndefined(e));var t=[];if(e){t.push("------ One Window Snap Shot Start -----"),t.push("Id: "+e.Id),t.push("TimeStamp: "+e.TimeStamp),t.push("CE Count: "+e.AllCEAr.length),t.push("Type: "+s[e.WindowType]),t.push("Nickname: "+e.NickName);for(var n=0;n<e.AllCEAr.length;n++){t.push("\t------ One CE Start -----");var i=e.AllCEAr[n];t.push("\tId: "+i.Id.asString);for(var a=this.GetDebugDataOneCE(i),o=0;o<a.length;o++)t.push("\t\t"+a[o]);t.push("\t------ One CE End -----")}t.push("------ One Window Snap Shot End -----"),this.debug().FuncEnd(this.__buildDebugDataPretty.name)}else this.debug().Error(this.__buildDebugDataPretty.name,"missing data");return t}DrawDebugDataPretty(e){this.debug().FuncStart(this.DrawDebugDataPretty.name,"source not null: "+this.debug().IsNullOrUndefined(e));for(var t=this.__buildDebugDataPretty(e),n=0;n<t.length;n++)this.PopHub.FeedbackMan.WriteLine(t[n]);this.debug().FuncEnd(this.DrawDebugDataPretty.name)}ClearTextArea(){var e=this.__getTextArea();e?e.value="":this.debug().Error(this.ClearTextArea.name,"No text area found")}__wireParentFocusCheck(){window.addEventListener("focus",()=>{this.OnMenuFocused(!0)}),window.addEventListener("blur",()=>{this.OnMenuFocused(!1)})}OnParentFocused(e){this.ParentFocused=e,this.CalculateMenuDisplay()}OnMenuFocused(e){this.MenuFocused=e,this.CalculateMenuDisplay()}CalculateMenuDisplayDelayed(e){e.ParentFocused||e.MenuFocused||(e.OtherFocused=!0),e.ParentFocused&&(e.OtherFocused=!1),e.MenuEnabled=!e.OtherFocused&&(e.ParentFocused||e.MenuFocused);var t=document.querySelector(e.PopConst().Selector.HS.menuOverlay);t&&(e.MenuEnabled?t.style.display="none":t.style.display="")}CalculateMenuDisplay(){var e=this;setTimeout(()=>{this.CalculateMenuDisplayDelayed(e)},100),setTimeout(()=>{this.CalculateMenuDisplayDelayed(e)},1e3)}__getTextArea(){return document.getElementById(this.PopConst().ElemId.HS.TaDebug)}HndlrDebugTextChanged(e,t){var n=e.__getTextArea();n&&(t.Append?n.value+=t.NewText+"\n":n.value=t.NewText+"\n",n.scrollTop=n.scrollHeight)}SetParentInfo(e){var t=document.getElementById(this.PopConst().ElemId.HindSiteParentInfo);t&&(t.innerHTML=" | Parent Id: "+this.GuidMan().ShortGuid(e.DataDocSelf.XyyzId)+" | "+e.Window.location.href)}SetAccordianClass(e,t){t?e.classList.add(this.PopConst().ClassNames.HS.Collapsed):e.classList.remove(this.PopConst().ClassNames.HS.Collapsed)}GetAccordianContentElem(e){if(e){var t=e.parentElement.getElementsByClassName("accordian-content");if(t)var n=t[0]}return n}DrawStorageResponse(e){this.debug().FuncStart("DrawStorage");try{e.CurrentSnapShots}catch(e){this.debug().Error(this.DrawStorageResponse.name,e.message)}this.debug().FuncEnd("DrawStorage")}__drawStorageRaw(e){this.debug().FuncStart("DrawStorageRaw");for(var t=0;t<e.length;t++)this.debug().Log("key: \t"+e[t].key),this.debug().Log("data: \t"+e[t].data),this.debug().Log("------------");this.debug().FuncEnd("DrawStorageRaw")}RestoreAccordianStates(){for(var e=this.PopAtticMan().CurrentSettings().Accordian,t=0;t<e.length;t++){var n=e[t],i=document.getElementById(n.ElemId);if(i){var s=this.GetAccordianContentElem(i);s&&this.SetAccordianClass(s,n.isCollapsed)}}}UpdateAtticFromUi(){this.debug().FuncStart(this.UpdateAtticFromUi.name);let e=this.PopAtticMan().CurrentSettings(),t=document.querySelector(this.PopConst().Selector.HS.iCBoxdSettingsShowDebugData).checked;this.debug().LogVal("currentVal",t.toString()),e.DebugSettings.ShowDebugData=t,this.PopAtticMan().StoreSettings(e),this.RefreshUiRequest(),this.debug().FuncEnd(this.UpdateAtticFromUi.name)}SelectChanged(){this.debug().FuncStart(this.SelectChanged.name),this.__selectSnapshotIndex=this.__getSelectElem().selectedIndex,this.debug().Log("new index :"+this.__selectSnapshotIndex),this.RefreshUiRequest(),this.debug().FuncEnd(this.SelectChanged.name)}__GetCancelButton(){return document.getElementById(this.PopConst().ElemId.HS.Btn.Cancel)}SetCancelFlag(){this.OperationCancelled=!0;var e=this.__GetCancelButton();e&&e.classList.add("red")}ClearCancelFlag(){var e=this.__GetCancelButton();e&&e.classList.remove("red"),this.UiMan().OperationCancelled=!1}__refreshSettings(){this.debug().FuncStart(this.__refreshSettings.name);let e=window.document.querySelector(this.PopConst().Selector.HS.IdFieldSetDebug),t=this.PopAtticMan().CurrentSettings();if(t){if(e){let t=this.PopAtticMan().CurrentSettings().DebugSettings.ShowDebugData?"":"none";e.style.display=t}let n=window.document.querySelector(this.PopConst().Selector.HS.iCBoxdSettingsShowDebugData);n?(this.debug().LogVal("before",n.checked.toString()),n.checked=t.DebugSettings.ShowDebugData,this.debug().LogVal("after",n.checked.toString())):this.debug().Error(this.RefreshUiRequest.name,"no checkbox found")}else this.debug().Error(this.RefreshUiRequest.name,"no settings found");this.debug().FuncEnd(this.__refreshSettings.name)}RefreshUiRequest(){this.debug().FuncStart(this.__drawCorrectNicknameInUI.name);this.MsgMan().SendMessage(new r(a.GiveCurrentData));this.__refreshSettings(),this.RestoreAccordianStates(),this.debug().FuncEnd(this.__drawCorrectNicknameInUI.name)}RefreshUiResponse(e){this.__populateStateOfSnapShotSelect(e.CurrentSnapShots),this.__drawCorrectNicknameInUI(e.CurrentSnapShots)}ShowDebugDataOneWindow(){this.debug().FuncStart("ShowDebugDataOneWindow");for(var e=[],t=0;t<e.length;t++)this.debug().Log(e[t]);return this.debug().FuncEnd("ShowDebugDataOneWindow"),e}__drawCorrectNicknameInUI(e){this.debug().FuncStart(this.__drawCorrectNicknameInUI.name);var t=this.UiMan().GetIdOfSelectWindowSnapshot();if(t){this.debug().Log("targetId : "+t.asString);for(var n,i=e,s=this.GetIdOfSelectWindowSnapshot(),a=0;a<i.length;a++){var o=i[a];if(o.Id.asString===s.asString){n=o;break}}if(n){var r=window.document.getElementById(this.PopConst().ElemId.InputNickname);r&&(r.value=n.NickName)}}this.debug().FuncEnd(this.__drawCorrectNicknameInUI.name)}GetValueInNickname(){return window.document.getElementById(this.PopConst().ElemId.InputNickname).value}__getSelectElem(){return window.document.getElementById(this.PopConst().ElemId.HS.SelStateSnapShot)}GetIdOfSelectWindowSnapshot(){this.debug().FuncStart(this.GetIdOfSelectWindowSnapshot.name);var e=this.__getSelectElem(),t=null;if(e){var n=e.options.length;if(this.__selectSnapshotIndex<n){var i=e.options[this.__selectSnapshotIndex].value;t=this.GuidMan().ParseGuid(i),this.debug().LogVal("toReturn",t.asString)}}return this.debug().FuncEnd(this.GetIdOfSelectWindowSnapshot.name),t}AssignOnClickEvent(e,t){var n=document.getElementById(e);n?n.addEventListener("click",e=>{t(e)}):this.debug().Error(this.AssignOnClickEvent.name,"No Id: "+e)}AssignOnChangeEvent(e,t){var n=document.getElementById(e);n?n.onchange=()=>{}:this.debug().Error(this.AssignOnClickEvent.name,"No Id: "+e)}AssignDblClickEvent(e,t){var n=document.getElementById(e);n?n.ondblclick=e=>{t(e)}:this.debug().Error(this.AssignOnClickEvent.name,"No Id: "+e)}__populateStateOfSnapShotSelect(e){if(this.debug().FuncStart(this.__populateStateOfSnapShotSelect.name,this.__selectSnapshotIndex.toString()),e){var t=this.__getSelectElem();if(t){var n=window.document.createElement("optgroup");if(n.label=this.Utilites().SelectHeaderStr(),e&&e.length>0){t.options.length=0,this.debug().Log("targetSel.options.length : "+t.options.length);for(var i=0;i<e.length;i++){var s=e[i],a=window.document.createElement("option");a.innerHTML=this.PopHub.Utilities.TimeNicknameFavStr(s),a.value=s.Id.asString,i===this.__selectSnapshotIndex&&(a.selected=!0),n.appendChild(a)}}t.appendChild(n)}}this.debug().FuncEnd(this.__populateStateOfSnapShotSelect.name)}}class h{constructor(e){this.Enabled=!1,this.__debugTextChangedCallbacks=[],this.debugPrefix="\t\t",this.__indentCount=0,this.ParentWindow=e}DebugIDataDoc(e){this.FuncStart(this.DebugIDataDoc.name),this.Log(""),this.Log(this.debugPrefix+this.DebugIDataDoc.name),e?(this.Log(this.debugPrefix+"dataOneDoc: \t"+this.IsNullOrUndefined(e)),this.Log(this.debugPrefix+"dataOneDoc.XyyzId.asShort: \t"+this.IsNullOrUndefined(e.XyyzId.asShort)),this.Log(this.debugPrefix+"dataOneDoc.Document: \t"+this.IsNullOrUndefined(e.Document)),e.Document?(this.LogVal(this.debugPrefix+"dataOneDoc.Document.readyState:",e.Document.readyState),e.Document.location?this.LogVal(this.debugPrefix+"targetDoc.location.href",e.Document.location.href):this.Log(this.debugPrefix+"dataOneDoc.Document.location - does not exist")):this.Log(this.debugPrefix+"dataOneDoc.Document - does not exist")):this.Error(this.DebugIDataDoc.name,"no targetDoc"),this.Log("")}AddDebugTextChangedCallback(e,t){this.__debugTextChangedCallbacks.push({Caller:e,Func:t})}HndlrClearDebugText(e,t=!1){var n=!0;if(t&&(n=confirm("Clear Debug TextArea ?")),console.log("maker pink"),n){e.__triggerAllDebugTextChangedCallbacks({NewText:"--- Debug Text Reset ---",Append:!1})}}MarkerA(){this.__markerRaw("A")}MarkerB(){this.__markerRaw("B")}MarkerC(){this.__markerRaw("C")}MarkerD(){this.__markerRaw("D")}MarkerE(){this.__markerRaw("E")}__markerRaw(e){this.Log("Marker "+e)}LogVal(e,t){this.Log(e+" : "+t)}Log(e,t="",n=!1){if(this.Enabled){for(var i=0;i<this.__indentCount;i++)e="  "+e;if(!n)for(i=0;i<3;i++)e=" "+e;this.__triggerAllDebugTextChangedCallbacks({NewText:e,Append:!0}),console.log(e),this.ParentWindow&&this.ParentWindow.console.log(e)}}__triggerAllDebugTextChangedCallbacks(e){for(var t=0;t<this.__debugTextChangedCallbacks.length;t++){var n=this.__debugTextChangedCallbacks[t];n.Func(n.Caller,e)}}CtorName(e){this.Log("Constructor: "+e)}FuncStart(e,t){e="s) "+e,(t=t?t.toString():"").length>0&&(e=e+" : "+t),this.Log(e,"",!0),this.__indentCount++,this.__indentCount>10&&(this.__indentCount=10)}FuncEnd(e,t=""){e="e) "+e,t.length>0&&(e=e+" : "+t),this.__indentCount--,this.__indentCount<0&&(this.__indentCount=0),this.Log(e,t,!0)}Error(e,t){e||(e="unknown"),t||(t="unknown"),this.Log(""),this.Log("\t\t** ERROR ** "+e),this.Log(""),this.Log("\t\t  "+t),this.Log(""),this.Log("\t\t** ERROR ** "+e),this.Log("")}NotNullCheck(e,t){void 0===t?this.LogVal(e,"Is Undefined"):t?this.LogVal(e,"Is Not Null"):this.LogVal(e,"Is Null")}IsNullOrUndefined(e){return e?void 0===e?"Is Undefined":"Not Null":"Is Null"}}class u extends h{}var l,g=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{d(i.next(e))}catch(e){a(e)}}function r(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((i=i.apply(e,t||[])).next())}))};class c extends i{constructor(e){super(e)}Init(){this.__wireMenuButtons()}__wireMenuButtons(){this.debug().FuncStart(this.__wireMenuButtons.name),this.UiMan().AssignDblClickEvent(this.PopConst().ElemId.HS.SelStateSnapShot,e=>{this.__hndlrRestoreClick(e)}),this.UiMan().AssignDblClickEvent(this.PopConst().ElemId.HS.TaDebug,()=>{this.__cleardebugTextWithConfirm()}),this.UiMan().AssignOnChangeEvent(this.PopConst().ElemId.HS.SelStateSnapShot,e=>{this.__hndlrSelectChange(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.AdminB,()=>{this.__handlrB()}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.Cancel,e=>{this.__hndlrCancelOperation(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.CE,()=>{this.__hndlrOpenCE()}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.Desktop,e=>{this.__hndlrDesktop(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.DrawStorage,e=>this.__DrawStorage(e)),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.ModeEdit,e=>this.__hndlrSetScMode(this.PopConst().ScMode.edit,e)),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.ModeNorm,e=>this.__hndlrSetScMode(this.PopConst().ScMode.normal,e)),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.ModePrev,e=>this.__hndlrSetScMode(this.PopConst().ScMode.preview,e)),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.QuickPublish,e=>{this.__hndlrQuickPublish(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.RemoveFromStorage,e=>this.__RemoveFromStorage(e)),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.RestoreWindowState,e=>{this.__hndlrRestoreClick(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.SaveWindowState,e=>{this.__hndlrTakeSnapShot(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.UpdateNicknameB,()=>this.__updateNickName()),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Btn.BigRed,()=>this.__hndlrAddCETab),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Legend.LgndDebug,e=>{this.__toggleAccordian(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Legend.LgndForeSite,e=>{this.__toggleAccordian(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Legend.LgndHindSite,e=>{this.__toggleAccordian(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Legend.LgndInSite,e=>{this.__toggleAccordian(e)}),this.UiMan().AssignOnClickEvent(this.PopConst().ElemId.HS.Legend.LgndSettings,e=>{this.__toggleAccordian(e)}),this.debug().FuncEnd(this.__wireMenuButtons.name)}__hndlrSelectChange(e){this.PopHub.UiMan.SelectChanged()}__RemoveFromStorage(e){this.MsgMan().SendMessage(new r(a.RemoveFromStorage))}__DrawStorage(e){this.MsgMan().FromAtticDrawStorage()}__hndlrSetScMode(e,t){return g(this,void 0,void 0,(function*(){this.__initNewOperation();var n=new r(a.SetScMode);n.Data=new o,n.Data.ReqScMode=e,n.Data.UseOriginalWindowLocation=t.ctrlKey,this.MsgMan().SendMessage(n)}))}__updateNickName(){this.PopAtticMan;var e=new r(a.UpdateNickName);e.Data.idOfSelect=this.UiMan().GetIdOfSelectWindowSnapshot(),e.Data.NewNickname=this.UiMan().GetValueInNickname(),this.MsgMan().SendMessage(e)}__cleardebugTextWithConfirm(){this.debug().HndlrClearDebugText(this.debug(),!0)}__cleardebugText(){this.debug().HndlrClearDebugText(this.debug())}__toggleAccordian(e){this.debug().FuncStart(this.__toggleAccordian.name);var t=e.target||e.srcElement,n=this.UiMan().GetAccordianContentElem(t);if(n){var i=!n.classList.contains(this.PopConst().ClassNames.HS.Collapsed);this.UiMan().SetAccordianClass(n,i),this.PopAtticMan().UpdateAccodianState(t.getAttribute("id"),i)}else this.debug().Error(this.__toggleAccordian.name,"did not find sib");this.debug().FuncEnd(this.__toggleAccordian.name)}__handlrB(){this.MsgMan().SendMessage(new r(a.AdminB))}__hndlrMenuWindowChanged(){var e={MenuX:window.screenX||window.screenLeft||0,MenuY:window.screenY||window.screenTop||0,MenuHeight:window.outerHeight,MenuWidth:window.outerWidth};this.PopAtticMan().UpdateMenuCoords(e),this.__verifyMatchingTab()}__verifyMatchingTab(){}__hndlrDesktop(e){this.__initNewOperation(),this.MsgMan().SendMessage(new r(a.GoDesktop))}__hndlrCancelOperation(e){this.UiMan().SetCancelFlag()}__hndlrQuickPublish(e){return g(this,void 0,void 0,(function*(){this.__initNewOperation(),this.MsgMan().SendMessage(new r(a.QuickPublish)),this.MsgMan().SendMessage(new r(a.TaskSuccessful))}))}__hndlrTakeSnapShot(e){return g(this,void 0,void 0,(function*(){this.__initNewOperation(),this.MsgMan().SendMessage(new r(a.TakeSnapShot))}))}__hndlrAddCETab(){return g(this,void 0,void 0,(function*(){this.__initNewOperation(),this.MsgMan().SendMessage(new r(a.AddCETab))}))}__hndlrOpenCE(){return g(this,void 0,void 0,(function*(){this.__initNewOperation(),this.MsgMan().SendMessage(new r(a.OpenCE))}))}__initNewOperation(){this.__cleardebugText(),this.UiMan().ClearCancelFlag()}__hndlrRestoreClick(e){return g(this,void 0,void 0,(function*(){this.debug().FuncStart(this.__hndlrRestoreClick.name),this.__initNewOperation();var e=new r(a.AddCETab);e.Data.idOfSelect=this.UiMan().GetIdOfSelectWindowSnapshot(),this.MsgMan().SendMessage(e),this.debug().FuncEnd(this.__hndlrRestoreClick.name)}))}}class S extends i{ReceiveMessage(e){}SendMessage(e){}FromAtticDrawStorage(){}}class p extends i{Init(){var e=this.CurrentSettings().MenuPrefs;if(e.MenuX&&e.MenuY){var t=window.screenLeft,n=window.screenTop;Math.abs(e.MenuX-t),Math.abs(e.MenuY-n);window.moveTo(Math.abs(e.MenuX),Math.abs(e.MenuY))}e.MenuWidth&&e.MenuHeight&&(e.MenuHeight<this.PopConst().Numbers.MinMenuHeight&&(e.MenuHeight=this.PopConst().Numbers.MinMenuHeight),e.MenuWidth<this.PopConst().Numbers.MinMenuWidth&&(e.MenuWidth=this.PopConst().Numbers.MinMenuWidth),window.resizeTo(Math.abs(e.MenuWidth),Math.abs(e.MenuHeight)))}UpdateMenuCoords(e){var t=this.CurrentSettings();t.MenuPrefs=e,this.StoreSettings(t)}__drawSettings(){var e=[],t=this.CurrentSettings();e.push("----- Settings - Accordian ------");for(var n=0;n<t.Accordian.length;n++)e.push(t.Accordian[n].ElemId+":"+t.Accordian[n].isCollapsed.toString());return e}GetDefaultSettings(){return{DebugSettings:{KeepDialogOpen:this.PopConst().Storage.DefaultDebugKeepDialogOpen,ShowDebugData:this.PopConst().Storage.DefaultShowDebugData},Accordian:[],MenuPrefs:{MenuHeight:null,MenuWidth:null,MenuX:null,MenuY:null}}}CurrentSettings(){var e,t=this.GetDefaultSettings(),n=window.localStorage.getItem(this.PopConst().Storage.WindowRoot+this.PopConst().Storage.SettingsSuffix);return n&&(e=JSON.parse(n)),e||(e=t),this.debug().NotNullCheck("toReturn",e),e.DebugSettings||(e.DebugSettings=t.DebugSettings),e.DebugSettings.KeepDialogOpen||(e.DebugSettings.KeepDialogOpen=t.DebugSettings.KeepDialogOpen),e.DebugSettings.ShowDebugData||(e.DebugSettings.ShowDebugData=t.DebugSettings.ShowDebugData),e.Accordian||(e.Accordian=[]),e.MenuPrefs||(e.MenuPrefs=t.MenuPrefs),e}StoreSettings(e){window.localStorage.setItem(this.PopConst().Storage.WindowRoot+this.PopConst().Storage.SettingsSuffix,JSON.stringify(e))}UpdateAccodianState(e,t){this.debug().FuncStart(this.UpdateAccodianState.name,e+" "+t);for(var n=this.CurrentSettings(),i=n.Accordian,s=null,a=0;a<i.length;a++){var o=i[a];if(o.ElemId===e){s=!0,o.isCollapsed=t;break}}if(!s){var r={ElemId:e,isCollapsed:t};i.push(r)}this.StoreSettings(n),this.debug().FuncStart(this.UpdateAccodianState.name)}}class b{EmptyGuid(){return this.ParseGuid("00000000-0000-0000-0000-000000000000")}NewGuid(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return this.ParseGuid(e)}ShortGuid(e){var t="{error}";return e&&e.asString.length>this.ShortGuidLength&&(t=e.asString.substr(0,this.ShortGuidLength)),t}ParseGuid(e){let t={asString:e,asShort:""};return t.asShort=this.ShortGuid(t),t}}class m{constructor(e){e.FuncStart(m.name),this.GuidMan=new b,e.FuncEnd(m.name)}SelectHeaderStr(){let e="";return e+=this.Buffer("...Time Stamp",23,".",!1),e+=this.Buffer("- Page Type",20,".",!1,!1),e+=this.Buffer("- Nickname",16,".",!1,!1),e+=this.Buffer("- Fav.",4,".",!1),e}MakeSelectorFromId(e){return"[id="+e+"]"}TimeNicknameFavStr(e){var t=e.WindowType===s.Unknown?"?":s[e.WindowType];return this.MakeFriendlyDate(e.TimeStamp)+" - "+this.Buffer(t,17," ",!1)+" - "+this.Buffer(e.NickName,16," ",!1)+" - "+this.Buffer(e.IsFavorite?"*":" ",1)}Buffer(e,t,n=" ",i=!0,s=!0){var a=e;if(0===n.length&&(n=" "),a.length>t&&(a=t>6?a.substring(0,t-3)+"...":a.substring(0,t)),a.length<t){var o=t-a.length;" "===n&&s&&(n="&nbsp;");for(var r=0;r<o;r++)i?a=n+a:a+=n}return a}MakeFriendlyDate(e){var t=e.getFullYear(),n=e.getMonth(),i=this.Buffer(e.getDay().toString(),2,"0"),s=this.Buffer(e.getMinutes().toString(),2,"0"),a=e.getHours(),o=a>=12?"pm":"am",r=(a%=12)||12;return t+"."+n+"."+i+" "+this.Buffer(r.toString(),2,"0")+":"+s+" "+o}}class _ extends i{constructor(e){super(e)}__getTextArea(){return document.getElementById(this.PopConst().ElemId.textAreaFeedback)}WriteLine(e){var t=this.__getTextArea();t&&(t.value+=e+"\n")}}!function(e){e[e.Unknown=0]="Unknown",e[e.Edit=1]="Edit",e[e.Preview=2]="Preview",e[e.Normal=3]="Normal"}(l||(l={}));class C{}C.PopConst={ClassNames:{HS:{Collapsed:"in"}},ElemId:{textAreaFeedback:"ta-feedback",InputNickname:"inputNickname",HindSiteParentInfo:"spanParentInfo",HS:{SelStateSnapShot:"selState",TabId:"orig-win-id",TaDebug:"ta-debug",Btn:{AdminB:"AdminB",ToggleFavoriteB:"ToggleFavorite",Cancel:"Cancel",CE:"CE",Desktop:"Desktop",DrawStorage:"DrawLocalStorage",BigRed:"btnBigRed",ModeEdit:"Edit",ModeNorm:"Norm",ModePrev:"Prev",QuickPublish:"QuickPublish",RemoveFromStorage:"RemoveOneFromLocalStorage",RestoreWindowState:"RestoreWindowState",SaveWindowState:"SaveWindowState",UpdateNicknameB:"UpdateNickname"},Legend:{LgndSettings:"lgnd-settings",LgndInSite:"lgnd-in-site",LgndHindSite:"lgnd-hind-site",LgndDebug:"lgnd-debug",LgndForeSite:"lgnd-fore-site"}}},Numbers:{MinMenuHeight:600,MinMenuWidth:600},Notify:{Default:"Complete",PublishComplete:"Publishing Complete"},ScMode:{edit:{asEnum:l.Edit,asString:"edit"},normal:{asEnum:l.Normal,asString:"normal"},preview:{asEnum:l.Preview,asString:"preview"}},Selector:{HS:{iCBoxdSettingsShowDebugData:"[id=id-settings-show-debug-data]",IdFieldSetDebug:"[id=id-fieldset-debug]",menuOverlay:"[id=id-menu-overlay]",PrefAutoLogin:"[id=id-settings-auto-login]"}},Storage:{DefaultDebugKeepDialogOpen:!1,WindowRoot:"todo",SettingsSuffix:"todo",DefaultShowDebugData:!1},Timeouts:{WaitBeforeRemovingCompleteFlag:1500}};console.log("did it");new class{constructor(){this.debug=new u(window),this.PopUpAtticMan=new p(this),console.log("asdfasdfsdafa"),console.log("dafsadfdsafsdafsaasdfasdfsa"),this.debug.LogVal("dddd","eeee"),this.PopMsgMan=new S(this),this.UiMan=new d(this),this.EventMan=new c(this),this.GuidMan=new b,this.PopUpConst=C.PopConst,this.Utilities=new m(this.debug),this.FeedbackMan=new _(this),this.init()}init(){this.EventMan.Init(),this.UiMan.Init()}}}]);