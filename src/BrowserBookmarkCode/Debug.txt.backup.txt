javascript:(function(){



var constants = {
  taDebug: 'feedback-pop-up-log'
};
var xyyz = xyyz || {};

xyyz.ChildWindow = {
  myWindow: null,

  WindowExists: function () {
    var toReturn = this.mywindow && this.mywindow !== 'undefined' && !this.mywindow.closed;

    return toReturn;
  },
  
  CreateWindow: function () {
    console.log('new window');
    window.mywindow = window.open('', 'mywindow', 'width=900, height=900');
  },
  FocusWindow: function () {
    console.log('existing window');
    window.mywindow.focus();
  }
};

if (xyyz.ChildWindow.WindowExists()) {
  xyyz.ChildWindow.FocusWindow();
} else {
  xyyz.ChildWindow.CreateWindow();
}
console.log('Menu Finished');

var xyyz = xyyz || {};

xyyz.ChildWindow = {
  myWindow: null,

  WindowExists: function () {
    var toReturn = this.mywindow && this.mywindow !== 'undefined' && !this.mywindow.closed;

    return toReturn;
  },

  WriteHtml: function (targetWindow, documentId) {
    console.log('s) WriteHtml');
    var fullMarkup = '<head>';
    fullMarkup += '<style>';
    fullMarkup += PopUpStyles;
    fullMarkup += '</style>';
    fullMarkup += '<body>';
    fullMarkup += PopUp;
    fullMarkup += '<script>';
    fullMarkup += jsContent;
    fullMarkup += 'var docId = ' + documentId;

    fullMarkup += '</script>';
    fullMarkup += '</body>';

    targetWindow.document.innerHtml = '';

    targetWindow.document.write(fullMarkup);

    console.log(targetWindow);
    console.log(targetWindow.document);

    console.log('e) WriteHtml');
  },

  CreateWindow: function () {
    console.log('new window');
    console.log('Constants: ' + constants.taDebug);

    var newWindow = window.open('', 'mywindow', 'width=400, height=800');
    window.mywindow = newWindow;


    var documentId = new Date().getTime();

    this.WriteHtml(window.mywindow, documentId);

    var foreSiteIdDivOrig = window.document.createElement('div');
    foreSiteIdDivOrig.id = 'orig-win-id';
    foreSiteIdDivOrig.innerText = documentId;
    window.document.body.appendChild(foreSiteIdDivOrig);


    
    console.log('aaaa');
    var foreSiteIdDivChild = newWindow.document.createElement('div');
    foreSiteIdDivChild.id = 'orig-win-id';
    foreSiteIdDivChild.innerText = documentId;
    newWindow.document.body.appendChild(foreSiteIdDivChild);
    console.log(foreSiteIdDivChild.toString());

  },
  FocusWindow: function () {
    console.log('existing window');
    window.mywindow.focus();
  }
};

if (xyyz.ChildWindow.WindowExists()) {
  xyyz.ChildWindow.FocusWindow();
} else {
  xyyz.ChildWindow.CreateWindow();
}
console.log('Menu Finished');














})()